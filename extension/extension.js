"use strict";var lt=Object.create;var Ye=Object.defineProperty;var at=Object.getOwnPropertyDescriptor;var ft=Object.getOwnPropertyNames;var ut=Object.getPrototypeOf;var ct=Object.prototype.hasOwnProperty;var pt=(o,a,f,e)=>{if(a&&typeof a==="object"||typeof a==="function"){for(let l of ft(a))if(!ct.call(o,l)&&l!==f)Ye(o,l,{get:()=>a[l],enumerable:!(e=at(a,l))||e.enumerable})}return o};var Ze=(o,a,f)=>(f=o!=null?lt(ut(o)):{},pt(a||!o||!o.__esModule?Ye(f,"default",{value:o,enumerable:true}):f,o));var Le=require("vscode");var xe=require("vscode");var _e=require("vscode");var ht=Object.defineProperty;var dt=(o,a)=>{for(var f in a)ht(o,f,{get:a[f],enumerable:true})};var H=function(){const o=typeof process!=="undefined"&&process.versions!=null?"node":"browser";let a="";return{env:o,mode:"beautify",end:0,iterator:0,start:0,scopes:[],beautify:{},lexers:{},get source(){return o==="node"&&Buffer.isBuffer(a)?a.toString():a},set source(f){a=o==="node"?Buffer.isBuffer(f)?f:Buffer.from(f):f},data:{begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]},hooks:{before:[],language:[],rules:[],after:[]},stats:{chars:-1,time:-1,size:"",language:""},options:{lexer:"auto",language:"text",languageName:"Plain Text",mode:"beautify",indentLevel:0,crlf:false,commentIndent:true,endNewline:false,indentChar:" ",indentSize:2,preserveComment:false,preserveLine:2,wrap:0,grammar:{html:{tags:[],voids:[],embedded:{}},liquid:{tags:[],else:[],singletons:[],embedded:{}},script:{keywords:[]},style:{units:[]}},markup:{correct:false,commentNewline:false,attributeCasing:"preserve",attributeValues:"preserve",attributeSort:false,attributeSortList:[],forceAttribute:false,forceLeadAttribute:false,forceIndent:false,preserveText:false,preserveAttributes:false,selfCloseSpace:false,quoteConvert:"none"},style:{correct:false,compressCSS:false,classPadding:false,noLeadZero:false,sortSelectors:false,sortProperties:false,quoteConvert:"none",forceValue:"preserve"},script:{correct:false,braceNewline:false,bracePadding:false,braceStyle:"none",braceAllman:false,commentNewline:false,caseSpace:false,inlineReturn:true,elseNewline:false,endComma:"never",arrayFormat:"default",objectSort:false,objectIndent:"default",functionNameSpace:false,functionSpace:false,styleGuide:"none",ternaryLine:false,methodChain:4,neverFlatten:false,noCaseIndent:false,noSemicolon:false,quoteConvert:"none",variableList:"none",vertical:false},json:{arrayFormat:"default",braceAllman:false,bracePadding:false,objectIndent:"default",objectSort:false}}}}();var v="";var Ie=Object.assign;var je=Object.create;var Ne=Object.keys;var Ge=Object.defineProperty;var Ue=Array.isArray;var we;var pe=new(we=class{constructor(){this.html={};this.liquid={};this.script={};this.style={};this.script.keywords=new Set(we.defaults.script.keywords);this.style.units=new Set(we.defaults.style.units);this.html.tags=new Set(we.defaults.html.tags);this.html.voids=new Set(we.defaults.html.voids);this.html.embed={};this.liquid.tags=new Set(we.defaults.liquid.tags);this.liquid.else=new Set(we.defaults.liquid.else);this.liquid.singletons=new Set(we.defaults.liquid.singletons);this.liquid.embed={};this.defaults()}embed(o,a){return a in this[o].embed}defaults(){for(const o in we.defaults.html.embedded){this.html.embed[o]={};for(const{language:a,attribute:f=null}of we.defaults.html.embedded[o]){this.html.embed[o].language=a;if(typeof f==="object"){for(const e in f){this.html.embed[o].attribute=e;if(Array.isArray(f[e])){this.html.embed[o].value=l=>new Set(f[e]).has(l)}else{this.html.embed[o].value=l=>new RegExp(f[e]).test(l)}}}else{this.html.embed[o].attribute=null}}}for(const o in we.defaults.liquid.embedded){this.liquid.embed[o]={end:a=>new RegExp(`^{%-?\\s*end${o}`).test(a)};for(const{language:a,argument:f}of we.defaults.liquid.embedded[o]){this.liquid.embed[o].language=a;if(f){if(Array.isArray(f)){this.liquid.embed[o].attribute=e=>new Set(f).has(e)}else{this.liquid.embed[o].attribute=e=>new RegExp(f).test(e)}}else{this.liquid.embed[o].attribute=null}}}}extend(o){for(const a in o){if(a==="html"){if("tags"in o[a]&&Array.isArray(o[a].tags)){for(const f of o[a].tags){if(!this.html.tags.has(f))this.html.tags.add(f)}}if("voids"in o[a]&&Array.isArray(o[a].voids)){for(const f of o[a].voids){if(!this.html.voids.has(f))this.html.voids.add(f)}}if("embedded"in o[a]);}if(a==="liquid"){if("tags"in o[a]&&Array.isArray(o[a].tags)){for(const f of o[a].tags){if(!this.liquid.tags.has(f))this.liquid.tags.add(f)}}if("else"in o[a]&&Array.isArray(o[a].else)){for(const f of o[a].else){if(!this.liquid.else.has(f))this.liquid.else.add(f)}}if("singletons"in o[a]&&Array.isArray(o[a].singletons)){for(const f of o[a].singletons){if(!this.liquid.singletons.has(f))this.liquid.singletons.add(f)}}if("embedded"in o[a]&&typeof o[a].embedded==="object"){for(const f in o[a].embedded){if(!(f in this.liquid.embed)){this.liquid.embed[f]={end:e=>new RegExp(`{%-?\\s*end${f}`).test(e)}}for(const{language:e,argument:l}of o[a].embedded[f]){if(this.liquid.embed[f].language!==e){this.liquid.embed[f].language=e}if(l){if(this.liquid.embed[f].attribute===null){if(Array.isArray(l)){this.liquid.embed[f].attribute=m=>new Set(l).has(m)}else{this.liquid.embed[f].attribute=m=>new RegExp(l).test(m)}}else{const m=[];for(const I of we.defaults.liquid.embedded[f]){if(Array.isArray(I.argument)){for(const L of I.argument){if(l!==L)m.push(l);else m.push(L)}this.liquid.embed[f].attribute=L=>new Set(m).has(L)}else{if(I.argument!==l){this.liquid.embed[f].attribute=L=>new RegExp(l).test(L)}}}}}}}}}if(a==="style"){if("units"in o[a]&&Array.isArray(o[a].units)){for(const f of o[a].units){if(!this.style.units.has(f))this.style.units.add(f)}}}if(a==="script"){if("keywords"in o[a]&&Array.isArray(o[a].keywords)){for(const f of o[a].keywords){if(!this.script.keywords.has(f))this.script.keywords.add(f)}}}}}},we.defaults={script:{keywords:["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]},style:{units:["%","cap","ch","cm","deg","dpcm","dpi","dppx","em","ex","fr","grad","Hz","ic","in","kHz","lh","mm","ms","mS","pc","pt","px","Q","rad","rem","rlh","s","turn","vb","vh","vi","vmax","vmin","vw"]},html:{embedded:{script:[{language:"javascript"},{language:"json",attribute:{type:["application/json","application/ld+json"]}},{language:"jsx",attribute:{type:["text/jsx","application/jsx"]}}],style:[{language:"css"}]},voids:["area","base","basefont","br","col","embed","eventsource","frame","hr","image","img","input","isindex","keygen","link","meta","path","param","progress","source","wbr","use"],tags:["body","colgroup","dd","dt","head","html","li","option","p","tbody","td","tfoot","th","thead","tr"]},liquid:{embedded:{schema:[{language:"json"}],style:[{language:"css"}],stylesheet:[{language:"css"},{language:"scss",argument:/\s*['"]scss['"]/}],javascript:[{language:"javascript"}]},tags:["case","capture","comment","embed","filter","for","form","if","macro","paginate","raw","switch","tablerow","unless","verbatim","schema","style","javascript","highlight","stylesheet"],else:["default","else","when","elsif"],singletons:["assign","increment","decrement","render","include"]}},we);function gt(o){const a=je(null);if(o)return Ie(a,o);return a}function Te(o,a=" "){if(o===0)return a;let f=v;let e=1;do{f+=a}while(e++<o);return f}function c(o,a){if(!o)return false;return o.charCodeAt(0)===a}function ne(o,a){return c(o,a)===false}function ce(o){return/\s/.test(o)}function kt(o){const a=1024;const f=1048576;const e=1073741824;if(o<a)return o+" B";else if(o<f)return(o/a).toFixed(1)+" KB";else if(o<e)return(o/f).toFixed(1)+" MB";else return(o/e).toFixed(1)+" GB"}function mt(o){return`\\${o}`}function Je(o){const a=o.indexOf("{");const f=c(o[a+2],45)?o.slice(a+3).trimStart():o.slice(a+2).trimStart();return f.slice(0,f.search(/\s/))}function bt(o){const a=o.indexOf("{");if(c(o[a+1],37)){let f=c(o[a+2],45)?o.slice(a+3).trimStart():o.slice(a+2).trimStart();f=f.slice(0,f.search(/\s/));if(f.startsWith("end"))return false;return pe.liquid.tags.has(f)}return false}function Ee(o){let a=o;if(Array.isArray(o))a=o.join("");const f=a.indexOf("{");if(c(a[f+1],37)){if(c(a[f+2],45))return a.slice(f+3).trimStart().startsWith("end");return a.slice(f+2).trimStart().startsWith("end")}return false}function Ce(o,a){if(a===1){return c(o[0],123)&&(c(o[1],37)||c(o[1],123))}else if(a===2){return c(o[o.length-1],125)&&(c(o[o.length-2],37)||c(o[o.length-2],125))}else if(a===3){return c(o[0],123)&&(c(o[1],37)||c(o[1],123))&&(c(o[o.length-1],125)&&(c(o[o.length-2],37)||c(o[o.length-2],123)))}else if(a===4){return/{[{%}]/.test(o)}else if(a===5){return/{[{%]/.test(o)&&/[%}]}/.test(o)}}function Qe(o){let a=0;const f=o.length;const e=o;const l=()=>{let I=0;const L=e.length;if(I<L){do{if(Ue(e[I])===true)e[I]=Qe.apply(this,e[I]);I=I+1}while(I<L)}};const m=I=>{let L=a;let j=0;let t=0;let i=0;let r=[];let q=e[a];let W="";const s=typeof q;if(L<f){do{W=typeof e[L];if(e[L]<q||W<s){q=e[L];r=[L]}else if(e[L]===q){r.push(L)}L=L+1}while(L<f)}t=r.length;L=a;j=t+a;if(L<j){do{e[r[i]]=e[L];e[L]=q;i=i+1;L=L+1}while(L<j)}a=a+t;if(a<f){m("")}else{if(this.recursive===true)l();o=e}return I};m("");return o}function et(o){let a=0;const f=o.length;const e=o;const l=()=>{let I=0;const L=e.length;if(I<L){do{if(Ue(e[I]))e[I]=et.apply(this,e[I]);I=I+1}while(I<L)}};const m=I=>{let L=a;let j=0;let t=0;let i=0;let r=e[a];let q=[];let W="";const s=typeof r;if(L<f){do{W=typeof e[L];if(e[L]>r||W>s){r=e[L];q=[L]}else if(e[L]===r){q.push(L)}L=L+1}while(L<f)}t=q.length;L=a;j=t+a;if(L<j){do{e[q[i]]=e[L];e[L]=r;i=i+1;L=L+1}while(L<j)}a=a+t;if(a<f){m("")}else{if(this.recursive===true)l();o=e}return I};m("");return o}function tt(o){let a=o;const f=[o[0]];const e=()=>{let m=0;const I=a.length;if(m<I){do{if(Ue(a[m]))a[m]=tt.apply(this,a[m]);m=m+1}while(m<I)}};const l=m=>{let I=0;const L=[];const j=a.length;if(I<j){do{if(a[I]!==m)L.push(a[I]);I=I+1}while(I<j)}a=L;if(L.length>0){f.push(L[0]);l(L[0])}else{if(this.recursive===true)e();o=a}};l(this.array[0]);return o}var n=new class St{constructor(){this.datanames=["begin","ender","lexer","lines","stack","token","types"];this.data={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};this.structure=[["global",-1]];this.references=[[]];this.count=-1;this.lineNumber=1;this.linesSpace=0;this.error=""}get current(){const{begin:a,ender:f,lexer:e,lines:l,stack:m,token:I,types:L}=this.data;return{begin:a[a.length-1],ender:f[f.length-1],lexer:e[e.length-1],lines:l[l.length-1],stack:m[m.length-1],token:I[a.length-1],types:L[a.length-1]}}init(){this.error="";this.count=-1;this.linesSpace=0;this.lineNumber=1;this.references=[[]];this.data.begin=[];this.data.ender=[];this.data.lexer=[];this.data.lines=[];this.data.stack=[];this.data.token=[];this.data.types=[];this.structure=[["global",-1]];this.structure.pop=()=>{const a=this.structure.length-1;const f=this.structure[a];if(a>0)this.structure.splice(a,1);return f};return this.data}concat(a,f){for(const e of this.datanames)a[e]=a[e].concat(f[e]);if(a===this.data)this.count=a.token.length-1}objectSort(a){let f=this.count;let e=this.structure[this.structure.length-1][1];let l=0;let m=0;let I=0;let L=0;let j=true;let t=0;let i=0;let r=0;const q=[];const W=e;const s=H.options.language==="json";const C=a.lexer[f]==="style"&&this.structure[this.structure.length-1][0]==="global";const x=a.lexer[f]==="style";const d=x===true?[";","separator"]:[",","separator"];const z=this.linesSpace;const p=this.count;const G=C===true?"global":this.structure[this.structure.length-1][0];function R(g,k){let O=g[0];let P=k[0];if(a.types[O]==="comment"){do{O=O+1}while(O<p&&a.types[O]==="comment");if(a.token[O]===void 0){return 1}}if(a.types[P]==="comment"){do{P=P+1}while(P<p&&a.types[P]==="comment");if(a.token[P]===void 0)return 1}if(x===true){if(a.token[O].indexOf("@import")===0||a.token[P].indexOf("@import")===0){return O<P?-1:1}if(a.types[O]!==a.types[P]){if(a.types[O]==="function")return 1;if(a.types[O]==="variable")return-1;if(a.types[O]==="selector")return 1;if(a.types[O]==="property"&&a.types[P]!=="variable")return-1;if(a.types[O]==="mixin"&&a.types[P]!=="property"&&a.types[P]!=="variable")return-1}}if(a.token[O].toLowerCase()>a.token[P].toLowerCase())return 1;return-1}const u={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};L=f;do{if(a.begin[f]===e||C===true&&f<L&&a.token[f]==="}"&&a.begin[a.begin[f]]===-1){if(a.types[f].indexOf("template")>-1)return;if(a.token[f]===d[0]||x===true&&a.token[f]==="}"&&a.token[f+1]!==";"){j=true;t=f+1}else if(x===true&&a.token[f-1]==="}"){j=true;t=f}if(t===0&&a.types[0]==="comment"){do{t=t+1}while(a.types[t]==="comment")}else if(a.types[t]==="comment"&&a.lines[t]<2){t=t+1}if(j===true&&(a.token[f]===d[0]||x===true&&a.token[f-1]==="}")&&t<=L){if(x===true&&"};".indexOf(a.token[L])<0){L=L+1}else if(x===false&&a.token[L]!==","){L=L+1}q.push([t,L]);if(x===true&&a.token[t]==="}"){L=t}else{L=t-1}}}f=f-1}while(f>e);if(q.length>0&&q[q.length-1][0]>f+1){l=q[q.length-1][0]-1;if(a.types[l]==="comment"&&a.lines[l]>1){do{l=l-1}while(l>0&&a.types[l]==="comment");q[q.length-1][0]=l+1}if(a.types[f+1]==="comment"&&f===-1){do{f=f+1}while(a.types[f+1]==="comment")}q.push([f+1,l])}if(q.length>1){if(s===true||x===true||a.token[f-1]==="="||a.token[f-1]===":"||a.token[f-1]==="("||a.token[f-1]==="["||a.token[f-1]===","||a.types[f-1]==="word"||f===0){q.sort(R);r=q.length;j=false;e=0;do{i=q[e][1];if(x===true){I=i;if(a.types[I]==="comment")I=I-1;if(a.token[I]==="}"){i=i+1;d[0]="}";d[1]="end"}else{d[0]=";";d[1]="separator"}}l=q[e][0];if(x===true&&a.types[i-1]!=="end"&&a.types[i]==="comment"&&a.types[i+1]!=="comment"&&e<r-1){i=i+1}if(l<i){do{if(x===false&&e===r-1&&l===i-2&&a.token[l]===","&&a.lexer[l]==="script"&&a.types[l+1]==="comment"){m=m+1}else{this.push(u,{begin:a.begin[l],ender:a.ender[l],lexer:a.lexer[l],lines:a.lines[l],stack:a.stack[l],token:a.token[l],types:a.types[l]});m=m+1}if(a.token[l]===d[0]&&(x===true||a.begin[l]===a.begin[q[e][0]])){j=true}else if(a.token[l]!==d[0]&&a.types[l]!=="comment"){j=false}l=l+1}while(l<i)}if(j===false&&u.token[u.token.length-1]!=="x;"&&(x===true||e<r-1)){l=u.types.length-1;if(u.types[l]==="comment"){do{l=l-1}while(l>0&&u.types[l]==="comment")}l=l+1;this.splice({data:u,howmany:0,index:l,record:{begin:W,stack:G,ender:this.count,lexer:u.lexer[l-1],lines:0,token:d[0],types:d[1]}});m=m+1}e=e+1}while(e<r);this.splice({data:a,howmany:m,index:f+1});this.linesSpace=z;this.concat(a,u)}}}pop(a){const f={begin:a.begin.pop(),ender:a.ender.pop(),lexer:a.lexer.pop(),lines:a.lines.pop(),stack:a.stack.pop(),token:a.token.pop(),types:a.types.pop()};if(a===this.data)this.count=this.count-1;return f}push(a,f,e=""){const l=()=>{let m=this.count;const I=a.begin[m];if(a.lexer[m]==="style"&&H.options.style.sortProperties===true||a.lexer[m]==="script"&&(H.options.script.objectSort===true||H.options.json.objectSort===true)){return}do{if(a.begin[m]===I||a.begin[a.begin[m]]===I&&a.types[m].indexOf("attribute")>-1&&a.types[m].indexOf("attribute_end")<0){a.ender[m]=this.count}else{m=a.begin[m]}m=m-1}while(m>I);if(m>-1)a.ender[m]=this.count};this.datanames.forEach(m=>a[m].push(f[m]));if(a===this.data){this.count=this.count+1;this.linesSpace=0;if(f.lexer!=="style"){if(e.replace(/(\{|\}|@|<|>|%|#|)/g,"")===""){e=f.types==="else"?"else":e=f.token}}if(f.types==="start"||f.types.indexOf("_start")>0){this.structure.push([e,this.count])}else if(f.types==="end"||f.types.indexOf("_end")>0){let m=0;if(this.structure.length>2&&(a.types[this.structure[this.structure.length-1][1]]==="else"||a.types[this.structure[this.structure.length-1][1]].indexOf("_else")>0)&&(a.types[this.structure[this.structure.length-2][1]]==="start"||a.types[this.structure[this.structure.length-2][1]].indexOf("_start")>0)&&(a.types[this.structure[this.structure.length-2][1]+1]==="else"||a.types[this.structure[this.structure.length-2][1]+1].indexOf("_else")>0)){this.structure.pop();a.begin[this.count]=this.structure[this.structure.length-1][1];a.stack[this.count]=this.structure[this.structure.length-1][0];a.ender[this.count-1]=this.count;m=a.ender[a.begin[this.count]+1]}l();if(m>0)a.ender[a.begin[this.count]+1]=m;this.structure.pop()}else if(f.types==="else"||f.types.indexOf("_else")>0){if(e==="")e="else";if(this.count>0&&(a.types[this.count-1]==="start"||a.types[this.count-1].indexOf("_start")>0)){this.structure.push([e,this.count])}else{l();if(e===""){this.structure[this.structure.length-1]=["else",this.count]}else{this.structure[this.structure.length-1]=[e,this.count]}}}}}safeSort(a,f,e){if(Ue(a)===false)return a;if(f==="normal"){return tt.call({array:a,recursive:e},a)}else if(f==="descend"){return et.call({recursive:e},a)}return Qe.call({recursive:e},a)}sortCorrection(a,f){let e=a;let l=-1;const m=this.data;const I=[];const L=this.structure.length<2?[-1]:[this.structure[this.structure.length-2][1]];do{if(e>0&&m.types[e].indexOf("attribute")>-1&&m.types[e].indexOf("end")<0&&m.types[e-1].indexOf("start")<0&&m.types[e-1].indexOf("attribute")<0&&m.lexer[e]==="markup"){L.push(e-1)}if(e>0&&m.types[e-1].indexOf("attribute")>-1&&m.types[e].indexOf("attribute")<0&&m.lexer[L[L.length-1]]==="markup"&&m.types[L[L.length-1]].indexOf("start")<0){L.pop()}if(m.begin[e]!==L[L.length-1]){if(L.length>0){m.begin[e]=L[L.length-1]}else{m.begin[e]=-1}}if(m.types[e].indexOf("else")>-1){if(L.length>0){L[L.length-1]=e}else{L.push(e)}}if(m.types[e].indexOf("end")>-1)L.pop();if(m.types[e].indexOf("start")>-1)L.push(e);e=e+1}while(e<f);e=f;do{e=e-1;if(m.types[e].indexOf("end")>-1){I.push(e);l=l+1}m.ender[e]=l>-1?I[l]:-1;if(m.types[e].indexOf("start")>-1){I.pop();l=l-1}}while(e>a)}spacer(a){this.linesSpace=1;do{if(a.array[a.index]==="\n"){this.linesSpace=this.linesSpace+1;this.lineNumber=this.lineNumber+1}if(ce(a.array[a.index+1])===false)break;a.index=a.index+1}while(a.index<a.end);return a.index}splice(a){const f=[this.data.begin[this.count],this.data.token[this.count]];if(a.record!==void 0&&a.record.token!==""){for(const e of this.datanames){a.data[e].splice(a.index,a.howmany,a.record[e])}if(a.data===this.data){this.count=this.count-a.howmany+1;if(f[0]!==this.data.begin[this.count]||f[1]!==this.data.token[this.count]){this.linesSpace=0}}return}for(const e of this.datanames){a.data[e].splice(a.index,a.howmany)}if(a.data===this.data){this.count=this.count-a.howmany;this.linesSpace=0}}wrapCommentBlock(a){const{wrap:f,crlf:e,preserveComment:l}=H.options;const m=[];const I=[];const L=e===true?"\r\n":"\n";const j=/(\/|\\|\||\*|\[|\]|\{|\})/g;const t=/{%-?\s*|\s*-?%}/g;let i=a.start;let r=0;let q=0;let W=0;let s=0;let C=[];let x="";let d="";let z=false;let p=false;let G=false;let R=false;let u="";let g=a.terminator.length-1;let k=a.terminator.charAt(g);let O=0;let P;const _=a.opening.replace(j,mt);const F=new RegExp(`^(${_}\\s*@prettify-ignore-start)`);const $=new RegExp(`(${_}\\s*)`);const oe=c(a.opening[0],123)&&c(a.opening[1],37);if(oe){P=new RegExp(`\\s*${a.terminator.replace(t,Z=>{if(Z.charCodeAt(0)===123)return"{%-?\\s*";return"\\s*-?%}"})}$`)}const X=()=>{if(/^\s+$/.test(C[r+1])||C[r+1]===""){do{r=r+1}while(r<s&&(/^\s+$/.test(C[r+1])||C[r+1]===""))}if(r<s-1)I.push("")};do{m.push(a.chars[i]);if(a.chars[i]==="\n")this.lineNumber=this.lineNumber+1;if(a.chars[i]===k&&a.chars.slice(i-g,i+1).join("")===a.terminator)break;i=i+1}while(i<a.end);u=m.join("");if(F.test(u)===true){let Z="\n";i=i+1;do{m.push(a.chars[i]);if(m.slice(m.length-20).join("")==="@prettify-ignore-end"){if(oe){const le=a.chars.indexOf("{",i);if(c(a.chars[le+1],37)){const V=a.chars.slice(le,a.chars.indexOf("}",le+1)+1).join("");if(P.test(V))a.terminator=V}}i=i+1;break}i=i+1}while(i<a.end);r=i;g=a.opening.length-1;k=a.opening.charAt(g);do{if(a.opening==="/*"&&a.chars[r-1]==="/"&&(a.chars[r]==="*"||a.chars[r]==="/"))break;if(a.opening!=="/*"&&a.chars[r]===k&&a.chars.slice(r-g,r+1).join("")===a.opening)break;r=r-1}while(r>a.start);if(a.opening==="/*"&&a.chars[r]==="*"){Z="*/"}else if(a.opening!=="/*"){Z=a.terminator}g=Z.length-1;k=Z.charAt(g);if(Z!=="\n"||a.chars[i]!=="\n"){do{m.push(a.chars[i]);if(Z==="\n"&&a.chars[i+1]==="\n")break;if(a.chars[i]===k&&a.chars.slice(i-g,i+1).join("")===Z)break;i=i+1}while(i<a.end)}if(a.chars[i]==="\n")i=i-1;u=m.join("").replace(/\s+$/,"");return[u,i]}if(l===true||f<1||i===a.end||u.length<=f&&u.indexOf("\n")<0||a.opening==="/*"&&u.indexOf("\n")>0&&u.replace("\n","").indexOf("\n")>0&&/\n(?!(\s*\*))/.test(u)===false){return[u,i]}r=a.start;if(r>0&&a.chars[r-1]!=="\n"&&ce(a.chars[r-1])){do{r=r-1}while(r>0&&a.chars[r-1]!=="\n"&&ce(a.chars[r-1]))}x=a.chars.slice(r,a.start).join("");const Q=new RegExp("\n"+x,"g");C=u.replace(/\r\n/g,"\n").replace(Q,"\n").split("\n");s=C.length;C[0]=C[0].replace($,"");C[s-1]=C[s-1].replace(P,"");if(s<2)C=C[0].split(" ");if(C[0]===""){C[0]=a.opening}else{C.splice(0,0,a.opening)}s=C.length;r=0;do{d=r<s-1?C[r+1].replace(/^\s+/,""):"";if(/^\s+$/.test(C[r])===true||C[r]===""){X()}else if(C[r].slice(0,4)==="    "){I.push(C[r])}else if(C[r].replace(/^\s+/,"").length>f&&C[r].replace(/^\s+/,"").indexOf(" ")>f){C[r]=C[r].replace(/^\s+/,"");q=C[r].indexOf(" ");I.push(C[r].slice(0,q));C[r]=C[r].slice(q+1);r=r-1}else{C[r]=a.opening==="/*"&&C[r].indexOf("/*")!==0?`   ${C[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`:`${C[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`;O=r<1?f-(a.opening.length+1):f;q=C[r].length;W=C[r].replace(/^\s+/,"").indexOf(" ");if(q>O&&W>0&&W<O){q=O;do{q=q-1;if(ce(C[r].charAt(q))&&q<=f)break}while(q>0);if(C[r].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(C[r])===true&&/^\s*(\*|-)\s/.test(C[r+1])===false){C.splice(r+1,0,"* ")}if(C[r].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(C[r])===true&&/^\s*\d+\.\s/.test(C[r+1])===false){C.splice(r+1,0,"1. ")}if(q<4){I.push(C[r]);R=true}else if(r===s-1){I.push(C[r].slice(0,q));C[r]=C[r].slice(q+1);R=true;r=r-1}else if(/^\s+$/.test(C[r+1])===true||C[r+1]===""){I.push(C[r].slice(0,q));C[r]=C[r].slice(q+1);z=true;r=r-1}else if(C[r+1].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(C[r+1])){I.push(C[r].slice(0,q));C[r]=C[r].slice(q+1);p=true;r=r-1}else if(C[r+1].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(C[r+1])){I.push(C[r].slice(0,q));C[r]=C[r].slice(q+1);G=true;r=r-1}else if(C[r+1].slice(0,4)==="    "){I.push(C[r].slice(0,q));C[r]=C[r].slice(q+1);R=true;r=r-1}else if(q+d.length>f&&d.indexOf(" ")<0){I.push(C[r].slice(0,q));C[r]=C[r].slice(q+1);R=true;r=r-1}else if(C[r].replace(/^\s+/,"").indexOf(" ")<f){C[r+1]=C[r].length>f?C[r].slice(q+1)+L+C[r+1]:`${C[r].slice(q+1)} ${C[r+1]}`}if(z===false&&p===false&&G===false&&R===false){C[r]=C[r].slice(0,q)}}else if(C[r+1]!==void 0&&(C[r].length+d.indexOf(" ")>f&&d.indexOf(" ")>0||C[r].length+d.length>f&&d.indexOf(" ")<0)){I.push(C[r]);r=r+1}else if(C[r+1]!==void 0&&/^\s+$/.test(C[r+1])===false&&C[r+1]!==""&&C[r+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(C[r+1])===false){C[r+1]=`${C[r]} ${C[r+1]}`;z=true}if(R===false&&p===false&&G===false){if(z===true){z=false}else if(/^\s*(\*|-|(\d+\.))\s*$/.test(C[r])===false){if(r<s-1&&C[r+1]!==""&&/^\s+$/.test(C[r])===false&&C[r+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(C[r+1])===false){C[r]=`${C[r]} ${C[r+1]}`;C.splice(r+1,1);s=s-1;r=r-1}else{if(a.opening==="/*"&&C[r].indexOf("/*")!==0){I.push(`   ${C[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`)}else{I.push(`${C[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`)}}}}R=false;p=false;G=false}r=r+1}while(r<s);if(I.length>0){if(I[I.length-1].length>f-(a.terminator.length+1)){I.push(a.terminator)}else{I[I.length-1]=`${I[I.length-1]} ${a.terminator}`}u=I.join(L)}else{C[C.length-1]=C[C.length-1]+a.terminator;u=C.join(L)}return[u,i]}wrapCommentLine(a){let f=a.start;let e=0;let l="";let m=[];const{wrap:I,preserveComment:L}=H.options;function j(){let i="";do{e=e+1;if(a.chars[e+1]==="\n")return}while(e<a.end&&ce(a.chars[e])===true);if(a.chars[e]+a.chars[e+1]==="//"){m=[];do{m.push(a.chars[e]);e=e+1}while(e<a.end&&a.chars[e]!=="\n");i=m.join("");if(/^\/\/ (\*|-|(\d+\.))/.test(i)===false&&i.slice(0,6)!=="//    "&&/^\/\/\s*$/.test(i)===false){l=`${l} ${i.replace(/(^\/\/\s*)/,"").replace(/\s+$/,"")}`;f=e-1;j()}}}const t=()=>{const i=[];const r={ender:-1,types:"comment",lexer:a.lexer,lines:this.linesSpace};if(this.count>-1){r.begin=this.structure[this.structure.length-1][1];r.stack=this.structure[this.structure.length-1][0];r.token=this.data.token[this.count]}else{r.begin=-1;r.stack="global";r.token=""}let q=0;let W=0;l=l.replace(/\s+/g," ").replace(/\s+$/,"");W=l.length;if(I>W)return;do{q=I;if(l.charAt(q)!==" "){do{q=q-1}while(q>0&&l.charAt(q)!==" ");if(q<3){q=I;do{q=q+1}while(q<W-1&&l.charAt(q)!==" ")}}i.push(l.slice(0,q));l=`// ${l.slice(q).replace(/^\s+/,"")}`;W=l.length}while(I<W);q=0;W=i.length;do{r.token=i[q];this.push(this.data,r,v);r.lines=2;this.linesSpace=2;q=q+1}while(q<W)};do{m.push(a.chars[f]);f=f+1}while(f<a.end&&a.chars[f]!=="\n");if(f===a.end){a.chars.push("\n")}else{f=f-1}l=m.join("").replace(/\s+$/,"");if(/^(\/\/\s*@prettify-ignore-start\b)/.test(l)===true){let i="\n";f=f+1;do{m.push(a.chars[f]);f=f+1}while(f<a.end&&(a.chars[f-1]!=="d"||a.chars[f-1]==="d"&&m.slice(m.length-20).join("")!=="@prettify-ignore-end"));e=f;do{}while(e>a.start&&a.chars[e-1]==="/"&&(a.chars[e]==="*"||a.chars[e]==="/"));if(a.chars[e]==="*")i="*/";if(i!=="\n"||a.chars[f]!=="\n"){do{m.push(a.chars[f]);if(i==="\n"&&a.chars[f+1]==="\n")break;f=f+1}while(f<a.end&&(i==="\n"||i==="*/"&&(a.chars[f-1]!=="*"||a.chars[f]!=="/")))}if(a.chars[f]==="\n")f=f-1;l=m.join("").replace(/\s+$/,"");return[l,f]}if(l==="//"||l.slice(0,6)==="//    "||L===true){return[l,f]}l=l.replace(/(\/\/\s*)/,"// ");if(I<1||f===a.end-1&&this.data.begin[this.count]<1)return[l,f];e=f+1;j();t();return[l,f]}};H.lexers.style=function o(a){const{options:f}=H;const e=f.style;const{data:l}=n;const m=a.split(v);const I=a.length;const L=[];const j=[];let t=0;let i=v;let r=v;function q(R){const u=je(null);u.begin=n.structure[n.structure.length-1][1];u.ender=-1;u.lexer="style";u.lines=n.linesSpace;u.stack=n.structure[n.structure.length-1][0];u.token=r;u.types=i;n.push(l,u,R)}function W(R){const u=R;do{R=R-1}while(m[R]==="\\"&&R>0);return(u-R)%2===1}function s(R){const u=R.replace(/\s*!important/," !important").split(v);const g=/-?transition$/.test(l.token[n.count-2]);const k=[];const O=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g;const P=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g;let _=0;let F=0;let $=v;let oe=u.length;let X=[];const Q=ie=>{return ie};const Z=ie=>{ie=ie.replace(/\s*/g,v);return/\/\d/.test(ie)&&R.indexOf("url(")===0?ie:` ${ie.charAt(0)} ${ie.charAt(1)}`};const le=ie=>{if(e.noLeadZero===true){return ie.replace(/^-?\D0+(\.|\d)/,B=>B.replace(/0+/,v))}else if(/0*\./.test(ie)){return ie.replace(/0*\./,"0.")}else if(/0+/.test(/\d+/.exec(ie)[0])){return/^\D*0+\D*$/.test(ie)?ie.replace(/0+/,"0"):ie.replace(/\d+/.exec(ie)[0],/\d+/.exec(ie)[0].replace(/^0+/,v))}return ie};const V=ie=>ie.replace(",",", ");const ae=ie=>`${ie} `;const D=()=>{const ie=_-1;let B=ie;if(ie<1)return true;do{B=B-1}while(B>0&&u[B]==="\\");return(ie-B)%2===1};if(_<oe){do{X.push(u[_]);if(u[_-1]!=="\\"||D()===false){if($===v){if(c(u[_],34)){$='"';F=F+1}else if(c(u[_],39)){$="'";F=F+1}else if(c(u[_],40)){$=")";F=F+1}else if(c(u[_],91)){$="]";F=F+1}}else if(c(u[_],40)&&c($,41)||c(u[_],91)&&c($,93)){F=F+1}else if(u[_]===$){F=F-1;if(F===0)$=v}}if($===v&&u[_]===" "){X.pop();k.push(Q(X.join(v)));X=[]}_=_+1}while(_<oe)}k.push(Q(X.join(v)));oe=k.length;_=0;if(_<oe){do{if(e.noLeadZero===true&&/^-?0+\.\d+[a-z]/.test(k[_])===true){k[_]=k[_].replace(/0+\./,".")}else if(e.noLeadZero===false&&/^-?\.\d+[a-z]/.test(k[_])){k[_]=k[_].replace(".","0.")}else if(O.test(k[_])||P.test(k[_])){k[_]=k[_].replace(O,le).replace(P,le)}else if(/^(0+([a-z]{2,3}|%))$/.test(k[_])&&g===false){k[_]="0"}else if(/^(0+)/.test(k[_])){k[_]=k[_].replace(/0+/,"0");if(/\d/.test(k[_].charAt(1)))k[_]=k[_].substr(1)}else if(/^url\((?!('|"))/.test(k[_])&&k[_].charCodeAt(k[_].length-1)===41){$=k[_].charAt(k[_].indexOf("url(")+4);if($!=="@"&&ne($,40)&&ne($,60)){if(e.quoteConvert==="double"){k[_]=k[_].replace(/url\(/,'url("').replace(/\)$/,'")')}else{k[_]=k[_].replace(/url\(/,"url('").replace(/\)$/,"')")}}}if(/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(k[_])){if(!pe.style.units.has(k[_].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,v))){k[_]=k[_].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,ae)}}if(/^\w+\(/.test(k[_])&&k[_].charAt(k[_].length-1)===")"&&(k[_].indexOf("url(")!==0||k[_].indexOf("url(")===0&&k[_].indexOf(" ")>0)){k[_]=k[_].replace(/,\S/g,V)}_=_+1}while(_<oe)}$=k.join(" ");return $.charAt(0)+$.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,Z)}function C(){const R=[];const u=[];const g=e.quoteConvert;let k=t;let O=0;let P=v;let _=null;const F=()=>{u.push(m[k]);if(ce(m[k+1])){do{k=k+1}while(k<I&&ce(m[k+1]))}};if(k<I){do{if(c(m[k],34)||c(m[k],39)){if(_===null)_=false;if(R[R.length-1]===m[k]&&(m[k-1]!=="\\"||W(k-1)===false)){R.pop();if(g==="double"){m[k]='"'}else if(g==="single"){m[k]="'"}}else if(ne(R[R.length-1],34)&&ne(R[R.length-1],39)&&(m[k-1]!=="\\"||W(k-1)===false)){R.push(m[k]);if(g==="double"){m[k]='"'}else if(g==="single"){m[k]="'"}}else if(m[k-1]==="\\"&&g!=="none"){if(W(k-1)===true){if(g==="double"&&c(m[k],39)){u.pop()}else if(g==="single"&&c(m[k],34)){u.pop()}}}else if(g==="double"&&c(m[k],34)){m[k]='\\"'}else if(g==="single"&&c(m[k],39)){m[k]="\\'"}u.push(m[k])}else if(m[k-1]!=="\\"||W(k-1)===false){if(c(m[k],40)){if(_===null)_=true;R.push(")");F()}else if(c(m[k],91)){_=false;R.push("]");F()}else if((c(m[k],35)||c(m[k],64))&&c(m[k+1],123)){_=false;u.push(m[k]);k=k+1;R.push("}");F()}else if(m[k]===R[R.length-1]){u.push(m[k]);R.pop()}else{u.push(m[k])}}else{u.push(m[k])}if(n.structure[n.structure.length-1][0]==="map"&&R.length===0&&(c(m[k+1],44)||c(m[k+1],41))){if(c(m[k+1],41)&&c(l.token[n.count],40)){n.pop(l);n.structure.pop();u.splice(0,0,"(")}else{break}}if(c(m[k+1],58)){O=k;if(ce(m[O]))do{O=O-1}while(ce(m[O]));P=m.slice(O-6,O+1).join(v);if(P.indexOf("filter")===P.length-6||P.indexOf("progid")===P.length-6){P="filter"}}if(R.length===0){if(c(m[k+1],59)&&W(k+1)===true||c(m[k+1],58)&&ne(m[k],58)&&ne(m[k+2],58)&&P!=="filter"&&P!=="progid"||(c(m[k+1],125)||c(m[k+1],123))||c(m[k+1],47)&&(c(m[k+2],42)||c(m[k+2],47))){O=u.length-1;if(ce(u[O])){do{O=O-1;k=k-1;u.pop()}while(ce(u[O]))}break}if(c(m[k+1],44))break}k=k+1}while(k<I)}t=k;if(n.structure[n.structure.length-1][0]==="map"&&c(u[0],40)){L[L.length-1]=L[L.length-1]-1}r=u.join(v).replace(/\s+/g," ").replace(/^\s/,v).replace(/\s$/,v);if(_===true){r=r.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (")}if(n.count>-1&&l.token[n.count].indexOf("extend(")===0){i="pseudo"}else if(_===true&&/\d/.test(r.charAt(0))===false&&/^rgba?\(/.test(r)===false&&r.indexOf("url(")!==0&&(r.indexOf(" ")<0||r.indexOf(" ")>r.indexOf("("))&&r.charAt(r.length-1)===")"){if(c(l.token[n.count],58)){i="value"}else{r=r.replace(/,\u0020?/g,", ");i="function"}r=s(r)}else if(n.count>-1&&`"'`.indexOf(l.token[n.count].charAt(0))>-1&&l.types[n.count]==="variable"){i="item"}else if(c(u[0],64)||u[0]==="$"){if(l.types[n.count]==="colon"&&f.language==="css"&&(l.types[n.count-1]==="property"||l.types[n.count-1]==="variable")){i="value"}else if(n.count>-1){i="item";P=l.token[n.count];k=P.indexOf("(");if(c(P[P.length-1],41)&&k>0){P=P.slice(k+1,P.length-1);l.token[n.count]=l.token[n.count].slice(0,k+1)+s(P)+")"}}r=s(r)}else{i="item"}q(v)}function x(R){let u=n.count;let g=0;let k=v;const O=[];const P=()=>{if(n.count<0)return;if(u>0&&(l.types[u]==="comment"||l.types[u]==="ignore")){do{u=u-1;O.push(l.token[u])}while(u>0&&l.lexer[u]==="style"&&(l.types[u]==="comment"||l.types[u]==="ignore"))}g=u-1;if(g>0&&(l.types[g]==="comment"||l.types[g]==="ignore")){do{g=g-1}while(g>0&&l.lexer[u]==="style"&&(l.types[g]==="comment"||l.types[g]==="ignore"))}if(g<0)g=0;if(u<0)u=0;k=l.token[u].charAt(0)};function _(F){let $=F;const oe=l.begin[$];l.token[F]=l.token[F].replace(/\s*&/," &").replace(/(\s*>\s*)/g," > ").replace(/(\s*\+\s*)/g," + ").replace(/:\s+/g,": ").replace(/^(\s+)/,v).replace(/(\s+)$/,v).replace(/\s+::\s+/,"::");if(c(l.token[$-1],44)||c(l.token[$-1],58)||l.types[$-1]==="comment"||l.types[$-1]==="pseudo"){if(l.types[$-1]==="pseudo"){l.token[$-1]=`${l.token[$-1]}${l.token[$]}`;l.types[$-1]="selector";n.splice({data:l,howmany:1,index:$})}else{do{$=$-1;if(l.begin[$]===oe){if(c(l.token[$],59)||l.types[$].indexOf("template")>-1)break;if(ne(l.token[$],44)&&l.types[$]!=="comment"){l.types[$]="selector"}if(c(l.token[$],58)){if(ne(l.token[$-1],58)&&l.stack[u]==="global"&&(l.types[$-1]==="comment"||l.types[$-1]==="ignore"||l.types[$-1].indexOf("template")>-1)){l.token[$]=`${l.token[$]}${l.token[$+1]}`;n.pop(l)}else if(n.count===1){l.token[$]=`${l.token[$]}${l.token[$+1]}`;n.pop(l)}else if(l.types[$]==="selector"&&l.types[$+1]==="item"){l.token[$]=`${l.token[$]}${l.token[$+1]}`;n.pop(l)}else{l.token[$]=`${l.token[$-1]}:${l.token[$+1]}`;l.lines[$]=l.lines[$-1];n.splice({data:l,howmany:2,index:$})}}}else{break}}while($>0)}}$=n.count;if(e.sortSelectors===true&&c(l.token[$-1],44)){const X=[l.token[$]];do{$=$-1;if(l.types[$]==="comment"||l.types[$]==="ignore"){do{$=$-1}while($>0&&(l.types[$]==="comment"||l.types[$]==="ignore"))}if(c(l.token[$],44))$=$-1;X.push(l.token[$])}while($>0&&(c(l.token[$-1],44)||l.types[$-1]==="selector"||l.types[$-1]==="comment"||l.types[$-1]==="ignore"));X.sort();$=n.count;l.token[$]=X.pop();do{$=$-1;if(l.types[$]==="comment"||l.types[$]==="ignore"){do{$=$-1}while($>0&&(l.types[$]==="comment"||l.types[$]==="ignore"))}if(c(l.token[$],44))$=$-1;l.token[$]=X.pop()}while($>0&&(c(l.token[$-1],44)||l.token[$-1]==="selector"||l.types[$-1]==="comment"||l.types[$-1]==="ignore"))}u=n.count;P()}P();if(R==="start"&&(l.types[u]==="value"||l.types[u]==="variable")){l.types[u]="item"}if(l.lexer[n.count-1]!=="style"||g<0){if(R==="colon"){if(k==="$"||c(k,64)){l.types[u]="variable"}else{if(l.stack[u]!=="global"&&(l.types[u]!=="comment"||l.types[u]!=="ignore")){l.types[u]="property"}}}else if(l.lexer[u]==="style"){l.types[u]="selector";_(u)}}else if(R==="start"&&l.types[u]==="function"&&l.lexer[u]==="style"){l.types[u]="selector";_(u)}else if(l.types[u]==="item"&&l.lexer[u]==="style"){if(R==="start"){_(u);l.types[u]="selector";if(c(l.token[u],58))l.types[g]="selector";if(l.token[u].indexOf("=\u201C")>0){n.error=`Invalid Quote (\u201C, \\201c) used on line number ${n.lineNumber}`}else if(l.token[u].indexOf("=\u201D")>0){n.error=`Invalid Quote (\u201D, \\201d) used on line number ${n.lineNumber}`}}else if(R==="end"){if(k==="$"||c(k,64)){l.types[u]="variable"}else{l.types[u]="value"}l.token[u]=s(l.token[u])}else if(R==="separator"){if(l.types[g]==="colon"||c(l.token[g],44)||c(l.token[g],123)){if(ne(m[t],59)&&(l.types[g]==="selector"||c(l.token[g],123))){l.types[u]="selector";_(u)}else if(l.token[u].charAt(0)==="$"||c(l.token[u],64)){l.types[u]="variable"}else{l.types[u]="value"}l.token[u]=s(l.token[u]);if(l.token[u].charAt(0)==="\u201C"){n.error=`Invalid Quote (\u201C, \\201c) used on line number ${n.lineNumber}`}else if(l.token[u].charAt(0)==="\u201D"){n.error=`Invalid (\u201D, \\201d) used on line number ${n.lineNumber}`}}else{if(k==="$"||c(k,64)){l.types[u]="variable"}else if(l.types[g]==="value"||l.types[g]==="variable"){l.token[g]=l.token[g]+l.token[u];n.pop(l)}else{l.types[u]="value"}}}else if(R==="colon"){if(k==="$"||c(k,64)){l.types[u]="variable"}else{l.types[u]="property"}}else if(c(l.token[g],64)&&(l.types[g-2]!=="variable"&&l.types[g-2]!=="property"||l.types[g-1]==="separator")){l.types[g]="variable";i="variable";l.token[g]=s(l.token[g])}}}function d(){let R=n.count;do{R=R-1}while(R>0&&l.types[R]==="comment");if(l.token[R]===";")return;n.splice({data:l,howmany:0,index:R+1,record:{begin:n.structure[n.structure.length-1][1],ender:-1,lexer:"style",lines:n.linesSpace,stack:n.structure[n.structure.length-1][0],token:";",types:"separator"}})}function z(R,u){const g=[];let k=v;let O=v;let P=0;let _=R.length;const F=$=>{const oe=l.types[n.count-1];if(i==="item"){if(oe==="colon"){l.types[n.count]="value"}else{x(oe)}}i=$;if(i.indexOf("start")>-1||i.indexOf("else")>-1){q(r)}else{q(v)}};j[j.length-1]=true;if(t<I){do{g.push(m[t]);if(k===v){if(m[t]==='"'){k='"'}else if(m[t]==="'"){k="'"}else if(m[t]==="/"){if(m[t+1]==="/"){k="/"}else if(m[t+1]==="*"){k="*"}}else if(m[t+1]===u.charAt(0)){do{P=P+1;t=t+1;g.push(m[t])}while(t<I&&P<u.length&&m[t+1]===u.charAt(P));if(P===u.length){k=g.join(v);if(ce(k.charAt(_))){do{_=_+1}while(ce(k.charAt(_)))}P=_;do{P=P+1}while(P<u.length&&!ce(k.charAt(P)));if(P===k.length)P=P-u.length;if(R==="{%"){if(k.indexOf("{%-")===0){k=k.replace(/^({%-\s*)/,"{%- ").replace(/(\s*-%})$/," -%}").replace(/(\s*%})$/," %}");O=k.slice(4)}else{k=k.replace(/^({%\s*)/,"{% ").replace(/(\s*%})$/," %}").replace(/(\s*-%})$/," -%}");O=k.slice(3)}}if(R==="{{"){k=k.replace(/^({{\s*)/,"{{ ").replace(/^({{-\s*)/,"{{- ").replace(/(\s*-}})$/," -}}").replace(/(\s*}})$/," }}")}if(i==="item"&&l.types[n.count-1]==="colon"&&(l.types[n.count-2]==="property"||l.types[n.count-2]==="variable")){i="value";l.types[n.count]="value";if(Number.isNaN(Number(l.token[n.count]))===true&&l.token[n.count].charAt(l.token[n.count].length-1)!==")"){l.token[n.count]=l.token[n.count]+k}else{l.token[n.count]=l.token[n.count]+" "+k}return}r=k;if(R==="{%"){const $=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];let oe=$.length-1;O=O.slice(0,O.indexOf(" "));if(O.indexOf("(")>0){O=O.slice(0,O.indexOf("("))}if(O==="else"||O==="elseif"||O==="when"||O==="elsif"){F("template_else");return}oe=$.length-1;if(oe>-1){do{if(O===$[oe]){F("template_start");return}if(O==="end"+$[oe]){F("template_end");return}oe=oe-1}while(oe>-1)}}else if(R==="{{"){let $=k.slice(2);const oe=$.length;let X=0;do{X=X+1}while(X<oe&&ce($.charAt(X))===false&&$.charCodeAt(_)!==40);$=$.slice(0,X);if($.charAt($.length-2)==="}"){$=$.slice(0,$.length-2)}if($==="end"){F("template_end");return}if($==="block"||$==="define"||$==="form"||$==="if"||$==="range"||$==="with"){F("template_start");return}}F("template");return}P=0}}else if(k===m[t]){if(c(k,34)||c(k,39)){k=v}else if(c(k,47)&&(m[t]==="\r"||c(m[t],10))){k=v}else if(c(k,42)&&c(m[t+1],47)){k=v}}t=t+1}while(t<I)}}function p(R){let u;if(R){u=n.wrapCommentLine({chars:m,end:I,lexer:"style",opening:"//",start:t,terminator:"\n"});r=u[0];i=/^(\/\/\s*@prettify-ignore-start)/.test(r)?"ignore":"comment"}else{u=n.wrapCommentBlock({chars:m,end:I,lexer:"style",opening:"/*",start:t,terminator:"*/"});r=u[0];i=/^(\/\*\s*@prettify-ignore-start)/.test(r)?"ignore":"comment"}q(v);t=u[1]}function G(){const R=n.linesSpace;const u=je(null);u.data=je(null);u.data.margin=[v,v,v,v,false];u.data.padding=[v,v,v,v,false];u.last=je(null);u.last.margin=0;u.last.padding=0;u.removes=[];const g=n.structure[n.structure.length-1][1];function k(F){if(l.token[P-2]===F){const $=l.token[P].replace(/\s*!important\s*/g,v).split(" ");const oe=$.length;if(l.token[P].indexOf("!important")>-1)u.data[F[4]]=true;if(oe>3){if(u.data[F][0]===v)u.data[F][0]=$[0];if(u.data[F][1]===v)u.data[F][1]=$[1];if(u.data[F][2]===v)u.data[F][2]=$[2];if(u.data[F][3]===v)u.data[F][3]=$[3]}else if(oe>2){if(u.data[F][0]===v)u.data[F][0]=$[0];if(u.data[F][1]===v)u.data[F][1]=$[1];if(u.data[F][2]===v)u.data[F][2]=$[2];if(u.data[F][3]===v)u.data[F][3]=$[1]}else if(oe>1){if(u.data[F][0]===v)u.data[F][0]=$[0];if(u.data[F][1]===v)u.data[F][1]=$[1];if(u.data[F][2]===v)u.data[F][2]=$[0];if(u.data[F][3]===v)u.data[F][3]=$[1]}else{if(u.data[F][0]===v)u.data[F][0]=$[0];if(u.data[F][1]===v)u.data[F][1]=$[0];if(u.data[F][2]===v)u.data[F][2]=$[0];if(u.data[F][3]===v)u.data[F][3]=$[0]}}else if(l.token[P-2]===`${F}-bottom`){if(u.data[F][2]===v)u.data[F][2]=l.token[P]}else if(l.token[P-2]===`${F}-left`){if(u.data[F][3]===v)u.data[F][3]=l.token[P]}else if(l.token[P-2]===`${F}-right`){if(u.data[F][1]===v)u.data[F][1]=l.token[P]}else if(l.token[P-2]===`${F}-top`){if(u.data[F][0]===v)u.data[F][0]=l.token[P]}else{return}u.removes.push([P,F]);u.last[F]=P}function O(){let F=0;let $=v;const oe=/^(0+([a-z]+|%))/;const X=u.removes.length;const Q=u.data.margin[0]!==v&&u.data.margin[1]!==v&&u.data.margin[2]!==v&&u.data.margin[3]!==v;const Z=u.data.padding[0]!==v&&u.data.padding[1]!==v&&u.data.padding[2]!==v&&u.data.padding[3]!==v;function le(V){if(oe.test(u.data[V][0])===true)u.data[V][0]="0";if(oe.test(u.data[V][1])===true)u.data[V][1]="0";if(oe.test(u.data[V][2])===true)u.data[V][2]="0";if(oe.test(u.data[V][3])===true)u.data[V][3]="0";if(u.data[V][0]===u.data[V][1]&&u.data[V][0]===u.data[V][2]&&u.data[V][0]===u.data[V][3]){$=u.data[V][0]}else if(u.data[V][0]===u.data[V][2]&&u.data[V][1]===u.data[V][3]&&u.data[V][0]!==u.data[V][1]){$=`${u.data[V][0]} ${u.data[V][1]}`}else if(u.data[V][1]===u.data[V][3]&&u.data[V][0]!==u.data[V][2]){$=`${u.data[V][0]} ${u.data[V][1]} ${u.data[V][2]}`}else{$=`${u.data[V][0]} ${u.data[V][1]} ${u.data[V][2]} ${u.data[V][3]}`}if(u.data[V[4]]===true)$=`${$.replace(" !important",v)} !important`;if(u.last[V]>n.count){F=g<1?1:g+1;do{if(l.begin[F]===g&&l.types[F]==="value"&&l.token[F-2].indexOf(V)===0){u.last[V]=F;break}F=F+1}while(F<n.count)}l.token[u.last[V]]=$;l.token[u.last[V]-2]=V}if(X>1&&(Q===true||Z===true)){do{if(u.removes[F][0]!==u.last.margin&&u.removes[F][0]!==u.last.padding&&(Q===true&&u.removes[F][1]==="margin"||Z===true&&u.removes[F][1]==="padding")){n.splice({data:l,howmany:l.types[u.removes[F][0]+1]==="separator"?4:3,index:u.removes[F][0]-2})}F=F+1}while(F<X-1)}if(Q===true)le("margin");if(Z===true)le("padding");if(_===true){if(g<0){n.error="Brace mismatch. There appears to be more closing braces than starting braces."}else{n.sortCorrection(g,n.count+1)}}}let P=n.count;let _=false;do{P=P-1;if(l.begin[P]===g){if(l.types[P]==="value"&&l.types[P-2]==="property"){if(l.token[P-2].indexOf("margin")===0){k("margin")}else if(l.token[P-2].indexOf("padding")===0){k("padding")}}}else{_=true;P=l.begin[P]}}while(P>g);O();n.linesSpace=R}do{if(ce(m[t])){t=n.spacer({array:m,end:I,index:t})}else if(c(m[t],47)&&c(m[t+1],42)){p(false)}else if(c(m[t],47)&&c(m[t+1],47)){p(true)}else if(c(m[t],123)&&c(m[t+1],37)){z("{%","%}")}else if(c(m[t],123)&&c(m[t+1],123)){z("{{","}}")}else if(c(m[t],123)||c(m[t],40)&&c(l.token[n.count],58)&&l.types[n.count-1]==="variable"){x("start");i="start";r=m[t];if(c(m[t],40)){q("map");L.push(0)}else if(l.types[n.count]==="selector"||l.types[n.count]==="variable"){q(l.token[n.count])}else if(l.types[n.count]==="colon"){q(l.token[n.count-1])}else{q("block")}j.push(false)}else if(c(m[t],125)||m[t]===")"&&n.structure[n.structure.length-1][0]==="map"&&L[L.length-1]===0){if(c(m[t],125)&&c(l.token[n.count-1],123)&&l.types[n.count]==="item"&&l.token[n.count-2]!==void 0&&l.token[n.count-2].charAt(l.token[n.count-2].length-1)==="@"){l.token[n.count-2]=l.token[n.count-2]+"{"+l.token[n.count]+"}";n.pop(l);n.pop(l);n.structure.pop()}else{if(c(m[t],41))L.pop();x("end");if(c(m[t],125)&&ne(l.token[n.count],59)){if(l.types[n.count]==="value"||l.types[n.count]==="function"||l.types[n.count]==="variable"&&(c(l.token[n.count-1],58)||c(l.token[n.count-1],59))){if(e.correct===true){r=";"}else{r="x;"}i="separator";q(v)}else if(l.types[n.count]==="comment"){d()}}j.pop();r=m[t];i="end";if(c(m[t],125))G();if(e.sortProperties===true&&c(m[t],125))n.objectSort(l);q(v)}}else if(c(m[t],59)||c(m[t],44)){if(l.types[n.count-1]==="selector"||l.types[n.count]!=="function"&&c(l.token[n.count-1],125)){x("start")}else{x("separator")}if(l.types[n.count]!=="separator"&&W(t)===true){r=m[t];i="separator";q(v)}}else if(c(m[t],58)&&l.types[n.count]!=="end"){if(c(m[t+1],58)){t=t+1;x("pseudo");r="::";i="pseudo";q(v)}else{x("colon");r=":";i="colon";q(v)}}else{if(n.structure[n.structure.length-1][0]==="map"&&c(m[t],40)){L[L.length-1]=L[L.length-1]+1}C()}t=t+1}while(t<I);if(e.sortProperties===true)n.objectSort(l);return l};H.lexers.script=function o(a){const{options:f}=H;if(f.language==="json")f.script.quoteConvert="double";let e=0;let l="";let m="";let I=[];let L=0;let j=-1;let t=-1;let i=[];let r;let q;let W;const{data:s}=n;const{references:C}=n;const x=a.length;const d=a.split("");const z=[];const p=[];const G=[];const R=[0,""];const u=[false];const g=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];const k=je(null);k.count=[];k.index=[];k.len=-1;k.word=[];function O(h){let b=0;const S=V(1,false);const E=n.structure.length===0?"":n.structure[n.structure.length-1][0];const w=je(null);w.begin=s.begin[n.count];w.ender=s.begin[n.count];w.lexer=s.lexer[n.count];w.lines=s.lines[n.count];w.stack=s.stack[n.count];w.token=s.token[n.count];w.types=s.types[n.count];if(/^(\/(\/|\*)\s*@prettify-ignore-start)/.test(l))return;if(m==="start"||m==="type_start")return;if(f.language==="json")return;if(c(w.token,59)||c(w.token,44)||w.stack==="class"||w.stack==="map"||w.stack==="attribute"||s.types[w.begin-1]==="generic"||S==="{"||E==="initializer"){return}if(c(w.token,125)&&s.stack[w.begin-1]==="global"&&s.types[w.begin-1]!=="operator"&&w.stack===s.stack[n.count-1]){return}if(w.stack==="array"&&w.token!=="]")return;if(s.token[s.begin[n.count]]==="{"&&w.stack==="data_type")return;if(w.types!==void 0&&w.types.indexOf("template")>-1&&w.types.indexOf("template_string")<0){return}if(c(S,59)&&h===false)return;if(s.lexer[n.count-1]!=="script"&&(e<x&&x===H.source.length-1||x<H.source.length-1)){return}if(c(w.token,125)&&(w.stack==="function"||w.stack==="if"||w.stack==="else"||w.stack==="for"||w.stack==="do"||w.stack==="while"||w.stack==="switch"||w.stack==="class"||w.stack==="try"||w.stack==="catch"||w.stack==="finally"||w.stack==="block")){if(w.stack==="function"&&(s.stack[w.begin-1]==="data_type"||s.types[w.begin-1]==="type")){b=w.begin;do{b=b-1}while(b>0&&s.token[b]!==")"&&s.stack[b]!=="arguments");b=s.begin[b]}else{b=s.begin[w.begin-1]}if(c(s.token[b],40)){b=b-1;if(s.token[b-1]==="function")b=b-1;if(s.stack[b-1]==="object"||s.stack[b-1]==="switch")return;if(s.token[b-1]!=="="&&s.token[b-1]!=="return"&&s.token[b-1]!==":"){return}}else{return}}if(w.types==="comment"||E==="method"||E==="paren"||E==="expression"||E==="array"||E==="object"||E==="switch"&&w.stack!=="method"&&s.token[s.begin[n.count]]==="("&&s.token[s.begin[n.count]-1]!=="return"&&s.types[s.begin[n.count]-1]!=="operator"){return}if(s.stack[n.count]==="expression"&&(s.token[s.begin[n.count]-1]!=="while"||s.token[s.begin[n.count]-1]==="while"&&s.stack[s.begin[n.count]-2]!=="do")){return}if(S!==""&&"=<>+*?|^:&%~,.()]".indexOf(S)>-1&&h===false)return;if(w.types==="comment"){b=n.count;do{b=b-1}while(b>0&&s.types[b]==="comment");if(b<1)return;w.token=s.token[b];w.types=s.types[b];w.stack=s.stack[b]}if(w.token===void 0||w.types==="start"||w.types==="separator"||w.types==="operator"&&w.token!=="++"&&w.token!=="--"||w.token==="x}"||w.token==="var"||w.token==="let"||w.token==="const"||w.token==="else"||w.token.indexOf("#!/")===0||w.token==="instanceof"){return}if(w.stack==="method"&&(s.token[w.begin-1]==="function"||s.token[w.begin-2]==="function")){return}if(f.script.variableList==="list")k.index[k.len]=n.count;l=f.script.correct===true?";":"x;";m="separator";b=n.linesSpace;n.linesSpace=0;B("");n.linesSpace=b;$()}function P(){let h=n.count;do{h=h-1}while(h>-1&&s.token[h]==="x}");if(s.stack[h]==="else")return B("");h=h+1;n.splice({data:s,howmany:0,index:h,record:{begin:s.begin[h],ender:-1,lexer:"script",lines:n.linesSpace,stack:s.stack[h],token:l,types:m}});B("")}function _(){let h=n.count;if(s.types[h]==="comment"){do{h=h-1}while(h>0&&s.types[h]==="comment")}if(s.token[h]==="from")h=h-2;if(s.token[h]==="x;"){n.splice({data:s,howmany:1,index:h})}}function F(){O(false);if(j>-1)y();W=n.wrapCommentBlock({chars:d,end:x,lexer:"script",opening:"/*",start:e,terminator:"*/"});e=W[1];if(s.token[n.count]==="var"||s.token[n.count]==="let"||s.token[n.count]==="const"){r=n.pop(s);B("");n.push(s,r,"");if(s.lines[n.count-2]===0)s.lines[n.count-2]=s.lines[n.count];s.lines[n.count]=0}else if(W[0]!==""){l=W[0];m=/^\/\*\s*@ignore\s*\bstart\b/.test(l)?"ignore":"comment";if(l.indexOf("# sourceMappingURL=")===2){R[0]=n.count+1;R[1]=l}n.push(s,{begin:n.structure[n.structure.length-1][1],ender:-1,lexer:"script",lines:n.linesSpace,stack:n.structure[n.structure.length-1][0],token:l,types:m},"")}if(/\/\*\s*global\s+/.test(s.token[n.count])===true&&s.types.indexOf("word")<0){C[0]=s.token[n.count].replace(/\/\*\s*global\s+/,"").replace("*/","").replace(/,\s+/g,",").split(",")}}function $(){let h="";const b=V(5,false);const S=n.count;const E=n.linesSpace;if(f.language==="json"||p.length<1||p[p.length-1].charAt(0)!=="x"||/^x?(;|\}|\))$/.test(l)===false){return}if(s.stack[n.count]==="do"&&b==="while"&&s.token[n.count]==="}"){return}if(l===";"&&s.token[S-1]==="x{"){h=s.token[s.begin[S-2]-1];if(s.token[S-2]==="do"||s.token[S-2]===")"&&"ifforwhilecatch".indexOf(h)>-1){r=n.pop(s);l=f.script.correct===true?"}":"x}";m="end";q=n.structure[n.structure.length-1];B("");p.pop();n.linesSpace=E;return}r=n.pop(s);l=f.script.correct===true?"}":"x}";m="end";q=n.structure[n.structure.length-1];B("");p.pop();l=";";m="end";n.push(s,r,"");n.linesSpace=E;return}l=f.script.correct===true?"}":"x}";m="end";if(s.token[n.count]==="x}")return;if(s.stack[n.count]==="if"&&(s.token[n.count]===";"||s.token[n.count]==="x;")&&b==="else"){q=n.structure[n.structure.length-1];B("");p.pop();n.linesSpace=E;return}do{q=n.structure[n.structure.length-1];B("");p.pop();if(s.stack[n.count]==="do")break}while(p[p.length-1]==="x{");n.linesSpace=E}function oe(){let h=n.count;if(s.stack[h]==="object"&&f.script.objectSort===true){l=",";m="separator";_();B("")}else{do{h=h-1}while(h>0&&s.types[h-1]==="comment");n.splice({data:s,howmany:0,index:h,record:{begin:s.begin[h],ender:-1,lexer:"script",lines:n.linesSpace,stack:s.stack[h],token:",",types:"separator"}});B("")}}function X(h){let b=false;let S=false;const E=V(1,false);const w=s.token[n.count]==="("?n.count:s.begin[n.count];function T(){let M=0;const K=s.token[w-1]==="Array";const ee=K===true?"[":"{";const J=K===true?"]":"}";const fe=K===true?"array":"object";if(K===true&&s.types[n.count]==="number"){M=Number(s.token[n.count]);r=n.pop(s)}r=n.pop(s);r=n.pop(s);r=n.pop(s);n.structure.pop();l=ee;m="start";B(fe);if(M>0){l=",";m="separator";do{B("");M=M-1}while(M>0)}l=J;m="end";B("")}if(j>-1)y();if(G.length>0){if(G[G.length-1]===0){G.pop()}else{G[G.length-1]=G[G.length-1]-1}}if(c(h,41)||h==="x)"||c(h,93)){if(f.script.correct===true)ie();_()}if(c(h,41)||h==="x)")O(false);if(k.len>-1){if(c(h,125)&&(f.script.variableList==="list"&&k.count[k.len]===0||s.token[n.count]==="x;"&&f.script.variableList==="each")){N()}k.count[k.len]=k.count[k.len]-1;if(k.count[k.len]<0)N()}if(c(l,44)&&s.stack[n.count]!=="initializer"&&(c(h,93)&&c(s.token[n.count-1],91)||c(h,125))){r=n.pop(s)}if(c(h,41)||h==="x)"){l=h;if(z.length>0){I=z[z.length-1];if(I.length>1&&ne(E,123)&&(I[0]==="if"||I[0]==="for"||I[0]==="with"||I[0]==="while"&&s.stack[I[1]-2]!==void 0&&s.stack[I[1]-2]!=="do")){b=true}}}else if(c(h,93)){l="]"}else if(c(h,125)){if(ne(l,44)&&f.script.correct===true)ie();if(n.structure.length>0&&n.structure[n.structure.length-1][0]!=="object")O(true);if((f.script.objectSort===true||f.language==="json"&&f.json.objectSort===true)&&n.structure[n.structure.length-1][0]==="object"){n.objectSort(s)}if(m==="comment"){l=s.token[n.count];m=s.types[n.count]}l="}"}if(n.structure[n.structure.length-1][0]==="data_type"){m="type_end"}else{m="end"}z.pop();q=n.structure[n.structure.length-1];if(c(h,41)&&f.script.correct===true&&w-n.count<2&&(c(s.token[n.count],40)||s.types[n.count]==="number")&&(s.token[w-1]==="Array"||s.token[w-1]==="Object")&&s.token[w-2]==="new"){T();S=true}if(p[p.length-1]==="x{"&&c(h,125)){$();p.pop();if(s.stack[n.count]!=="try"){if(ne(E,58)&&ne(E,59)&&s.token[s.begin[e]-1]!=="?")$()}l="}"}else{p.pop()}if(f.script.endComma!==void 0&&f.script.endComma!=="none"&&n.structure[n.structure.length-1][0]==="array"||n.structure[n.structure.length-1][0]==="object"||n.structure[n.structure.length-1][0]==="data_type"){if(f.script.endComma==="always"&&s.token[n.count]!==","){const M=n.structure[n.structure.length-1][1];let K=n.count;do{if(s.begin[K]===M){if(c(s.token[K],44))break}else{K=s.begin[K]}K=K-1}while(K>M);if(K>M){const ee=m;const J=l;l=",";m="separator";B("");l=J;m=ee}}else if(f.script.endComma==="never"&&c(s.token[n.count],44)){n.pop(s)}}if(S===false){B("");if(l==="}"&&s.stack[n.count]!=="object"&&s.stack[n.count]!=="class"&&s.stack[n.count]!=="data_type"){C.pop();$()}}if(b===true){l=f.script.correct===true?"{":"x{";m="start";B(I[0]);p.push("x{");I[1]=n.count}u.pop();if(n.structure[n.structure.length-1][0]!=="data_type")u[u.length-1]=false}function Q(h,b,S){let E=0;let w=false;let T=false;let M=[h];let K;const ee=b.split(v);const J=ee.length;const fe=e;const se=e+h.length;const ue=f.script.quoteConvert===void 0?"none":f.script.quoteConvert;function me(){let ge=0;M=[];m=S;E=e;if(S==="string"&&/\s/.test(d[E+1])===true){ge=1;do{E=E+1;if(d[E]==="\n")ge=ge+1}while(E<x&&/\s/.test(d[E+1])===true);n.linesSpace=ge}}function re(){let ge=v;function qe(he){if(f.language!=="javascript"&&f.language!=="typescript"&&f.language!=="jsx"&&f.language!=="tsx"){const be=de=>de.replace(/\s*$/," ");const Oe=de=>de.replace(/^\s*/," ");if(/\{(#|\/|(%>)|(%\]))/.test(he)||/\}%(>|\])/.test(he))return he;he=he.replace(/\{((\{+)|%-?)\s*/g,be);he=he.replace(/\s*((\}\}+)|(-?%\}))/g,Oe);return he}return he}if(c(h,34)&&ue==="single"){M[0]="'";M[M.length-1]="'"}else if(c(h,39)&&ue==="double"){M[0]='"';M[M.length-1]='"'}else if(w===true){ge=M[M.length-1];M.pop();M.pop();M.push(ge)}e=E;if(b==="\n"){e=e-1;M.pop()}l=M.join(v);if(c(h,34)||c(h,39)||h==="{{"||h==="{%"){l=qe(l)}if(h==="{%"||h==="{{"){K=A(l);m=K[0];B(K[1]);return}if(S==="string"){m="string";if(f.language==="json"){l=l.replace(/\u0000/g,"\\u0000").replace(/\u0001/g,"\\u0001").replace(/\u0002/g,"\\u0002").replace(/\u0003/g,"\\u0003").replace(/\u0004/g,"\\u0004").replace(/\u0005/g,"\\u0005").replace(/\u0006/g,"\\u0006").replace(/\u0007/g,"\\u0007").replace(/\u0008/g,"\\u0008").replace(/\u0009/g,"\\u0009").replace(/\u000a/g,"\\u000a").replace(/\u000b/g,"\\u000b").replace(/\u000c/g,"\\u000c").replace(/\u000d/g,"\\u000d").replace(/\u000e/g,"\\u000e").replace(/\u000f/g,"\\u000f").replace(/\u0010/g,"\\u0010").replace(/\u0011/g,"\\u0011").replace(/\u0012/g,"\\u0012").replace(/\u0013/g,"\\u0013").replace(/\u0014/g,"\\u0014").replace(/\u0015/g,"\\u0015").replace(/\u0016/g,"\\u0016").replace(/\u0017/g,"\\u0017").replace(/\u0018/g,"\\u0018").replace(/\u0019/g,"\\u0019").replace(/\u001a/g,"\\u001a").replace(/\u001b/g,"\\u001b").replace(/\u001c/g,"\\u001c").replace(/\u001d/g,"\\u001d").replace(/\u001e/g,"\\u001e").replace(/\u001f/g,"\\u001f")}else if(h.indexOf("#!")===0){l=l.slice(0,l.length-1);n.linesSpace=2}else if(n.structure[n.structure.length-1][0]!=="object"||n.structure[n.structure.length-1][0]==="object"&&V(1,false)!==":"&&ne(s.token[n.count],44)&&ne(s.token[n.count],123)){if(l.length>f.wrap&&f.wrap>0||f.wrap!==0&&s.token[n.count]==="+"&&(s.token[n.count-1].charAt(0)==='"'||s.token[n.count-1].charAt(0)==="'")){let he=l;let be="";let Oe=ue==="double"?'"':ue==="single"?"'":he.charAt(0);const de=f.wrap;const We=/u[0-9a-fA-F]{4}/;const Xe=/x[0-9a-fA-F]{2}/;he=he.slice(1,he.length-1);if(s.token[n.count]==="+"&&(s.token[n.count-1].charAt(0)==='"'||s.token[n.count-1].charAt(0)==="'")){n.pop(s);Oe=s.token[n.count].charAt(0);he=s.token[n.count].slice(1,s.token[n.count].length-1)+he;n.pop(s)}if(he.length>de&&de>0){do{be=he.slice(0,de);if(be.charAt(de-5)==="\\"&&We.test(he.slice(de-4,de+1))){be=be.slice(0,de-5)}else if(be.charAt(de-4)==="\\"&&We.test(he.slice(de-3,de+2))){be=be.slice(0,de-4)}else if(be.charAt(de-3)==="\\"&&(We.test(he.slice(de-2,de+3))||Xe.test(he.slice(de-2,de+1)))){be=be.slice(0,de-3)}else if(be.charAt(de-2)==="\\"&&(We.test(he.slice(de-1,de+4))||Xe.test(he.slice(de-1,de+2)))){be=be.slice(0,de-2)}else if(be.charAt(de-1)==="\\"){be=be.slice(0,de-1)}be=Oe+be+Oe;he=he.slice(be.length-2);l=be;m="string";B(v);n.linesSpace=0;l="+";m="operator";B(v)}while(he.length>de)}if(he===v){l=Oe+Oe}else{l=Oe+he+Oe}m="string"}}}else if(/\{\s*\?>$/.test(l)){m="template_start"}else{m=S}if(l.length>0)B(v)}if(j>-1)y();if(d[e-1]==="\\"&&te(e-1)===true&&(d[e]==='"'||d[e]==="'")){n.pop(s);if(s.token[0]==="{"){if(d[e]==='"'){h='"';b='\\"';M=['"']}else{h="'";b="\\'";M=["'"]}w=true}else{if(d[e]==='"'){M=['\\"'];re();return}M=["\\'"];re();return}}E=se;if(E<x){do{if(ne(s.token[0],123)&&ne(s.token[0],91)&&ue!=="none"&&(c(d[E],34)||c(d[E],39))){if(d[E-1]==="\\"){if(te(E-1)===true){if(ue==="double"&&d[E]==="'"){M.pop()}else if(ue==="single"&&d[E]==='"'){M.pop()}}}else if(ue==="double"&&d[E]==='"'&&d[e]==="'"){d[E]='\\"'}else if(ue==="single"&&d[E]==="'"&&d[e]==='"'){d[E]="\\'"}M.push(d[E])}else if(E>fe){T=true;if(c(d[E],123)&&c(d[E+1],37)&&d[E+2]!==h){re();Q("{%","%}","template");me()}else if(c(d[E],123)&&c(d[E+1],123)&&d[E+2]!==h){re();Q("{{","}}","template");me()}else{T=false;M.push(d[E])}}else{M.push(d[E])}if((c(h,34)||c(h,39))&&(T===true||E>fe)&&f.language!=="json"&&f.language!=="javascript"&&d[E-1]!=="\\"&&ne(d[E],34)&&ne(d[E],39)&&(c(d[E],10)||E===x-1===true)){n.error="Unterminated string in script on line number "+n.lineNumber;break}if(d[E]===ee[J-1]&&(d[E-1]!=="\\"||te(E-1)===false)){if(J===1)break;if(M[E-se]===ee[0]&&M.slice(E-se-J+2).join("")===b)break}E=E+1}while(E<x)}re()}function Z(){O(false);$();if(j>-1)y();W=n.wrapCommentLine({chars:d,end:x,lexer:"script",opening:"//",start:e,terminator:"\n"});e=W[1];if(W[0]!==""){l=W[0];m=/^(\/\/\s*@prettify-ignore-start)/.test(l)?"ignore":"comment";if(l.indexOf("# sourceMappingURL=")===2){R[0]=n.count+1;R[1]=l}n.push(s,{begin:n.structure[n.structure.length-1][1],ender:-1,lexer:"script",lines:n.linesSpace,stack:n.structure[n.structure.length-1][0],token:l,types:m},"")}}function le(){let h=0;let b=false;let S=false;let E=0;let w=0;let T=0;let M="";let K="";let ee="";const J=[];const fe=u[u.length-1];const se="0123456789=<>+-*?|^:&.,;%(){}[]~";function ue(){if(l==="(")n.structure[n.structure.length-1]=["paren",n.count];H.lexers.markup(J.join(""))}if(j>-1)y();K=n.count>0?s.token[n.count-1]:"";ee=n.count>0?s.types[n.count-1]:"";M=V(1,false);if(f.language!=="jsx"&&f.language!=="tsx"&&/\d/.test(M)===false&&(l==="function"||K==="=>"||K==="void"||K==="."||s.stack[n.count]==="arguments"||m==="type"&&K==="type"||m==="reference"&&(ee==="operator"||K==="function"||K==="class"||K==="new")||m==="type"&&ee==="operator"||l==="return"||m==="operator")){const me=[];let re=0;let ge=0;h=e;do{me.push(d[h]);if(d[h]==="<"){re=re+1}else if(d[h]===">"){re=re-1;if(re<1)break}h=h+1}while(h<x);ge=e;e=h;M=V(1,false);if(d[h]===">"&&(fe===true||K==="=>"||K==="."||ee!=="operator"||ee==="operator"&&(M==="("||M==="="))){m="generic";l=me.join("").replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", ");B("");return}e=ge}h=n.count;if(s.types[h]==="comment"){do{h=h-1}while(h>0&&s.types[h]==="comment")}if(fe===false&&V(1,false)!==">"&&(d[e]!=="<"&&se.indexOf(d[e+1])>-1||s.token[h]==="++"||s.token[h]==="--"||/\s/.test(d[e+1])===true||/\d/.test(d[e+1])===true&&(m==="operator"||m==="string"||m==="number"||m==="reference"||m==="word"&&l!=="return"))){m="operator";l=D();return B("")}if(f.language!=="typescript"&&(s.token[h]==="return"||s.types[h]==="operator"||s.types[h]==="start"||s.types[h]==="separator"||s.types[h]==="jsx_attribute_start"||s.token[h]==="}"&&n.structure[n.structure.length-1][0]==="global")){m="markup";f.language="jsx";do{J.push(d[e]);if(d[e]==="{"){w=w+1;b=true}else if(d[e]==="}"){w=w-1;if(w===0)b=false}else if(d[e]==="<"&&b===false){if(d[e+1]==="<"){do{J.push(d[e]);e=e+1}while(e<x&&d[e+1]==="<")}E=E+1;if(V(1,false)==="/")S=true}else if(d[e]===">"&&b===false){if(d[e+1]===">"){do{J.push(d[e]);e=e+1}while(d[e+1]===">")}E=E-1;if(S===true){T=T-1}else if(d[e-1]!=="/"){T=T+1}if(E===0&&w===0&&T<1){M=V(2,false);if(M.charAt(0)!=="<")return ue();if(M.charAt(0)==="<"&&se.indexOf(M.charAt(1))<0&&/\s/.test(M.charAt(1))===false){h=e+1;do{h=h+1;if(d[h]===">"||/\s/.test(d[h-1])&&se.indexOf(d[h])<0)break;if(se.indexOf(d[h])>-1)return ue()}while(h<x)}else{return ue()}}S=false}e=e+1}while(e<x);return ue()}m="operator";l=D();B("")}function V(h,b){let S=b===true?e:e+1;let E="";if(typeof h!=="number"||h<1)h=1;if(d[e]==="/"){if(d[e+1]==="/"){E="\n"}else if(d[e+1]==="*"){E="/"}}if(S<x){do{if(/\s/.test(d[S])===false){if(d[S]==="/"){if(E===""){if(d[S+1]==="/"){E="\n"}else if(d[S+1]==="*"){E="/"}}else if(E==="/"&&d[S-1]==="*"){E=""}}if(E===""&&d[S-1]+d[S]!=="*/")return d.slice(S,S+h).join("")}else if(E==="\n"&&d[S]==="\n"){E=""}S=S+1}while(S<x)}return""}function ae(){const h=x;const b=[d[e]];let S=0;let E=/zz/;let w=b[0]===".";if(e<x-2&&d[e]==="0"){if(d[e+1]==="x"){E=/[0-9a-fA-F]/}else if(d[e+1]==="o"){E=/[0-9]/}else if(d[e+1]==="b"){E=/0|1/}if(E.test(d[e+2])===true){b.push(d[e+1]);S=e+1;do{S=S+1;b.push(d[S])}while(E.test(d[S+1])===true);e=S;return b.join("")}}S=e+1;if(S<h){do{if(/[0-9]/.test(d[S])||d[S]==="."&&w===false){b.push(d[S]);if(d[S]===".")w=true}else{break}S=S+1}while(S<h)}if(S<h-1&&(/\d/.test(d[S-1])===true||/\d/.test(d[S-2])===true&&(d[S-1]==="-"||d[S-1]==="+"))&&(d[S]==="e"||d[S]==="E")){b.push(d[S]);if(d[S+1]==="-"||d[S+1]==="+"){b.push(d[S+1]);S=S+1}w=false;S=S+1;if(S<h){do{if(/[0-9]/.test(d[S])||d[S]==="."&&w===false){b.push(d[S]);if(d[S]===".")w=true}else{break}S=S+1}while(S<h)}}e=S-1;return b.join("")}function D(){let h=0;let b=0;let S=x;let E="";const w=["=","<",">","+","*","?","|","^",":","&","%","~"];const T=w.length;if(j>-1)y();if(d[e]==="/"&&(n.count>-1&&(m!=="word"&&m!=="reference"||l==="typeof"||l==="return"||l==="else")&&m!=="number"&&m!=="string"&&m!=="end")){if(l==="return"||l==="typeof"||l==="else"||m!=="word"){l=ye();m="regex"}else{l="/";m="operator"}B("");return"regex"}if(d[e]==="?"&&("+-*/.?".indexOf(d[e+1])>-1||d[e+1]===":"&&w.join("").indexOf(d[e+2])<0)){if(d[e+1]==="."&&/\d/.test(d[e+2])===false){E="?."}else if(d[e+1]==="?"){E="??"}if(E==="")return"?"}if(d[e]===":"&&"+-*/".indexOf(d[e+1])>-1)return":";if(e<x-1){if(d[e]!=="<"&&d[e+1]==="<")return d[e];if(d[e]==="!"&&d[e+1]==="/")return"!";if(d[e]==="-"){u[u.length-1]=false;if(d[e+1]==="-"){E="--"}else if(d[e+1]==="="){E="-="}else if(d[e+1]===">"){E="->"}if(E==="")return"-"}if(d[e]==="+"){u[u.length-1]=false;if(d[e+1]==="+"){E="++"}else if(d[e+1]==="="){E="+="}if(E==="")return"+"}if(d[e]==="="&&d[e+1]!=="="&&d[e+1]!=="!"&&d[e+1]!==">"){u[u.length-1]=false;return"="}}if(d[e]===":"){if(f.language==="typescript"){if(s.stack[n.count]==="arguments"){if(s.token[n.count]==="?"){n.pop(s);E="?:";e=e-1}u[u.length-1]=true}else if(l===")"&&(s.token[s.begin[n.count]-1]==="function"||s.token[s.begin[n.count]-2]==="function")){u[u.length-1]=true}else if(m==="reference"){h=n.count;let M=false;do{if(s.begin[h]===s.begin[n.count]){if(h<n.count&&s.token[h]===":"&&s.types[h+1]!=="type")M=true;if(s.token[h]==="?"&&M===false)break;if(s.token[h]===";"||s.token[h]==="x;")break;if(s.token[h]==="var"||s.token[h]==="let"||s.token[h]==="const"||s.types[h]==="type"){u[u.length-1]=true;break}}else{if(s.types[h]==="type_end"){u[u.length-1]=true;break}h=s.begin[h]}h=h-1}while(h>s.begin[n.count])}}else if(s.token[n.count-1]==="["&&(s.types[n.count]==="word"||s.types[n.count]==="reference")){n.structure[n.structure.length-1][0]="attribute";s.stack[n.count]="attribute"}}if(E===""){if(d[e+1]==="+"&&d[e+2]==="+"||d[e+1]==="-"&&d[e+2]==="-"){E=d[e]}else{const M=[d[e]];h=e+1;if(h<S){do{if(d[h]==="+"&&d[h+1]==="+"||d[h]==="-"&&d[h+1]==="-")break;b=0;if(b<T){do{if(d[h]===w[b]){M.push(w[b]);break}b=b+1}while(b<T)}if(b===T)break;h=h+1}while(h<S)}E=M.join("")}}e=e+(E.length-1);if(E==="=>"&&l===")"){h=n.count;S=s.begin[h];do{if(s.begin[h]===S)s.stack[h]="method";h=h-1}while(h>S-1)}return E}function ie(){let h=true;let b="+";let S="";let E="";let w="";let T=0;let M=0;let K=0;let ee="";const J=[];function fe(){K=s.begin[K]-1;if(s.types[K]==="end"){fe()}else if(s.token[K-1]==="."){se()}}function se(){K=K-2;if(s.types[K]==="end"){fe()}else if(s.token[K-1]==="."){se()}}function ue(){let re=0;const ge=J.length;if(re<ge){do{n.push(s,J[re],"");re=re+1}while(re<ge)}}function me(re){const ge=je(null);ge.begin=s.begin[re];ge.ender=s.ender[re];ge.lexer=s.lexer[re];ge.lines=s.lines[re];ge.stack=s.stack[re];ge.token=s.token[re];ge.types=s.types[re];return ge}S=s.token[n.count];E=s.token[n.count-1];w=s.token[n.count-2];if(S!=="++"&&S!=="--"&&E!=="++"&&E!=="--"){K=n.count;if(s.types[K]==="end"){fe()}else if(s.token[K-1]==="."){se()}}if(s.token[K-1]==="++"||s.token[K-1]==="--"){if("startendoperator".indexOf(s.types[K-2])>-1)return;T=K;if(T<n.count+1){do{J.push(me(T));T=T+1}while(T<n.count+1);n.splice({data:s,howmany:n.count-K,index:K})}}else{if(f.script.correct===false||S!=="++"&&S!=="--"&&E!=="++"&&E!=="--"){return}ee=V(1,false);if((S==="++"||S==="--")&&(d[e]===";"||ee===";"||d[e]==="}"||ee==="}"||d[e]===")"||ee===")")){b=s.stack[n.count];if(b==="array"||b==="method"||b==="object"||b==="paren"||b==="notation"||s.token[s.begin[n.count]-1]==="while"&&b!=="while"){return}T=n.count;do{T=T-1;if(s.token[T]==="return")return;if(s.types[T]==="end"){do{T=s.begin[T]-1}while(s.types[T]==="end"&&T>0)}}while(T>0&&(s.token[T]==="."||s.types[T]==="word"||s.types[T]==="reference"||s.types[T]==="end"));if(s.token[T]===","&&d[e]!==";"&&ee!==";"&&d[e]!=="}"&&ee!=="}"&&d[e]!==")"&&ee!==")"){return}if(s.types[T]==="operator"){if(s.stack[T]==="switch"&&s.token[T]===":"){do{T=T-1;if(s.types[T]==="start"){M=M-1;if(M<0)break}else if(s.types[T]==="end"){M=M+1}if(s.token[T]==="?"&&M===0)return}while(T>0)}else{return}}h=false;b=S==="--"?"-":"+"}else if(w==="["||w===";"||w==="x;"||w==="}"||w==="{"||w==="("||w===")"||w===","||w==="return"){if(S==="++"||S==="--"){if(w==="["||w==="("||w===","||w==="return")return;if(S==="--")b="-";h=false}else if(E==="--"||S==="--"){b="-"}}else{return}if(h===false)r=n.pop(s);K=n.count;if(s.types[K]==="end"){fe()}else if(s.token[K-1]==="."){se()}T=K;if(T<n.count+1){do{J.push(me(T));T=T+1}while(T<n.count+1)}}if(h===true){n.splice({data:s,howmany:1,index:K-1});l="=";m="operator";B("");ue();l=b;m="operator";B("");l="1";m="number";B("")}else{l="=";m="operator";B("");ue();l=b;m="operator";B("");l="1";m="number";B("")}l=s.token[n.count];m=s.types[n.count];if(ee==="}"&&d[e]!==";")O(false)}function B(h){const b=je(null);b.begin=n.structure[n.structure.length-1][1];b.ender=-1;b.lexer="script";b.lines=n.linesSpace;b.stack=n.structure[n.structure.length-1][0];b.token=l;b.types=m;n.push(s,b,h)}function ye(){let h=e+1;let b=0;let S=0;let E="";let w=false;const T=x;const M=["/"];if(h<T){do{M.push(d[h]);if(d[h-1]!=="\\"||d[h-2]==="\\"){if(d[h]==="["){w=true}if(d[h]==="]"){w=false}}if(d[h]==="/"&&w===false){if(d[h-1]==="\\"){S=0;b=h-1;if(b>0){do{if(d[b]==="\\"){S=S+1}else{break}b=b-1}while(b>0)}if(S%2===0){break}}else{break}}h=h+1}while(h<T)}if(d[h+1]==="g"||d[h+1]==="i"||d[h+1]==="m"||d[h+1]==="y"||d[h+1]==="u"){M.push(d[h+1]);if(d[h+2]!==d[h+1]&&(d[h+2]==="g"||d[h+2]==="i"||d[h+2]==="m"||d[h+2]==="y"||d[h+2]==="u")){M.push(d[h+2]);if(d[h+3]!==d[h+1]&&d[h+3]!==d[h+2]&&(d[h+3]==="g"||d[h+3]==="i"||d[h+3]==="m"||d[h+3]==="y"||d[h+3]==="u")){M.push(d[h+3]);if(d[h+4]!==d[h+1]&&d[h+4]!==d[h+2]&&d[h+4]!==d[h+3]&&(d[h+4]==="g"||d[h+4]==="i"||d[h+4]==="m"||d[h+4]==="y"||d[h+4]==="u")){M.push(d[h+4]);if(d[h+5]!==d[h+1]&&d[h+5]!==d[h+2]&&d[h+5]!==d[h+3]&&d[h+5]!==d[h+4]&&(d[h+5]==="g"||d[h+5]==="i"||d[h+5]==="m"||d[h+5]==="y"||d[h+5]==="u")){M.push(d[h+4]);e=h+5}else{e=h+4}}else{e=h+3}}else{e=h+2}}else{e=h+1}}else{e=h}E=M.join("");return E}function te(h){const b=h;do{h=h-1}while(d[h]==="\\"&&h>0);return(b-h)%2===1}function U(h){let b=n.count;let S="";let E="";let w="";let T=false;p.push(h);if(h==="{"&&(s.types[n.count]==="type"||s.types[n.count]==="type_end"||s.types[n.count]==="generic")){let M=0;if(s.types[n.count]==="type_end")b=s.begin[n.count];M=b;do{b=b-1;if(s.begin[b]!==M&&s.begin[b]!==-1)break;if(s.token[b]===":")break}while(b>s.begin[b]);if(s.token[b]===":"&&s.stack[b-1]==="arguments"){u.push(false);T=true}else{u.push(u[u.length-1])}b=n.count}else if(h==="["&&s.types[n.count]==="type_end"){u.push(true)}else{u.push(u[u.length-1])}if(j>-1){y();b=n.count}if(k.len>-1)k.count[k.len]=k.count[k.len]+1;if(s.token[b-1]==="function"){z.push(["function",b+1])}else{z.push([l,b+1])}l=h;if(u[u.length-1]===true){m="type_start"}else{m="start"}if(h==="("||h==="x("){_()}else if(h==="{"){if(t>-1){if(s.begin[t-1]===s.begin[s.begin[b]-1]||s.token[s.begin[b]]==="x("){t=-1;if(f.script.correct===true){X(")")}else{X("x)")}_();l="{";m="start"}}else if(l===")"){_()}if(m==="comment"&&s.token[b-1]===")"){l=s.token[b];s.token[b]="{";m=s.types[b];s.types[b]="start"}}S=(()=>{let M=n.count;if(s.types[M]==="comment"){do{M=M-1}while(M>0&&s.types[M]==="comment")}return s.token[M]})();E=s.stack[b]===void 0?"":(()=>{let M=n.count;if(s.types[M]==="comment"){do{M=M-1}while(M>0&&s.types[M]==="comment")}return s.token[s.begin[M]-1]})();if(c(l,123)&&(s.types[b]==="word"||s.token[b]==="]")){let M=b;if(s.token[M]==="]"){do{M=s.begin[M]-1}while(s.token[M]==="]")}do{if(s.types[M]==="start"||s.types[M]==="end"||s.types[M]==="operator")break;M=M-1}while(M>0);if(s.token[M]===":"&&s.stack[M-1]==="arguments"){w="function";C.push(i);i=[]}}if(m==="type_start"){w="data_type"}else if(w===""&&(c(l,123)||l==="x{")){if(S==="else"||S==="do"||S==="try"||S==="finally"||S==="switch"){w=S}else if(G[G.length-1]===0&&S!=="return"){G.pop();w="class"}else if(s.token[b-1]==="class"){w="class"}else if(s.token[b]==="]"&&s.token[b-1]==="["){w="array"}else if((s.types[b]==="word"||s.types[b]==="reference")&&(s.types[b-1]==="word"||s.types[b-1]==="reference"||s.token[b-1]==="?"&&(s.types[b-2]==="word"||s.types[b-2]==="reference"))&&s.token[b]!=="in"&&s.token[b-1]!=="export"&&s.token[b-1]!=="import"){w="map"}else if(s.stack[b]==="method"&&s.types[b]==="end"&&(s.types[s.begin[b]-1]==="word"||s.types[s.begin[b]-1]==="reference")&&s.token[s.begin[b]-2]==="new"){w="initializer"}else if(c(l,123)&&(c(S,41)||S==="x)")&&(s.types[s.begin[b]-1]==="word"||s.types[s.begin[b]-1]==="reference"||s.token[s.begin[b]-1]==="]")){if(E==="if"){w="if"}else if(E==="for"){w="for"}else if(E==="while"){w="while"}else if(E==="class"){w="class"}else if(E==="switch"||s.token[s.begin[b]-1]==="switch"){w="switch"}else if(E==="catch"){w="catch"}else{w="function"}}else if(c(l,123)&&(S===";"||S==="x;")){w="block"}else if(c(l,123)&&s.token[b]===":"&&s.stack[b]==="switch"){w="block"}else if(s.token[b-1]==="import"||s.token[b-2]==="import"||s.token[b-1]==="export"||s.token[b-2]==="export"){w="object"}else if(c(S,41)&&(I[0]==="function"||I[0]==="if"||I[0]==="for"||I[0]==="class"||I[0]==="while"||I[0]==="switch"||I[0]==="catch")){w=I[0]}else if(s.stack[b]==="notation"){w="function"}else if((s.types[b]==="number"||s.types[b]==="string"||s.types[b]==="word"||s.types[b]==="reference")&&(s.types[b-1]==="word"||s.types[b-1]==="reference")&&s.token[s.begin[b]-1]!=="for"){w="function"}else if(n.structure.length>0&&s.token[b]!==":"&&n.structure[n.structure.length-1][0]==="object"&&(s.token[s.begin[b]-2]==="{"||s.token[s.begin[b]-2]===",")){w="function"}else if(s.types[I[1]-1]==="markup"&&s.token[I[1]-3]==="function"){w="function"}else if(S==="=>"){w="function"}else if(T===true||s.types[n.count]==="type_end"&&s.stack[s.begin[n.count]-2]==="arguments"){w="function"}else if(c(S,41)&&s.stack[b]==="method"&&(s.types[s.begin[b]-1]==="word"||s.types[s.begin[b]-1]==="property"||s.types[s.begin[b]-1]==="reference")){w="function"}else if(s.types[b]==="word"&&c(l,123)&&s.token[b]!=="return"&&s.token[b]!=="in"&&s.token[b]!=="import"&&s.token[b]!=="const"&&s.token[b]!=="let"&&s.token[b]!==""){w="block"}else if(c(l,123)&&"if|else|for|while|function|class|switch|catch|finally".indexOf(s.stack[b])>-1&&(s.token[b]==="x}"||s.token[b]==="}")){w="block"}else if(s.stack[b]==="arguments"){w="function"}else if(s.types[b]==="generic"){do{b=b-1;if(s.token[b]==="function"||s.stack[b]==="arguments"){w="function";break}if(s.token[b]==="interface"){w="map";break}if(s.token[b]===";"){w="object";break}}while(b>s.begin[n.count])}else{w="object"}if(w!=="object"&&w!=="class"){if(w==="function"){C.push(i);i=[]}else{C.push([])}}}else if(l==="["){w="array"}else if(l==="("||l==="x("){if(S==="function"||s.token[b-1]==="function"||s.token[b-1]==="function*"||s.token[b-2]==="function"){w="arguments"}else if(s.token[b-1]==="."||s.token[s.begin[b]-2]==="."){w="method"}else if(s.types[b]==="generic"){w="method"}else if(s.token[b]==="}"&&s.stack[b]==="function"){w="method"}else if(S==="if"||S==="for"||S==="class"||S==="while"||S==="catch"||S==="finally"||S==="switch"||S==="with"){w="expression"}else if(s.types[b]==="word"||s.types[b]==="property"||s.types[b]==="reference"){w="method"}else{w="paren"}}B(w);if(G.length>0)G[G.length-1]=G[G.length-1]+1}function Y(){const h=[d[e]];e=e+1;if(e<x){do{h.push(d[e]);if(d[e]==="`"&&(d[e-1]!=="\\"||te(e-1)===false))break;if(d[e-1]==="$"&&d[e]==="{"&&(d[e-2]!=="\\"||te(e-2)===false))break;e=e+1}while(e<x)}return h.join("")}function A(h){let b=2;let S=0;let E="";const w=h.slice(0,2);const T=h.length;if(h.charAt(2)==="-")b=b+1;if(/\s/.test(h.charAt(b))===true){do{b=b+1}while(/\s/.test(h.charAt(b))===true&&b<T)}S=b;do{S=S+1}while(/\s/.test(h.charAt(S))===false&&h.charAt(S)!=="("&&S<T);if(S===T)S=h.length-2;E=h.slice(b,S);if(E==="else"||w==="{%"&&(E==="elseif"||E==="when"||E==="elif"||E==="elsif")){return["template_else",`template_${E}`]}if(w==="{{"){if(E==="end")return["template_end",""];if(E==="block"&&/\{%\s*\w/.test(a)===false||E==="define"||E==="form"||E==="if"||E==="unless"||E==="range"||E==="with"){return["template_start",`template_${E}`]}return["template",""]}S=g.length-1;if(S>-1){do{if(E===g[S]&&(E!=="block"||/\{%\s*\w/.test(a)===false)){return["template_start",`template_${E}`]}if(E==="end"+g[S]){return["template_end",""]}S=S-1}while(S>-1)}return["template",""]}function N(){k.count.pop();k.index.pop();k.word.pop();k.len=k.len-1}function y(){let h=j;let b=1;let S="";let E="";let w=l;let T=m;const M=[];function K(){p.push("x{");n.splice({data:s,howmany:1,index:n.count-3})}function ee(J,fe,se){const ue=s.begin[J];let me=0;do{if(s.token[J]===fe&&s.types[J]==="word"){if(se===true){s.types[J]="reference"}else if(s.begin[J]>ue&&s.token[s.begin[J]]==="{"&&s.stack[J]!=="object"&&s.stack[J]!=="class"&&s.stack[J]!=="data_type"){if(s.stack[J]==="function"){s.types[J]="reference"}else{me=s.begin[J];do{if(s.stack[me]==="function"){s.types[J]="reference";break}me=s.begin[me]}while(me>ue)}}}J=J-1}while(J>ue)}do{M.push(d[h]);if(d[h]==="\\"){n.error=`Illegal escape in JavaScript on line number ${n.lineNumber}`}h=h+1}while(h<e);if(l.charAt(0)==="\u201C"){n.error=`Quote looking character (\u201C, \\u201c) used instead of actual quotes on line number ${n.lineNumber}`}else if(l.charAt(0)==="\u201D"){n.error=`Quote looking character (\u201D, \\u201d) used instead of actual quotes on line number ${n.lineNumber}`}S=M.join("");j=-1;if(n.count>0&&S==="function"&&s.token[n.count]==="("&&(s.token[n.count-1]==="{"||s.token[n.count-1]==="x{")){s.types[n.count]="start"}if(n.count>1&&S==="function"&&l==="("&&(s.token[n.count-1]==="}"||s.token[n.count-1]==="x}")){if(s.token[n.count-1]==="}"){h=n.count-2;if(h>-1){do{if(s.types[h]==="end"){b=b+1}else if(s.types[h]==="start"||s.types[h]==="end"){b=b-1}if(b===0)break;h=h-1}while(h>-1)}if(s.token[h]==="{"&&s.token[h-1]===")"){b=1;h=h-2;if(h>-1){do{if(s.types[h]==="end"){b=b+1}else if(s.types[h]==="start"||s.types[h]==="end"){b=b-1}if(b===0)break;h=h-1}while(h>-1)}if(s.token[h-1]!=="function"&&s.token[h-2]!=="function"){s.types[n.count]="start"}}}else{s.types[n.count]="start"}}if(f.script.correct===true&&(S==="Object"||S==="Array")&&d[e+1]==="("&&d[e+2]===")"&&s.token[n.count-1]==="="&&s.token[n.count]==="new"){if(S==="Object"){s.token[n.count]="{";l="}";s.stack[n.count]="object";n.structure[n.structure.length-1][0]="object"}else{s.token[n.count]="[";l="]";s.stack[n.count]="array";n.structure[n.structure.length-1][0]="array"}s.types[n.count]="start";m="end";d[e+1]="";d[e+2]="";e=e+2}else{b=n.count;h=b;if(f.script.variableList!=="none"&&(S==="var"||S==="let"||S==="const")){if(s.types[b]==="comment"){do{b=b-1}while(b>0&&s.types[b]==="comment")}if(f.script.variableList==="list"&&k.len>-1&&k.index[k.len]===b&&S===k.word[k.len]){l=",";m="separator";s.token[b]=l;s.types[b]=m;k.count[k.len]=0;k.index[k.len]=b;k.word[k.len]=S;return}k.len=k.len+1;k.count.push(0);k.index.push(b);k.word.push(S);b=h}else if(k.len>-1&&S!==k.word[k.len]&&n.count===k.index[k.len]&&s.token[k.index[k.len]]===";"&&l!==k.word[k.len]&&f.script.variableList==="list"){N()}if(S==="from"&&s.token[n.count]==="x;"&&s.token[n.count-1]==="}"){_()}if(S==="while"&&s.token[n.count]==="x;"&&s.token[n.count-1]==="}"){let J=0;let fe=n.count-2;if(fe>-1){do{if(s.types[fe]==="end"){J=J+1}else if(s.types[fe]==="start"){J=J-1}if(J<0){if(s.token[fe]==="{"&&s.token[fe-1]==="do")_();return}fe=fe-1}while(fe>-1)}}if(T==="comment"){let J=n.count;do{J=J-1}while(J>0&&s.types[J]==="comment");T=s.types[J];w=s.token[J]}E=V(2,false);if(S==="void"){if(w===":"&&s.stack[n.count-1]==="arguments"){m="type"}else{m="word"}}else if((n.structure[n.structure.length-1][0]==="object"||n.structure[n.structure.length-1][0]==="class"||n.structure[n.structure.length-1][0]==="data_type")&&(s.token[n.count]==="{"||s.token[s.begin[n.count]]==="{"&&s.token[n.count]===","||s.types[n.count]==="template_end"&&(s.token[s.begin[n.count]-1]==="{"||s.token[s.begin[n.count]-1]===","))){if(S==="return"||S==="break"){m="word"}else{m="property"}}else if(u[u.length-1]===true||(f.language==="typescript"||f.language==="flow")&&w==="type"){m="type"}else if(C.length>0&&(w==="function"||w==="class"||w==="const"||w==="let"||w==="var"||w==="new"||w==="void")){m="reference";C[C.length-1].push(S);if(f.language==="javascript"||f.language==="jsx"||f.language==="typescript"||f.language==="tsx"){if(w==="var"||w==="function"&&s.types[n.count-1]!=="operator"&&s.types[n.count-1]!=="start"&&s.types[n.count-1]!=="end"){ee(n.count,S,true)}else{ee(n.count,S,false)}}else{ee(n.count,S,false)}}else if(n.structure[n.structure.length-1][0]==="arguments"&&m!=="operator"){m="reference";i.push(S)}else if(w===","&&s.stack[n.count]!=="method"&&(s.stack[n.count]!=="expression"||s.token[s.begin[n.count]-1]==="for")){let J=n.count;const fe=n.structure[n.structure.length-1][1];do{if(s.begin[J]===fe){if(s.token[J]===";")break;if(s.token[J]==="var"||s.token[J]==="let"||s.token[J]==="const"||s.token[J]==="type"){break}}else if(s.types[J]==="end"){J=s.begin[J]}J=J-1}while(J>fe);if(C.length>0&&s.token[J]==="var"){m="reference";C[C.length-1].push(S);if(f.language==="javascript"||f.language==="jsx"||f.language==="typescript"||f.language==="tsx"){ee(J,S,true)}else{ee(J,S,false)}}else if(C.length>0&&(s.token[J]==="let"||s.token[J]==="const"||s.token[J]==="type"&&(f.language==="typescript"||f.language==="tsx"))){m="reference";C[C.length-1].push(S);ee(J,S,false)}else{m="word"}}else if(n.structure[n.structure.length-1][0]!=="object"||n.structure[n.structure.length-1][0]==="object"&&l!==","&&l!=="{"){let J=C.length;let fe=0;if(J>0){do{J=J-1;fe=C[J].length;if(fe>0){do{fe=fe-1;if(S===C[J][fe])break}while(fe>0);if(S===C[J][fe])break}}while(J>0);if(C[J][fe]===S&&w!=="."){m="reference"}else{m="word"}}else{m="word"}}else{m="word"}l=S;if(S==="from"&&s.token[n.count]==="}")_()}B("");if(S==="class")G.push(0);if(S==="do"){E=V(1,true);if(E!=="{"){l=f.script.correct===true?"{":"x{";m="start";p.push("x{");B("do")}}if(S==="else"){E=V(2,true);let J=n.count-1;if(s.types[J]==="comment"){do{J=J-1}while(J>0&&s.types[J]==="comment")}if(s.token[J]==="x}"){if(s.token[n.count]==="else"){if(s.stack[n.count-1]!=="if"&&s.types[n.count-1]!=="comment"&&s.stack[n.count-1]!=="else"){p.pop();n.splice({data:s,howmany:0,index:n.count-1,record:{begin:s.begin[s.begin[s.begin[n.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:f.script.correct===true?"}":"x}",types:"end"}});if(n.structure.length>1){n.structure.splice(n.structure.length-2,1);n.structure[n.structure.length-1][1]=n.count}}else if(s.token[n.count-2]==="x}"&&q[0]!=="if"&&s.stack[n.count]==="else"){K()}else if(s.token[n.count-2]==="}"&&s.stack[n.count-2]==="if"&&q[0]==="if"&&s.token[q[1]-1]!=="if"&&s.token[s.begin[n.count-1]]==="x{"){K()}}else if(s.token[n.count]==="x}"&&s.stack[n.count]==="if"){K()}}if(E!=="if"&&E.charAt(0)!=="{"){l=f.script.correct===true?"{":"x{";m="start";p.push("x{");B("else")}}if((S==="for"||S==="if"||S==="switch"||S==="catch")&&s.token[n.count-1]!=="."){E=V(1,true);if(E!=="("){t=n.count;if(f.script.correct===true){U("(")}else{U("x(")}}}}do{if(/\s/.test(d[e])){if(j>-1)y();e=n.spacer({array:d,end:x,index:e});if(n.linesSpace>1&&l!==";"&&L<n.count&&d[e+1]!=="}"){O(false);L=n.count}}else if(d[e]==="{"&&d[e+1]==="%"){Q("{%","%}","template")}else if(d[e]==="{"&&d[e+1]==="{"){Q("{{","}}","template")}else if(d[e]==="<"&&d[e+1]==="!"&&d[e+2]==="-"&&d[e+3]==="-"){Q("<!--","-->","comment")}else if(d[e]==="<"){le()}else if(d[e]==="/"&&(e===x-1||d[e+1]==="*")){F()}else if((n.count<0||s.lines[n.count]>0)&&d[e]==="#"&&d[e+1]==="!"&&(d[e+2]==="/"||d[e+2]==="[")){Q("#!"+d[e+2],"\n","string")}else if(d[e]==="/"&&(e===x-1||d[e+1]==="/")){Z()}else if(c(d[e],96)||c(d[e],125)&&n.structure[n.structure.length-1][0]==="template_string"){if(j>-1)y();l=Y();if(c(l,125)&&l.slice(l.length-2)==="${"){m="template_string_else";B("template_string")}else if(l.slice(l.length-2)==="${"){m="template_string_start";B("template_string")}else if(c(l[0],125)){m="template_string_end";B("")}else{m="string";B("")}}else if(d[e]==='"'||d[e]==="'"){Q(d[e],d[e],"string")}else if(d[e]==="-"&&(e<x-1&&d[e+1]!=="="&&d[e+1]!=="-")&&(m==="number"||m==="word"||m==="reference")&&l!=="return"&&(l===")"||l==="]"||m==="word"||m==="reference"||m==="number")){if(j>-1)y();l="-";m="operator";B("")}else if(j===-1&&(d[e]!=="0"||d[e]==="0"&&d[e+1]!=="b")&&(/\d/.test(d[e])||e!==x-2&&d[e]==="-"&&d[e+1]==="."&&/\d/.test(d[e+2])||e!==x-1&&(d[e]==="-"||d[e]===".")&&/\d/.test(d[e+1]))){if(j>-1)y();if(m==="end"&&d[e]==="-"){l="-";m="operator"}else{l=ae();m="number"}B("")}else if(d[e]===":"&&d[e+1]===":"){if(j>-1)y();if(f.script.correct===true)ie();_();e=e+1;l="::";m="separator";B("")}else if(d[e]===","){if(j>-1)y();if(f.script.correct===true)ie();if(u[u.length-1]===true&&s.stack[n.count].indexOf("type")<0){u[u.length-1]=false}if(m==="comment"){oe()}else if(k.len>-1&&k.count[k.len]===0&&f.script.variableList==="each"){_();l=";";m="separator";B("");l=k.word[k.len];m="word";B("");k.index[k.len]=n.count}else{l=",";m="separator";_();B("")}}else if(d[e]==="."){if(j>-1)y();u[u.length-1]=false;if(d[e+1]==="."&&d[e+2]==="."){l="...";m="operator";e=e+2}else{_();l=".";m="separator"}if(/\s/.test(d[e-1])===true)n.linesSpace=1;B("")}else if(d[e]===";"){if(j>-1)y();if(u[u.length-1]===true&&s.stack[n.count].indexOf("type")<0){u[u.length-1]=false}if(G[G.length-1]===0)G.pop();if(k.len>-1&&k.count[k.len]===0){if(f.script.variableList==="each"){N()}else{k.index[k.len]=n.count+1}}if(f.script.correct===true)ie();l=";";m="separator";if(s.token[n.count]==="x}"){P()}else{B("")}$()}else if(d[e]==="("||d[e]==="["||d[e]==="{"){U(d[e])}else if(d[e]===")"||d[e]==="]"||d[e]==="}"){X(d[e])}else if(d[e]==="*"&&s.stack[n.count]==="object"&&j<0&&/\s/.test(d[e+1])===false&&d[e+1]!=="="&&/\d/.test(d[e+1])===false){j=e}else if(d[e]==="="||d[e]==="&"||d[e]==="<"||d[e]===">"||d[e]==="+"||d[e]==="-"||d[e]==="*"||d[e]==="/"||d[e]==="!"||d[e]==="?"||d[e]==="|"||d[e]==="^"||d[e]===":"||d[e]==="%"||d[e]==="~"){l=D();if(l==="regex"){l=s.token[n.count]}else if(l==="*"&&s.token[n.count]==="function"){s.token[n.count]="function*"}else{m="operator";if(l!=="!"&&l!=="++"&&l!=="--")_();B("")}}else if(j<0&&d[e]!==""){j=e}if(k.len>-1&&n.count===k.index[k.len]+1&&s.token[k.index[k.len]]===";"&&l!==k.word[k.len]&&m!=="comment"&&f.script.variableList==="list"){N()}e=e+1}while(e<x);if(j>-1)y();if((s.token[n.count]!=="}"&&s.token[0]==="{"||s.token[0]!=="{")&&(s.token[n.count]!=="]"&&s.token[0]==="["||s.token[0]!=="[")){O(false)}if(R[0]===n.count){l="\n"+R[1];m="string";B("")}if(s.token[n.count]==="x;"&&(s.token[n.count-1]==="}"||s.token[n.count-1]==="]")&&s.begin[n.count-1]===0){n.pop(s)}return s};var Be={markup:"markup",html:"markup",liquid:"markup",xml:"markup",javascript:"script",typescript:"script",jsx:"script",tsx:"script",json:"script",less:"style",scss:"style",sass:"style",css:"style",text:"text"};var Ke={html:"HTML",xhtml:"XHTML",liquid:"Liquid",xml:"XML",jsx:"JSX",tsx:"TSX",json:"JSON",yaml:"YAML",css:"CSS",scss:"SCSS",sass:"SASS",less:"LESS",text:"Plain Text",javascript:"JavaScript",typescript:"TypeScript"};function st(o){return typeof o!=="string"||o.indexOf("html")>-1||Be[o]===void 0?"markup":Be[o]}function yt(o){if(typeof o!=="string"||Ke[o]===void 0)return o.toUpperCase();return Ke[o]}function ke(o){const a={};if(o==="unknown"){a.language=o;a.languageName="Unknown";a.lexer="markup"}else if(o==="xhtml"||o==="markup"){a.language="xml";a.languageName="XHTML";a.lexer="markup"}else{a.language=o;a.languageName=yt(o);a.lexer=st(o)}if(H.hooks.language.length>0){for(const f of H.hooks.language){const e=f(a);if(typeof e==="object")Ie(a,e)}}return a}Ve.reference=ke;Ve.listen=function(o){H.hooks.language.push(o)};function Ve(o){let a=[];let f=0;const e=/(((var)|(let)|(const)|(function)|(import))\s+(\w|\$)+[a-zA-Z0-9]*)/.test(o)&&/@import/.test(o)===false;const l=/((((final)|(public)|(private))\s+static)|(static\s+void))/.test(o);function m(){if(/\n\s*#+\s+/.test(o)||/^#+\s+/.test(o))return ke("markdown");if(/\$[a-zA-Z]/.test(o)||/\{\s*(\w|\.|\$|#)+\s*\{/.test(o)||/^[.#]?[\w][\w-]+\s+\{(?:\s+[a-z][a-z-]+:\s*\S+;)+\s+[&>+]?\s+[.#:]?[\w][\w-]\s+\{/.test(o)&&/:\s*@[a-zA-Z];/.test(o)===false)return ke("scss");if(/@[a-zA-Z]:/.test(o)||/\.[a-zA-Z]\(\);/.test(o))return ke("less");return ke("css")}function I(){let j=1;let t=v;let i=false;let r=false;const q=/((public)|(private))\s+(static\s+)?(((v|V)oid)|(class)|(final))/.test(o);function W(){if(o.indexOf("(")>-1||o.indexOf("=")>-1||o.indexOf(";")>-1&&o.indexOf("{")>-1){if(l===true||/\w<\w+(,\s+\w+)*>/.test(o))return ke("typescript");if(/(?:var|let|const)\s+\w+\s*:/.test(o)||/=\s*<\w+/.test(o))return ke("typescript");return ke("javascript")}return ke("unknown")}function s(){if(/:\s*(?:number|string|boolean|any|unknown)(?:\[\])?/.test(o)||/(?:public|private)\s+/.test(o)||/(?:export|declare)\s+type\s+\w+\s*=/.test(o)||/(?:namespace|interface|enum|implements|declare)\s+\w+/.test(o)||/(?:typeof|keyof|as)\s+\w+/.test(o)||/\w+\s+as\s+\w+/.test(o)||/\[\w+(?:(?::\s*\w+)|(?:\s+in\s+\w+))\]:/.test(o)||/\):\s*\w+(?:\[\])?\s*(?:=>|\{)\s+/.test(o)||/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/.test(o))return ke("typescript");if(/\s(class|var|const|let)\s+\w/.test(o)===false&&/<[a-zA-Z](?:-[a-zA-Z])?/.test(o)&&/<\/[a-zA-Z-](?:-[a-zA-Z])?/.test(o)&&(/\s?\{%/.test(o)||/{{/.test(o)))return ke("liquid");if(/^(\s*[$@])/.test(o)===false&&/([}\]];?\s*)$/.test(o)){if(/^\s*import\s+\*\s+as\s+\w+\s+from\s+['"]/.test(o)||/module\.export\s+=\s+/.test(o)||/export\s+default\s+\{/.test(o)||/[?:]\s*[{[]/.test(o)||/^(?:\s*return;?(?:\s+[{[])?)/.test(o)){return ke("javascript")}}if(/{%/.test(o)&&/{{/.test(o)&&/<\w/.test(o))return ke("liquid");if(/{\s*(?:\w|\.|@|#)+\s*\{/.test(o))return ke("less");if(/\$(\w|-)/.test(o))return ke("scss");if(/[;{:]\s*@\w/.test(o)===true)return ke("less");return ke("css")}if(j<f){do{if(i===false){if(c(a[j],42)&&c(a[j-1],47)){a[j-1]=v;i=true}else if(r===false&&j<f-6&&a[j].charCodeAt(0)===102&&a[j+1].charCodeAt(0)===105&&a[j+2].charCodeAt(0)===108&&a[j+3].charCodeAt(0)===116&&a[j+4].charCodeAt(0)===101&&a[j+5].charCodeAt(0)===114&&c(a[j+6],58)){r=true}}else if(i===true&&c(a[j],42)&&j!==f-1&&c(a[j+1],47)){i=false;a[j]=v;a[j+1]=v}else if(r===true&&c(a[j],59)){r=false;a[j]=v}if(i===true||r===true)a[j]=v;j=j+1}while(j<f)}t=a.join(v);if(/\s\/\//.test(o)===false&&/\/\/\s/.test(o)===false&&/^(\s*(\{|\[)(?!%))/.test(o)===true&&/((\]|\})\s*)$/.test(o)&&o.indexOf(",")!==-1)return ke("json");if(/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(o)===true&&(e===true||q===true||/console\.log\(/.test(o)===true||/export\s+default\s+class\s+/.test(o)===true||/export\s+(const|var|let|class)s+/.test(o)===true||/document\.get/.test(o)===true||/((=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(o)===true||o.indexOf("{")===-1||/^(\s*if\s+\()/.test(o)===true))return W();if(o.indexOf("{")>-1&&(/^(\s*[\u007b\u0024\u002e#@a-z0-9])/i.test(o)||/^(\s*\/(\*|\/))/.test(o)||/^(\s*\*\s*\{)/.test(o))&&/^(\s*if\s*\()/.test(o)===false&&/=\s*(\{|\[|\()/.test(t)===false&&(/(\+|-|=|\?)=/.test(t)===false||/\/\/\s*=+/.test(t)||/=+('|")?\)/.test(o)&&/;\s*base64/.test(o))&&/function(\s+\w+)*\s*\(/.test(t)===false)return s();return o.indexOf("{%")>-1?ke("liquid"):ke("unknown")}function L(){function j(){return/{%-?\s*(schema|for|if|unless|render|include)/.test(o)||/{%-?\s*end\w+/.test(o)||/{{-?\s*content_for/.test(o)||/{{-?\s*[a-zA-Z0-9_'".[\]]+\s*-?}}/.test(o)||/{%/.test(o)&&/%}/.test(o)&&/{{/.test(o)&&/}}/.test(o)?ke("liquid"):ke("html")}return/^(\s*<!doctype\s+html>)/i.test(o)||/^(\s*<html)/i.test(o)||/<form\s/i.test(o)&&/<label\s/i.test(o)&&/<input\s/i.test(o)||(/<img(\s+\w+=['"]?\S+['"]?)*\s+src\s*=/.test(o)||/<a(\s+\w+=['"]?\S+['"]?)*\s+href\s*=/.test(o))||/<ul\s/i.test(o)&&/<li\s/i.test(o)&&/<\/li>/i.test(o)&&/<\/ul>/i.test(o)||/<head\s*>/.test(o)&&/<\/head>/.test(o)||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(o)&&/XHTML\s+1\.1/.test(o)===false&&/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(o)===false?j():/\s?{[{%]-?/.test(o)?ke("liquid"):ke("xml")}if(o===null||o.replace(/\s+/g,v)===v)return ke("unknown");if((/\n\s*#{1,6}\s+/.test(o)||/\n\s*(?:\*|-|(?:\d+\.))\s/.test(o))&&(/\[( |x|X)\]/.test(o)||/\s[*_~]{1,2}\w+[*_~]{1,2}/.test(o)||/\n\s*```[a-zA-Z]*?\s+/.test(o)||/-+\|(-+\|)+/.test(o)))return ke("markdown");if(/^(\s*<!DOCTYPE\s+html>)/i.test(o))return L();if(/^\s*@(?:charset|import|include|keyframes|media|namespace|page)\b/.test(o))return m();if(l===false&&/=(>|=|-|\+|\*)/.test(o)===false&&/^(?:\s*((if)|(for)|(function))\s*\()/.test(o)===false&&/(?:\s|;|\})((if)|(for)|(function\s*\w*))\s*\(/.test(o)===false&&e===false&&/return\s*\w*\s*(;|\})/.test(o)===false&&(o===void 0||/^(?:\s*#(?!(!\/)))/.test(o)||/\n\s*(\.|@)\w+(\(|(\s*:))/.test(o)&&/>\s*<\w/.test(o)===false||(/^\s*:root\s*\{/.test(o)||/-{2}\w+\s*\{/.test(o)||/^\s*(?:body|button|hr|section|h[1-6]|p|strong|\*)\s+\{\s+/.test(o))))return m();a=o.replace(/\[[a-zA-Z][\w-]*=['"]?[a-zA-Z][\w-]*['"]?\]/g,v).split(v);f=a.length;if(/^(\s*({{|{%|<))/.test(o))return L();if(l===true||/^(?:[\s\w-]*<)/.test(o)===false&&/(?:>[\s\w-]*)$/.test(o)===false)return I();return(/^(?:\s*<\?xml)/.test(o)||/(?:>[\w\s:]*)?<(?:\/|!|#)?[\w\s:\-[]+/.test(o)||/^\s*</.test(o)&&/<\/\w+(\w|\d)+>\s*$/.test(o))&&(/^(?:[\s\w]*<)/.test(o)||/(?:>[\s\w]*)$/.test(o))||/^(?:\s*<s((cript)|(tyle)))/i.test(o)&&/(?:<\/s((cript)|(tyle))>\s*)$/i.test(o)?/^(?:[\s\w]*<)/.test(o)===false||/(?:>[\s\w]*)$/.test(o)===false?I():L():ke("unknown")}H.lexers.markup=function o(a){const{options:f}=H;const{data:e}=n;const l=f.language==="jsx"||f.language==="tsx";const m=f.language==="html"||f.language==="liquid";const I=f.markup;const L=I.attributeSortList.length;const j={end:0,index:-1,start:0,line:1};const t=a.split(v);const i=t.length;let r=0;let q=false;let W="javascript";let s=m?f.language:"html";let C=0;function x(u){if(m===true&&l===false){if(/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(u))return u;if(I.delimiterSpacing===true){u=u.replace(/{[{%]-?\s*/g,g=>g.replace(/\s*$/," "));u=u.replace(/\s*-?[%}]}/g,g=>g.replace(/^\s*/," "))}return u}return u}function d(u,g,k){if(u===e){if(g.types.indexOf("end")>-1){j.end=j.end+1}else if(g.types.indexOf("start")>-1){j.start=j.start+1}}j.index=n.count;j.line=n.lineNumber;n.push(u,g,k)}function z(u){let g=0;let k=v;const O=/^(?:<|{%-?|{{-?)=?\s*/;if(typeof u!=="string")return v;g=u.replace(O,"%").replace(/\s+/," ").indexOf(" ");k=u.replace(O," ");k=g<0?k.slice(1,u.length-1):k.slice(1,g);if(s==="html")k=k.toLowerCase();k=k.replace(/-?[%}]}$/,v);if(k.indexOf("(")>0)k=k.slice(0,k.indexOf("("));if(k==="?xml?")return"xml";return k}function p(u,g){const k=z(u);const O=gt({begin:n.structure[n.structure.length-1][1],ender:-1,lexer:"markup",lines:e.lines[n.count]>0?1:0,stack:n.structure[n.structure.length-1][0],token:`</${n.structure[n.structure.length-1][0]}>`,types:"end"});d(e,O,v);if(pe.html.tags.has(n.structure[n.structure.length-1][0])&&(g===true&&n.structure.length>1||g===false&&`/${n.structure[n.structure.length-1][0]}`!==k)){do{O.begin=n.structure[n.structure.length-1][1];O.stack=n.structure[n.structure.length-1][0];O.token=`</${n.structure[n.structure.length-1][0]}>`;d(e,O,v)}while(pe.html.tags.has(n.structure[n.structure.length-1][0])&&(g===true&&n.structure.length>1||g===false&&`/${n.structure[n.structure.length-1][0]}`!==k))}}function G(u){const g={begin:n.structure[n.structure.length-1][1],ender:-1,lexer:"markup",lines:n.linesSpace,stack:n.structure[n.structure.length-1][0],token:v,types:v};let k=0;let O=v;let P=v;let _=v;let F=v;let $=v;let oe=false;let X=false;let Q=false;let Z=false;let le=false;let V=false;let ae=false;let D=[];let ie=[v,0];function B(te){const U=te.indexOf("=");if(U>0&&(U<te.indexOf('"')&&te.indexOf('"')>0||U<te.indexOf("'")&&te.indexOf("'")>0)){return[te.slice(0,U),te.slice(U+1)]}return[te,v]}function ye(){const te=n.count;const U=F.replace(/(\/)$/,v);const Y=I.quoteConvert;let A=0;let N=0;let y=0;let h=v;let b=v;let S=[];let E=D.length;function w(){let T=Ce(g.token,5);if(Q===true||Y==="none"||g.types.indexOf("attribute")<0||T===false&&Y==="single"&&g.token.indexOf('"')<0||T===false&&Y==="double"&&g.token.indexOf("'")<0){d(e,g,v)}else{let M=0;let K=false;const ee=g.token.split(v);const J=g.token.indexOf("=");const fe=ee.length-1;if(ne(ee[J+1],34)&&ne(ee[ee.length-1],34)&&Y==="single"&&T===false){d(e,g,v)}else if(ne(ee[J+1],39)&&ne(ee[ee.length-1],39)&&Y==="double"&&T===false){d(e,g,v)}else{M=J+2;if(Y==="double"){if(g.token.slice(J+2,fe).indexOf('"')>-1)K=true;ee[J+1]='"';ee[ee.length-1]='"'}else if(Y==="single"){if(g.token.slice(J+2,fe).indexOf("'")>-1)K=true;ee[J+1]="'";ee[ee.length-1]="'"}if(K===true||T===true){T=false;do{if(c(ee[M-1],123)&&(c(ee[M],37)||c(ee[M],123))){T=true}else if(c(ee[M],125)&&(c(ee[M-1],37)||c(ee[M-1],125))){T=false}if(T===true){if(c(ee[M],34)&&Y==="double"){ee[M]="'"}else if(c(ee[M],39)&&Y==="single"){ee[M]='"'}}else{if(c(ee[M],39)&&Y==="double"){ee[M]='"'}else if(c(ee[M],34)&&Y==="single"){ee[M]="'"}}M=M+1}while(M<fe)}g.token=ee.join(v);d(e,g,v)}}}if(D.length<1)return;if(c(D[D.length-1][0],47)){D.pop();O=O.replace(/>$/,"/>")}N=D.length;y=1;if(y<N){do{h=D[y-1][0];if(h.charCodeAt(h.length-1)===61&&D[y][0].indexOf("=")<0){D[y-1][0]=h+D[y][0];D.splice(y,1);N=N-1;y=y-1}y=y+1}while(y<N)}if(I.attributeSort===true&&l===false&&Z===false&&le===false){if(L>0){const T=[];y=0;N=0;E=D.length;do{N=0;do{h=D[N][0].split("=")[0];if(I.attributeSortList[y]===h){T.push(D[N]);D.splice(N,1);E=E-1;break}N=N+1}while(N<E);y=y+1}while(y<L);D=n.safeSort(D,v,false);D=T.concat(D);E=D.length}else{D=n.safeSort(D,v,false)}}g.begin=te;g.stack=U;g.types="attribute";S=[];if(A<E){do{if(D[A]===void 0)break;g.lines=D[A][1];D[A][0]=D[A][0].replace(/\s+$/,v);if(l===true&&/^\/(\/|\*)/.test(D[A][0])){g.types="comment_attribute";g.token=D[A][0];w();A=A+1;continue}if(c(D[A][0][0],123)&&c(D[A][0][1],37)||c(D[A][0][D[A][0].length-1],125)&&c(D[A][0][D[A][0].length-2],37)){if(Ee(D[A][0])){g.token=D[A][0];g.types="template_attribute_end";g.ender=g.begin}else{const T=Je(D[A][0]);if(pe.liquid.tags.has(T)){g.types="template_attribute_start";g.begin=n.count;g.token=D[A][0]}else if(pe.liquid.else.has(T)){g.types="template_attribute_else";g.token=D[A][0]}else{g.types="template_attribute";g.token=D[A][0]}}w();A=A+1;continue}if(c(D[A][0][0],123)&&c(D[A][0][1],123)||c(D[A][0][D[A][0].length-1],125)&&c(D[A][0][D[A][0].length-2],125)){if(Ee(D[A][0])){g.token=D[A][0];g.types="template_attribute_end";g.ender=g.begin}else{const T=Je(D[A][0]);if(pe.liquid.tags.has(T)){g.types="template_attribute_start";g.begin=n.count;g.token=D[A][0]}else if(pe.liquid.else.has(T)){g.types="template_attribute_else";g.token=D[A][0]}else{g.types="template_attribute";g.token=D[A][0]}}w();A=A+1;continue}N=D[A][0].indexOf("=");y=D[A][0].indexOf('"');D[A][0].indexOf("'");if(N<0){g.types="attribute";if(c(D[A][0],35)||c(D[A][0],91)||c(D[A][0],123)||c(D[A][0],40)||l===true){g.token=D[A][0]}else{if(I.attributeCasing==="preserve"){g.token=D[A][0]}else{g.token=D[A][0].toLowerCase()}}w()}else{h=D[A][0].slice(0,N);b=D[A][0].slice(N+1);if(I.correct&&(ne(b[0],60)||ne(b[0],123)||ne(b[0],61)||ne(b[0],34)||ne(b[0],39))){b='"'+b+'"'}if(l===true&&/^\s*{/.test(b)){g.token=h+"={";g.types="jsx_attribute_start";d(e,g,"jsx_attribute");H.lexers.script(b.slice(1,b.length-1));g.begin=n.count;if(/\s\}$/.test(b)){b=b.slice(0,b.length-1);b=/\s+$/.exec(b)[0];g.lines=b.indexOf("\n")<0?1:b.split("\n").length}else{g.lines=0}g.begin=n.structure[n.structure.length-1][1];g.stack=n.structure[n.structure.length-1][0];g.token="}";g.types="jsx_attribute_end";w();g.types="attribute";g.begin=te;g.stack=U}else{if(Ee(h)||(ne(b,39)||ne(b,34))&&Ee(b)){g.token=D[A][0];g.types="template_attribute_end";g.ender=g.begin}else if(Ce(h,5)&&(ne(b,39)||ne(b,34))&&Ce(h,5)){const T=Je(D[A][0]);if(pe.liquid.tags.has(T)){g.types="template_attribute_start";g.begin=n.count;g.token=D[A][0]}else if(pe.liquid.else.has(T)){g.types="template_attribute_else";g.token=D[A][0]}else{g.types="template_attribute";g.token=D[A][0]}}else{g.types="attribute";if(c(D[A][0],35)||c(D[A][0],91)||c(D[A][0],123)||c(D[A][0],40)||l===true){g.token=D[A][0]}else{g.token=D[A][0]}}w()}}A=A+1}while(A<E)}if(S.length>0){g.token=S.join(" ");w()}}q=false;if(u==="---"){$="---";_="comment"}else if(c(t[r],60)){if(c(t[r+1],47)){u=">";_="end"}else if(c(t[r+1],33)){if((t[r+2].charCodeAt(0)===100||t[r+2].charCodeAt(0)===68)&&(t[r+3].charCodeAt(0)===111||t[r+3].charCodeAt(0)===79)&&(t[r+4].charCodeAt(0)===99||t[r+4].charCodeAt(0)===67)&&(t[r+5].charCodeAt(0)===116||t[r+5].charCodeAt(0)===84)&&(t[r+6].charCodeAt(0)===121||t[r+6].charCodeAt(0)===89)&&(t[r+7].charCodeAt(0)===112||t[r+7].charCodeAt(0)===80)&&(t[r+8].charCodeAt(0)===101||t[r+8].charCodeAt(0)===69)){u=">";_="doctype";V=true}else if(c(t[r+2],45)&&c(t[r+3],45)){u="-->";_="comment";$="<!--"}else if(c(t[r+2],91)&&t[r+3].charCodeAt(0)===67&&t[r+4].charCodeAt(0)===68&&t[r+5].charCodeAt(0)===65&&t[r+6].charCodeAt(0)===84&&t[r+7].charCodeAt(0)===65&&c(t[r+8],91)){u="]]>";_="cdata";V=true}}else if(t[r+1]==="?"){u="?>";if(t[r+2].charCodeAt(0)===120&&t[r+3].charCodeAt(0)===109&&t[r+4].charCodeAt(0)===109){_="xml";ae=true}else{V=true;_="template"}}else if(c(t[r+1],37)){V=true}else if((t[r+1].charCodeAt(0)===112||t[r+1].charCodeAt(0)===80)&&(t[r+2].charCodeAt(0)===114||t[r+2].charCodeAt(0)===82)&&(t[r+3].charCodeAt(0)===101||t[r+3].charCodeAt(0)===69)&&(c(t[r+4],62)||ce(t[r+4]))){u="</pre>";_="ignore";V=true}else{ae=true;u=">"}}else if(c(t[r],123)){if(l){q=true;X=true;g.token="{";g.types="script_start";n.structure.push(["script",n.count]);d(e,g,v);return}if(c(t[r+1],123)){V=true;u="}}";_="template"}else if(c(t[r+1],37)){V=true;u="%}";_="template";const te=t.indexOf("}",r+2);if(t[te-1].charCodeAt(0)===37){let U=t.slice(r+2,te-1).join(v);if(U.charCodeAt(0)===45){$="{%-";U=U.slice(1).trimStart()}else{$="{%";U=U.trimStart()}if(U.charCodeAt(U.length-1)===45){u="-%}";U=U.slice(0,U.length-1).trimEnd()}else{u="%}";U=U.trimEnd()}if(U==="comment"){const Y=a.indexOf("{%",te);let A=Y;if(t[Y+1].charCodeAt(0)===45)A=Y+1;A=a.indexOf("endcomment",A);if(A>0){A=t.indexOf("}",A);if(A>0&&t[A-1].charCodeAt(0)===37){_="comment";$=t.slice(r,te+1).join(v);u=t.slice(Y,A+1).join(v)}}}}else{V=true;u="%}";_="template"}}else{V=true;u=t[r+1]+"}";_="template"}}if(I.preserveAttributes===true)V=true;if(X)return;P=u.charAt(u.length-1);if(_==="comment"&&(c(t[r],60)||c(t[r],123)&&c(t[r+1],37))){ie=n.wrapCommentBlock({chars:t,end:i,lexer:"markup",opening:$,start:r,terminator:u});O=ie[0];r=ie[1];if(O.replace($,v).trimStart().startsWith("@prettify-ignore-start")){g.token=O;g.types="ignore";d(e,g,v);return}}else if(r<i){let te=function(){if(K===false&&c(t[r-1],123)&&(c(t[r],123)||c(t[r],37))){return true}else if(K===true&&c(t[r],125)&&(c(t[r-1],125)||c(t[r-1],37))){return false}return K},U=function(){let ue=r;do{ue=ue-1}while(t[ue]==="\\");ue=r-ue;return ue%2===1},Y=function(ue){let me;let re=v;let ge=0;let qe=0;const he="data-prettify-ignore";if(ue===true){re=se.join(v);me=B(re);w=v;if(me[0]===he)Q=true}else{re=se.join(v);if(l===false||l&&ne(re[re.length-1],125)){re=re.replace(/\s+/g," ")}me=B(re);if(me[0]===he)Q=true;if(l&&c(se[0],123)&&c(se[se.length-1],125))M=0}if(c(re[0],123)&&c(re[1],37))le=true;if(ue===false){if(bt(re)){C=C+1}else if(Ee(re)){C=C-1}}re=re.replace(/^\u0020/,v).replace(/\u0020$/,v);se=re.replace(/\r\n/g,"\n").split("\n");qe=se.length;if(ge<qe){do{se[ge]=se[ge].replace(/(\s+)$/,v);ge=ge+1}while(ge<qe)}re=se.join(f.crlf===true?"\r\n":"\n");re=x(re);if(C>=1||Ce(re,1)){if(Ce(re,5)===false){E=c(t[r+1],10)||c(t[r],10)?2:c(t[r],32)&&ne(t[r+1],32)?1:0}else{E=c(t[r+1],10)?2:ne(t[r+1],32)?0:E}}if(re==="="){D[D.length-1][0]=`${D[D.length-1][0]}=`}else if(c(re[0],61)&&D.length>0&&D[D.length-1][0].indexOf("=")<0){D[D.length-1][0]=D[D.length-1][0]+re;if(C>=1||Ce(re,5))D[D.length-1][1]=E}else if(ne(re[0],61)&&D.length>0&&D[D.length-1][0].indexOf("=")===D[D.length-1][0].length-1){D[D.length-1][0]=D[D.length-1][0]+re}else if(re!==v&&re!==" "){D.push([re,E])}if(D.length>0){const[be]=D[D.length-1];if(be.indexOf("=\u201C")>0){n.error=`Invalid quote character (\u201C, &#x201c) used on line number ${n.lineNumber}`}else if(be.indexOf("=\u201D")>0){n.error=`Invalid quote character (\u201D, &#x201d) used on line number ${n.lineNumber}`}}se=[];E=t[r]==="\n"?2:1};const A=[];let N=0;let y=0;let h=0;let b=0;let S=0;let E=0;let w=v;let T=v;let M=0;let K=false;let ee=false;let J=false;let fe=false;let se=[];do{if(c(t[r],10)){E=E+1;n.lineNumber=n.lineNumber+1}if(V===true||(ce(t[r])===false&&ne(w,125)||c(w,125))){K=te();A.push(t[r]);if(c(A[0],60)&&c(A[1],62)&&c(u,62)){g.token="<>";g.types="start";d(e,g,"(empty)");return}if(c(A[0],60)&&c(A[1],47)&&c(A[2],62)&&c(u,62)){g.token="</>";g.types="end";d(e,g,v);return}}if(_==="cdata"&&c(t[r],62)&&c(t[r-1],93)&&ne(t[r-2],93)){n.error=`CDATA tag (${A.join(v)}) not properly terminated with "]]>"`;break}if(_==="comment"){w=v;if(t[r]===P&&A.length>u.length+1){y=A.length;N=u.length-1;if(N>-1){do{y=y-1;if(A[y]!==u.charAt(N))break;N=N-1}while(N>-1)}if(N<0)break}}else{if(w===v){if(c(A[0],60)&&c(A[1],33)&&_!=="cdata"){if(_==="doctype"&&c(t[r],62))break;if(c(t[r],91)){if(c(t[r+1],60)){_="start";break}if(ce(t[r+1])){do{r=r+1;if(c(t[r],10))E=E+1}while(r<i-1&&ce(t[r+1]))}if(c(t[r+1],60)){_="start";break}}}if(l){if(c(t[r],123)){M=M+1}else if(c(t[r],125)){M=M-1}}if(c(t[r],60)&&V===false&&A.length>1&&/>{2,3}/.test(u)===false&&ae){n.error=`Parse error (line ${n.lineNumber}) on: ${A.join(v)}`}if(ee===true&&ce(t[r])===false&&t[r]!==P){ee=false;k=0;w=T;A.pop();if(r<i){do{if(c(t[r],10))n.lineNumber=n.lineNumber+1;if(I.preserveAttributes===true){A.push(t[r])}else{se.push(t[r])}if(ne(w,34)||ne(w,39)){if(c(t[r-1],123)&&(c(t[r],37)||c(t[r],123))){K=true}else if((c(t[r-1],125)||c(t[r-1],37))&&c(t[r],125)){K=false}}if(l===false&&J===false&&K===true&&I.preserveAttributes===false){const ue=c(se[0],61);do{r=r+1;if(c(t[r],10)){n.lineNumber=n.lineNumber+1;if(ue){K=false;w=v;Y(false);break}}se.push(t[r]);if(ue&&c(t[r+1],62)){K=false;w=v;D[D.length-1][0]+=se.join(v);se=[];break}if(ue===false&&(c(t[r-1],125)||c(t[r-1],37))&&c(t[r],125)){K=false;w=v;Y(false);break}}while(r<i)}if(l===false&&(c(t[r],60)||c(t[r],62))&&(w===v||c(w,62))){if(w===v&&c(t[r],60)){w=">";h=1}else if(c(w,62)){if(c(t[r],60)){h=h+1}else if(c(t[r],62)){h=h-1;if(h===0){w=v;k=0;Y(false);break}}}}else if(w===v){if(t[r+1]===P){if(c(se[se.length-1],47)||c(se[se.length-1],63)&&_==="xml"){se.pop();if(V===true)A.pop();r=r-1}if(se.length>0)Y(false);break}if(l===false&&c(t[r],123)&&c(t[r-1],61)){w="}"}else if(c(t[r],34)||c(t[r],39)){w=t[r];if(J===false&&K===false)J=true;if(c(t[r-1],61)&&(c(t[r+1],60)||c(t[r+1],123)&&c(t[r+2],37)||ce(t[r+1])&&ne(t[r-1],61))){k=r}}else if(c(t[r],40)){w=")";S=1}else if(l){if((c(t[r-1],61)||ce(t[r-1]))&&c(t[r],123)){w="}";b=1}else if(c(t[r],47)){if(c(t[r+1],42)){w="*/"}else if(t[r+1]==="/"){w="\n"}}}else if(c(A[0],123)&&c(t[r],123)&&(c(t[r+1],123)||c(t[r+1],37))){w=c(t[r+1],123)?"}}":t[r+1]+"}"}if(ce(t[r])&&w===v){if(c(se[se.length-2],61)){N=r+1;if(N<i){do{if(ce(t[N])===false){if(c(t[N],34)||c(t[N],39)){r=N-1;fe=true;se.pop()}break}N=N+1}while(N<i)}}if(fe===true){fe=false}else if(M===0||M===1&&c(se[0],123)){se.pop();if(se.length>0)Y(false);ee=true;break}}}else if(c(t[r],40)&&c(w,41)){S=S+1}else if(c(t[r],41)&&c(w,41)){S=S-1;if(S===0){w=v;if(t[r+1]===u.charAt(0)){Y(false);break}}}else if(l&&(c(w,125)||c(w,10)&&c(t[r],10)||w==="*/"&&c(t[r-1],42)&&c(t[r],47))){if(c(t[r],96)){r=r+1;do{se.push(t[r]);if(c(t[r],96))break;r=r+1}while(r<t.length)}if(c(w,125)){if(c(t[r],125)&&t[r]!==w){b=b+1}else if(t[r]===w){b=b-1;if(b===0){M=0;w=v;O=se.join(v);if(I.preserveAttributes===false){if(l){if(!/^\s*$/.test(O))D.push([O,E])}else{O=O.replace(/\s+/g," ");if(O!==" ")D.push([O,E])}}se=[];E=1;break}}}else{T=v;Z=true;O=se.join(v);if(O!==" ")D.push([O,E]);se=[];E=c(w,10)?2:1;w=v;break}}else if(c(t[r],123)&&c(t[r+1],37)&&c(t[k-1],61)&&(c(w,34)||c(w,39))){w=w+"{%";k=0}else if(c(t[r-1],37)&&c(t[r],125)&&(w==='"{%'||w==="'{%")){w=w.charAt(0);k=0}else if(c(t[r],60)&&c(u,62)&&c(t[k-1],61)&&(c(w,34)||c(w,39))){w=w+"<";k=0}else if(c(t[r],62)&&(w==='"<'||w==="'<")){w=w.charAt(0);k=0}else if(k===0&&ne(w,62)&&(w.length<2||ne(w,34)&&ne(w,39))){y=0;N=w.length-1;if(N>-1){do{if(t[r-y].charCodeAt(0)!==w.charCodeAt(N))break;y=y+1;N=N-1}while(N>-1)}if(N<0&&K===false&&J===true){J=false;Y(true);if(t[r+1]===P)break}}else if(k>0&&ce(t[r])===false){k=0}r=r+1}while(r<i)}}else if(c(u,10)===false&&(c(t[r],34)||c(t[r],39))){w=t[r]}else if(_!=="comment"&&ne(u,10)&&c(t[r],60)&&c(t[r+1],33)&&c(t[r+2],45)&&c(t[r+3],45)&&e.types[n.count]!=="conditional"){w="-->"}else if(c(t[r],123)&&ne(A[0],123)&&ne(u,10)&&(c(t[r+1],123)||c(t[r+1],37))){if(c(t[r+1],123)){w="}}"}else{w=t[r+1]+"}";if(se.length<1&&(D.length<1||ce(t[r-1]))){A.pop();do{if(c(t[r],10))E=E+1;se.push(t[r]);r=r+1}while(r<i&&t[r-1]+t[r]!==w);se.push("}");D.push([se.join(v),E]);se=[];E=1;w=v}}if(w===u)w=v}else if(ae&&ne(u,10)&&ce(t[r])&&ne(t[r-1],60)){ee=true}else if(ae&&l&&c(t[r],47)&&(c(t[r+1],42)||c(t[r+1],47))){ee=true;A[A.length-1]=" ";T=c(t[r+1],42)?"*/":"\n";se.push(t[r])}else if(K===false&&(t[r]===P||c(u,10)&&c(t[r+1],60))&&(A.length>u.length+1||c(A[0],93))&&(l===false||M===0)){if(c(u,10)){if(ce(A[A.length-1])){do{A.pop();r=r-1}while(ce(A[A.length-1]))}break}y=A.length;N=u.length-1;if(N>-1){do{y=y-1;if(A[y]!==u.charAt(N))break;N=N-1}while(N>-1)}if(N<0){if(c(A[y],62)&&c(t[r],62)&&D.length>0){if(D[D.length-1][1]===0&&c(t[r-1],125)&&ce(t[r+1])){D[D.length-1][1]=c(t[r+1],32)?1:2}}break}}}else if(t[r].charCodeAt(0)===w.charCodeAt(w.length-1)&&(l&&c(u,125)&&(t[r-1]!=="\\"||U()===false)||(l===false||ne(u,125)))){y=0;N=w.length-1;if(N>-1){do{if(t[r-y]!==w.charAt(N))break;y=y+1;N=N-1}while(N>-1)}if(N<0)w=v}}r=r+1}while(r<i);if(I.correct===true){if(c(t[r+1],62)&&c(A[0],60)&&ne(A[0],60)){do{r=r+1}while(c(t[r+1],62))}else if(c(A[0],60)&&c(A[1],60)&&ne(t[r+1],62)&&ne(A[A.length-2],62)){do{A.splice(1,1)}while(c(A[1],60))}}k=0;O=A.join(v);F=z(O);O=x(O);if(F==="xml"){s="xml"}else if(s===v&&F==="html"){s="html"}}g.token=O;g.types=_;F=z(O);if(V===false&&l===false)O=O.replace(/\s+/g," ");if(F==="comment"&&Ce(O,2)){const te=O.slice(0,O.indexOf("%}")+2);const U=O.slice(O.indexOf("%}")+2,O.lastIndexOf("{%"));const Y=O.slice(O.lastIndexOf("{%"));let A=0;let N=0;const y=b=>{A=b===v?0:b.split("\n").length;return v};const h=b=>{N=b===v?0:b.split("\n").length;return v};g.begin=n.structure[n.structure.length-1][1];g.ender=n.count+3;g.stack=n.structure[n.structure.length-1][0];g.types="template_start";g.token=te;d(e,g,"comment");O=U.replace(/^\s*/,y);O=O.replace(/\s*$/,h);g.begin=n.count;g.lines=A;g.stack="comment";g.token=O;g.types="comment";d(e,g,v);g.types="template_end";g.stack="comment";g.lines=N;g.token=Y;d(e,g,v);return}g.types=_;oe=(()=>{const te=/(\/>)$/;const U=(A,N)=>{if(!pe.html.tags.has(A))return false;if(A===N)return true;if(A==="dd"&&N==="dt")return true;if(A==="dt"&&N==="dd")return true;if(A==="td"&&N==="th")return true;if(A==="th"&&N==="td")return true;if(A==="colgroup"&&(N==="tbody"||N==="tfoot"||N==="thead"||N==="tr"))return true;if(A==="tbody"&&(N==="colgroup"||N==="tfoot"||N==="thead"))return true;if(A==="tfoot"&&(N==="colgroup"||N==="tbody"||N==="thead"))return true;if(A==="thead"&&(N==="colgroup"||N==="tbody"||N==="tfoot"))return true;if(A==="tr"&&N==="colgroup")return true;return false};const Y=A=>{g.lines=e.lines[n.count]>0?1:0;g.token=`</${n.structure[n.structure.length-1][0]}>`;g.types="end";d(e,g,v);if(A>0){do{g.begin=n.structure[n.structure.length-1][1];g.stack=n.structure[n.structure.length-1][0];g.token=`</${n.structure[n.structure.length-1][0]}>`;d(e,g,v);A=A-1}while(A>0)}g.begin=n.structure[n.structure.length-1][1];g.lines=n.linesSpace;g.stack=n.structure[n.structure.length-1][0];g.token=O;g.types="end";e.lines[n.count-1]=0};if(_==="end"){const A=e.token[n.count];if(e.types[n.count-1]==="singleton"&&A.charCodeAt(A.length-2)!==47&&`/${z(A)}`===F){e.types[n.count-1]="start"}}if(s==="html"){if(c(O[0],60)&&ne(O[1],33)&&ne(O[1],63)&&(n.count<0||e.types[n.count].indexOf("template")<0))O=O.toLowerCase();if(pe.html.tags.has(n.structure[n.structure.length-1][0])&&U(F.slice(1),n.structure[n.structure.length-2][0])){Y(0)}else if(n.structure.length>3&&pe.html.tags.has(n.structure[n.structure.length-1][0])&&pe.html.tags.has(n.structure[n.structure.length-2][0])&&pe.html.tags.has(n.structure[n.structure.length-3][0])&&U(F,n.structure[n.structure.length-4][0])){Y(3)}else if(n.structure.length>2&&pe.html.tags.has(n.structure[n.structure.length-1][0])&&pe.html.tags.has(n.structure[n.structure.length-2][0])&&U(F,n.structure[n.structure.length-3][0])){Y(2)}else if(n.structure.length>1&&pe.html.tags.has(n.structure[n.structure.length-1][0])&&U(F,n.structure[n.structure.length-2][0])){Y(1)}else if(U(F,n.structure[n.structure.length-1][0])){Y(0)}else if(c(F[0],47)&&pe.html.tags.has(n.structure[n.structure.length-1][0])&&n.structure[n.structure.length-1][0]!==F.slice(1)){p(O,false);g.begin=n.structure[n.structure.length-1][1];g.lines=n.linesSpace;g.stack=n.structure[n.structure.length-1][0];g.token=O;g.types="end";e.lines[n.count-1]=0}if(l===false&&pe.html.voids.has(F)){if(I.correct===true&&te.test(O)===false)O=O.slice(0,O.length-1)+" />";return true}}return false})();if(pe.embed("html",F)&&O.slice(O.length-2)!=="/>"||pe.embed("liquid",F)&&O.slice(O.length-2)==="%}"){const te=Ce(O,3);let U=D.length-1;let Y=v;let A=[];if(U>-1){do{A=B(D[U][0]);if(A[0]==="type"){Y=A[1];if(Y.charCodeAt(0)===34||Y.charCodeAt(0)===39){Y=Y.slice(1,Y.length-1)}break}U=U-1}while(U>-1)}if(te===false&&pe.embed("html",F)){q=true;if(Y===v){W=pe.html.embed[F].language}else if(pe.html.embed[F].value(Y)){W=pe.html.embed[F].language}}else if(te===true&&pe.embed("liquid",F)){q=true;if(Y===v){W=pe.liquid.embed[F].language}else{W=pe.liquid.embed[F].language}}if(q===true){U=r+1;if(U<i){do{if(ce(t[U])===false){if(c(t[U],60)){if(t.slice(U+1,U+4).join(v)==="!--"){U=U+4;if(U<i){do{if(ce(t[U])===false){q=false;break}if(t[U]==="\n"||t[U]==="\r")break;U=U+1}while(U<i)}}else{q=false}}break}U=U+1}while(U<i)}}}if(ae&&Q===false&&_!=="xml"){if(oe===true||O.slice(O.length-2)==="/>"){_="singleton"}else{_="start"}g.types=_}if(ae&&V===false&&Q&&c(u,62)&&O.slice(O.length-2)!=="/>"){const te=[];const U=[];if(oe===true){_="singleton"}else{D.forEach(Y=>U.push(Y[0]));V=true;_="ignore";r=r+1;if(r<i){let Y=v;let A=0;let N=0;let y=false;do{if(c(t[r],10))n.lineNumber=n.lineNumber+1;te.push(t[r]);if(Y===v){if(c(t[r],34)){Y='"'}else if(c(t[r],39)){Y="'"}else if(ne(te[0],123)&&c(t[r],123)&&(c(t[r+1],123)||c(t[r+1],37))){if(c(t[r+1],123)){Y="}}"}else{Y=t[r+1]+"}"}}else if(c(t[r],60)&&ae===true){if(c(t[r+1],47)){y=true}else{y=false}}else if(t[r]===P&&ne(t[r-1],47)){if(y===true){k=k-1;if(k<0)break}else{k=k+1}}}else if(c(t[r],Y.charCodeAt(Y.length-1))){N=0;A=Y.length-1;if(A>-1){do{if(ne(t[r-N],Y.charCodeAt(A)))break;N=N+1;A=A-1}while(A>-1)}if(A<0)Y=v}r=r+1}while(r<i)}}O=O+te.join(v);O=O.replace(">",` ${U.join(" ")}>`);g.token=O;g.types="content-ignore";D=[]}if(g.types.indexOf("template")>-1){if(c(O[0],123)&&c(O[1],37)){if((F==="case"||F==="default")&&(n.structure[n.structure.length-1][0]==="switch"||n.structure[n.structure.length-1][0]==="case")){g.types="template_else"}else if(pe.liquid.else.has(F)){g.types="template_else"}else{if(pe.liquid.tags.has(F)){g.types="template_start"}else if(F.charCodeAt(0)===101&&F.charCodeAt(1)===110&&F.charCodeAt(2)===100&&pe.liquid.tags.has(F.slice(3))){g.types="template_end"}else if(F.charCodeAt(0)===101&&F.charCodeAt(1)===110&&F.charCodeAt(2)===100){g.types="template_end";g.stack=F.slice(3);let te=0;do{if(e.types[te]==="template"&&e.stack[te]===g.stack){e.types[te]="template_start";j.start=j.start+1;break}else{te=e.stack.indexOf(g.stack,te+1)}}while(te>-1)}else{g.stack=F}}}else if(g.types==="template"){if(O.indexOf("else")>2)g.types="template_else"}if(g.types==="template_start"||g.types==="template_else"){if(F===v||c(F,37)){F=F+O.slice(1).replace(F,v).replace(/^\s+/,v);F=F.slice(0,F.indexOf("(")).replace(/\s+/,v)}}if(I.quoteConvert==="double"){g.token=g.token.replace(/'/g,'"')}else if(I.quoteConvert==="single"){g.token=g.token.replace(/"/g,"'")}}if(_==="cdata"&&(g.stack==="script"||g.stack==="style")){let te=n.count;let U=n.count;const Y=g.stack;if(e.types[U]==="attribute"){do{te=te-1;U=U-1}while(e.types[U]==="attribute"&&U>-1)}g.begin=te;g.token="<![CDATA[";g.types="cdata_start";O=O.replace(/^(\s*<!\[cdata\[)/i,v).replace(/(\]\]>\s*)$/,v);d(e,g,v);n.structure.push(["cdata",n.count]);if(Y==="script"){H.lexers.script(O)}else{H.lexers.style(O)}g.begin=n.structure[n.structure.length-1][1];g.token="]]>";g.types="cdata_end";d(e,g,v);n.structure.pop()}else{d(e,g,F)}ye();if(f.wrap>0&&l===true){let te=0;let U=n.count;let Y=0;if(e.types[U].indexOf("attribute")>-1){do{te=te+e.token[U].length+1;U=U-1}while(e.lexer[U]!=="markup"||e.types[U].indexOf("attribute")>-1);if(e.lines[U]===1)te=te+e.token[U].length+1}else if(e.lines[U]===1){te=e.token[U].length+1}Y=U-1;if(te>0&&e.types[Y]!=="script_end"){if(e.types[Y].indexOf("attribute")>-1){do{te=te+e.token[Y].length+1;Y=Y-1}while(e.lexer[Y]!=="markup"||e.types[Y].indexOf("attribute")>-1);if(e.lines[Y]===1)te=te+e.token[Y].length+1}else if(e.lines[Y]===1){te=e.token[Y].length+1}}}n.linesSpace=0}function R(){const u=[];const g=r;const k=c(e.token[n.count],123)&&l===true;let O=v;let P=n.linesSpace;let _=v;if(q===true){if(k===true){_="script"}else if(n.structure[n.structure.length-1][1]>-1){_=z(e.token[n.structure[n.structure.length-1][1]].toLowerCase())}else if(e.begin[n.count]>1){_=z(e.token[e.begin[n.count]].toLowerCase())}else{_=z(e.token[e.begin[n.count]].toLowerCase())}}const F=e.types[n.count]==="template_start"&&e.token[n.count].indexOf("<!")===0&&e.token[n.count].indexOf("<![")<0&&e.token[n.count].charCodeAt(e.token[n.count].length-1)===91;const $={begin:n.structure[n.structure.length-1][1],ender:-1,lexer:"markup",lines:P,stack:n.structure[n.structure.length-1][0],token:v,types:"content"};function oe(){let X=r-1;let Q=0;if(t[r-1]!=="\\")return false;if(X>-1){do{if(t[X]!=="\\")break;Q=Q+1;X=X-1}while(X>-1)}return Q%2===1}if(r<i){let X=v;let Q=v;let Z=v;let le=0;do{if(c(t[r],10))n.lineNumber=n.lineNumber+1;if(q===true){if(Q===v){if(c(t[r],47)){if(c(t[r+1],42)){Q="*"}else if(c(t[r+1],47)){Q="/"}else if(_==="script"&&"([{!=,;.?:&<>".indexOf(t[r-1])>-1){if(l===false||ne(t[r-1],60))Q="reg"}}else if((c(t[r],34)||c(t[r],39)||c(t[r],96))&&oe()===false){Q=t[r]}else if(c(t[r],123)&&k===true){le=le+1}else if(c(t[r],125)&&k===true){if(le===0){Z=u.join(v).replace(/^\s+/,v).replace(/\s+$/,v);H.lexers.script(Z);n.structure[n.structure.length-1][1]+=1;if(e.types[n.count]==="end"&&e.lexer[e.begin[n.count]-1]==="script"){$.lexer="script";$.token=I.correct===true?";":"x;";$.types="separator";d(e,$,v);$.lexer="markup"}$.token="}";$.types="script_end";d(e,$,v);n.structure.pop();break}le=le-1}if(Ce(e.token[n.count],3)===false){X=t.slice(r,r+10).join(v).toLowerCase();if(_==="script"){X=r===i-9?X.slice(0,X.length-1):X.slice(0,X.length-2);if(X==="<\/script"){Z=u.join(v).replace(/^\s+/,v).replace(/\s+$/,v);r=r-1;if(u.length<1)break;if(/^<!--+/.test(Z)&&/--+>$/.test(Z)){$.token="<!--";$.types="comment";d(e,$,v);Z=Z.replace(/^<!--+/,v).replace(/--+>$/,v);H.lexers.script(Z);$.token="-->";d(e,$,v)}else{H.options.language=W;H.lexers.script(Z);if(W==="json"&&f.json.objectSort===true||W!=="json"&&f.script.objectSort===true)n.sortCorrection(0,n.count+1);H.options.language="html"}break}}if(_==="style"){if(r===i-8){X=X.slice(0,X.length-1)}else if(r===i-9){X=X.slice(0,X.length-2)}else{X=X.slice(0,X.length-3)}if(X==="</style"){let V=u.join(v).replace(/^\s+/,v).replace(/\s+$/,v);r=r-1;if(u.length<1)break;if(/^<!--+/.test(V)&&/--+>$/.test(V)){$.token="<!--";$.types="comment";d(e,$,v);V=V.replace(/^<!--+/,v).replace(/--+>$/,v);H.lexers.style(V);$.token="-->";d(e,$,v)}else{H.options.language=W;H.lexers.style(V);if(f.style.sortProperties===true)n.sortCorrection(0,n.count+1);H.options.language="html"}break}}}else{if(pe.embed("liquid",_)){X=t.slice(r).join(v).toLowerCase();if(pe.liquid.embed[_].end(X)){X=X.slice(0,X.indexOf("%}")+2);Z=u.join(v).replace(/^\s+/,v).replace(/\s+$/,v);r=r+X.length-1;if(u.length<1)break;const V=Be[pe.liquid.embed[_].language];if(/^<!--+/.test(Z)&&/--+>$/.test(Z)){$.token="<!--";$.types="comment";d(e,$,v);Z=Z.replace(/^<!--+/,v).replace(/--+>$/,v);H.lexers[V](Z);$.token="-->";d(e,$,v)}else{H.options.language=pe.liquid.embed[_].language;H.lexers[V](Z);if(W==="json"&&f.json.objectSort===true||W==="javascript"&&f.script.objectSort===true||(W==="css"||W==="scss")&&f.style.sortProperties===true)n.sortCorrection(0,n.count+1);H.options.language="liquid";$.token=X;$.types="template_end";d(e,$,v)}break}}}}else if(Q===t[r]&&(c(Q,34)||c(Q,39)||c(Q,96)||c(Q,42)&&c(t[r+1],47))&&oe()===false){Q=v}else if(c(Q,96)&&t[r]==="$"&&c(t[r+1],123)&&oe()===false){Q="}"}else if(c(Q,125)&&c(t[r],125)&&oe()===false){Q="`"}else if(c(Q,47)&&(c(t[r],10)||t[r]==="\r")){Q=v}else if(Q==="reg"&&c(t[r],47)&&oe()===false){Q=v}else if(c(Q,47)&&c(t[r],60)&&c(t[r-1],45)&&c(t[r-2],45)){X=t.slice(r+1,r+11).join(v).toLowerCase();X=X.slice(0,X.length-2);if(_==="script"&&X==="<\/script")Q=v;X=X.slice(0,X.length-1);if(_==="style"&&X==="</style")Q=v}}if(F===true&&c(t[r],93)){r=r-1;P=0;O=u.join(v);O=O.replace(/\s+$/,v);$.token=O;d(e,$,v);break}if(q===false&&u.length>0&&(c(t[r],60)&&ne(t[r+1],61)&&!/\s|\d/.test(t[r+1])||c(t[r],91)&&c(t[r+1],37)||c(t[r],123)&&(l===true||c(t[r+1],123)||c(t[r+1],37)))){r=r-1;if(n.structure[n.structure.length-1][0]==="comment"){O=u.join(v)}else{O=u.join(v).replace(/\s+$/,v)}O=x(O);P=0;$.token=O;if(f.wrap>0&&I.preserveText===false){const{wrap:V}=f;const ae=v;const D=v;const ie=[];let B=V;let ye=O.length;const te=()=>{if(O.charCodeAt(B)===32){ie.push(O.slice(0,B));O=O.slice(B+1);ye=O.length;B=V;return}do{B=B-1}while(B>0&&O.charCodeAt(B)!==32);if(B>0){ie.push(O.slice(0,B));O=O.slice(B+1);ye=O.length;B=V}else{B=V;do{B=B+1}while(B<ye&&O.charCodeAt(B)!==32);ie.push(O.slice(0,B));O=O.slice(B+1);ye=O.length;B=V}};if(e.token[e.begin[n.count]]==="<a>"&&e.token[e.begin[e.begin[n.count]]]==="<li>"&&e.lines[e.begin[n.count]]===0&&n.linesSpace===0&&O.length<f.wrap){d(e,$,v);break}if(ye<V){d(e,$,v);break}if(n.linesSpace<1){let U=n.count;do{B=B-e.token[U].length;if(e.types[U].indexOf("attribute")>-1)B=B-1;if(e.lines[U]>0&&e.types[U].indexOf("attribute")<0)break;U=U-1}while(U>0&&B>0);if(B<1)B=O.indexOf(" ")}O=u.join(v);O=O.replace(/^\s+/,v).replace(/\s+$/,v).replace(/\s+/g," ");do{te()}while(B<ye);if(O!==v&&ne(O,32))ie.push(O);O=f.crlf===true?ie.join("\r\n"):ie.join("\n");O=ae+O+D}P=0;$.token=O;d(e,$,v);break}u.push(t[r]);r=r+1}while(r<i)}if(r>g&&r<i){if(ce(t[r])){let X=r;n.linesSpace=1;do{if(t[X]==="\n")n.linesSpace=n.linesSpace+1;X=X-1}while(X>g&&ce(t[X]))}else{n.linesSpace=0}}else if(r!==g||r===g&&q===false){O=u.join(v).replace(/\s+$/,v);P=0;if($.token!==O){$.token=O;d(e,$,v);n.linesSpace=0}}q=false}if(L>0){do{I.attributeSortList[r]=I.attributeSortList[r].replace(/^\s+/,v).replace(/\s+$/,v);r=r+1}while(r<L);r=0}if(f.language==="html"||f.language==="liquid")s="html";do{if(ce(t[r])){if(e.types[n.count]==="template_start"&&n.structure[n.structure.length-1][0]==="comment"){R()}else{r=n.spacer({array:t,end:i,index:r})}}else if(q){R()}else if(c(t[r],60)){G(v)}else if(c(t[r],91)&&c(t[r+1],37)){G("%]")}else if(c(t[r],123)&&(l||c(t[r+1],123)||c(t[r+1],37))){G(v)}else if(c(t[r],45)&&c(t[r+1],45)&&c(t[r+2],45)){G("---")}else{R()}r=r+1}while(r<i);if(ne(e.token[n.count][0],47)&&pe.html.tags.has(n.structure[n.structure.length-1][0]))p(e.token[n.count],true);if(j.end!==j.start&&n.error===v){if(j.end>j.start){const u=j.end-j.start;const g=u===1?v:"s";n.error=["Prettify Error:","",`${u} more end type${g} than start types`].join("\n")}else{const u=j.start-j.end;const g=u===1?v:"s";n.error=["Prettify Error:","",`${u} more start type${g} than end types`].join("\n")}}return e};H.beautify.markup=o=>{const a={};const f="markup";const{data:e}=n;const l=o.language==="jsx"||o.language==="tsx";const m=o.crlf===true?String.fromCharCode(13,10):String.fromCharCode(10);const I=o.markup;const L=H.end<1||H.end>e.token.length?e.token.length:H.end+1;const j={is:(x,d)=>e.types[x]===d,not:(x,d)=>e.types[x]!==d,idx:(x,d)=>x>-1&&(e.types[x]||v).indexOf(d)};const t={is:(x,d)=>e.token[x]===d,not:(x,d)=>e.token[x]!==d};let i=H.start;let r=-1;let q=0;let W=0;let s=isNaN(o.indentLevel)?0:Number(o.indentLevel);const C=(()=>{const x=H.start>0?Array(H.start).fill(0,0,H.start):[];function d(){let g=i+1;let k=0;if(j.is(g,void 0))return g-1;if(j.is(g,"comment")||i<L-1&&j.idx(g,"attribute")>-1){do{if(j.is(g,"jsx_attribute_start")){k=g;do{if(j.is(g,"jsx_attribute_end")&&e.begin[g]===k)break;g=g+1}while(g<L)}else if(j.not(g,"comment")&&j.idx(g,"attribute")<0)return g;g=g+1}while(g<L)}return g}function z(){const g=e.begin[i];let k=i;do{k=k-1;if(t.is(k,"</li>")&&t.is(k-1,"</a>")&&e.begin[e.begin[k]]===g&&e.begin[k-1]===e.begin[k]+1){k=e.begin[k]}else{return}}while(k>g+1);k=i;do{k=k-1;if(j.is(k+1,"attribute")){x[k]=-10}else if(t.not(k,"</li>")){x[k]=-20}}while(k>g+1)}function p(){let g=i;let k=false;if(e.lines[i+1]===0&&I.forceIndent===false){do{if(e.lines[g]>0){k=true;break}g=g-1}while(g>r);g=i}else{k=true}if(k===true){const O=j.is(q,"comment")||j.is(q,"end")||j.is(q,"template_end")?s+1:s;do{x.push(O);g=g-1}while(g>r);if(O===s+1)x[i]=s;if(j.is(g,"attribute")||j.is(g,"template_attribute")||j.is(g,"jsx_attribute_start")){x[e.begin[g]]=O}else{x[g]=O}}else{do{x.push(-20);g=g-1}while(g>r);x[g]=-20}r=-1}function G(){let g=s;if(I.forceIndent===true||I.forceAttribute===true){x.push(s);return}if(q<L&&(j.idx(q,"end")>-1||j.idx(q,"start")>-1)&&e.lines[q]>0){x.push(s);g=g+1;if(j.is(i,"singleton")&&i>0&&j.idx(i-1,"attribute")>-1&&j.is(e.begin[i-1],"singleton")){if(e.begin[i]<0||j.is(e.begin[i-1],"singleton")&&e.begin[e.ender[i]-1]!==i){x[i-1]=s}else{x[i-1]=s+1}}}else if(i>0&&j.is(i,"singleton")&&j.idx(i-1,"attribute")>-1){x[i-1]=s;W=e.token[i].length;x.push(-10)}else if(e.lines[q]===0){x.push(-20)}else if((o.wrap===0||i<L-2&&e.token[i]!==void 0&&e.token[i+1]!==void 0&&e.token[i+2]!==void 0&&e.token[i].length+e.token[i+1].length+e.token[i+2].length+1>o.wrap&&j.idx(i+2,"attribute")>-1||e.token[i]!==void 0&&e.token[i+1]!==void 0&&e.token[i].length+e.token[i+1].length>o.wrap)&&(j.is(i+1,"singleton")||j.is(i+1,"template"))){x.push(s)}else{W=W+1;x.push(-10)}if(i>0&&j.idx(i-1,"attribute")>-1&&e.lines[i]<1){x[i-1]=-20}if(W>o.wrap){let k=i;let O=Math.max(e.begin[i],0);if(j.is(i,"content")&&I.preserveText===false){let P=0;const _=e.token[i].replace(/\s+/g," ").split(" ");do{k=k-1;if(x[k]<0){P=P+e.token[k].length;if(x[k]===-10)P=P+1}else{break}}while(k>0);k=0;O=_.length;do{if(_[k].length+P>o.wrap){_[k]=m+_[k];P=_[k].length}else{_[k]=` ${_[k]}`;P=P+_[k].length}k=k+1}while(k<O);if(c(_[0],32)){e.token[i]=_.join(v).slice(1)}else{x[i-1]=g;e.token[i]=_.join(v).replace(m,v)}if(e.token[i].indexOf(m)>0){W=e.token[i].length-e.token[i].lastIndexOf(m)}}else{do{k=k-1;if(x[k]>-1){W=e.token[i].length;if(e.lines[i+1]>0)W=W+1;return}if(j.idx(k,"start")>-1){W=0;return}if(e.lines[k+1]>0&&(j.not(k,"attribute")||j.is(k,"attribute")&&j.is(k+1,"attribute"))){if(j.not(k,"singleton")||j.is(k,"attribute")&&j.is(k+1,"attribute")){W=e.token[i].length;if(e.lines[i+1]>0)W=W+1;break}}}while(k>O);x[k]=g}}}function R(){const g=i;if(e.types[g-1]==="script_start"&&c(e.token[g-1],123)){x[g-1]=-20}do{if(e.lexer[i+1]===f&&e.begin[i+1]<g&&j.not(i+1,"start")&&j.not(i+1,"singleton"))break;x.push(0);i=i+1}while(i<L);a[g]=i;if(e.types[i+1]==="script_end"&&e.token[i+1]==="}"){x.push(-20)}else{x.push(s-1)}q=d();if(e.lexer[q]===f&&e.stack[i].indexOf("attribute")<0&&(e.types[q]==="end"||e.types[q]==="template_end")){s=s-1}}function u(){function g(Z){const le=Z.indexOf("=");if(le>0&&(le<Z.indexOf('"')&&Z.indexOf('"')>0||le<Z.indexOf("'")&&Z.indexOf("'")>0)){return[Z.slice(0,le),Z.slice(le+1)]}return[Z,v]}function k(Z){const le=g(Z);if(le[1]===v||le[0]==="href"||le[0].charCodeAt(0)===111&&le[0].charCodeAt(1)===110){return Z}else if(I.attributeValues==="preserve"){return le[0]+"="+le[1]}else if(I.attributeValues==="strip"){return`${le[0].trimStart()}=${le[1].replace(/\s+/g," ").replace(/^["']\s+/,'"')}`}const V=I.attributeValues;const ae=[];const D=o.wrap>0?le[1].length>o.wrap:false;let ie;let B=false;let ye=v;let te=v;let U=0;let Y=0;if(V==="collapse"){ie=le[1].replace(/\s+/g," ")}else if(V==="wrap"){ie=le[1].replace(/\s+/g,A=>/\n/.test(A)?"\n":A.replace(/\s+/," "))}do{if(c(ie[U],123)&&(c(ie[U+1],123)||c(ie[U+1],37))){if(V==="collapse"){if(ce(ie[U-1])===true&&ae[ae.length-1]!=="\n"){ae.push("\n")}}if(c(ie[U+1],37)){Y=ie.indexOf("%}",U+1);ye=ie.slice(U,Y+2);te=c(ye[2],45)?ye.slice(3).trimStart():ye.slice(2).trimStart();U=Y+2;if(te.startsWith("end")){B=false;if(V==="collapse"&&ae[ae.length-1]!=="\n"){ae.push("\n")}}else if(pe.liquid.tags.has(te.slice(0,te.search(/\s/)))){B=true;if(V==="collapse"&&ae[ae.length-1]!=="\n"){ae.push("\n")}}ae.push(ye)}else{if(B&&V==="collapse"&&ae[ae.length-1]!=="\n"){ae.push("\n")}Y=ie.indexOf("}}",U+1);ye=ie.slice(U,Y+2);U=Y+2;ae.push(ye)}if(V==="collapse"){if(ce(ie[U])===true&&ae[ae.length-1]!=="\n"&&U<ie.length-1){ae.push("\n")}}}else{if(ie[U]===" "){if(V==="collapse"){if(ae[ae.length-1]!=="\n"){ae.push("\n")}}else if(D&&V==="wrap"){if(B===false){ae.push("\n")}}}else{ae.push(ie[U])}U=U+1}}while(U<ie.length);return le[0]+"="+ae.join(v)}function O(Z){if(j.is(Z,"attribute")||j.idx(Z,"template_attribute")>-1){e.token[Z]=k(e.token[Z])}else{const le=e.token[Z].replace(/\s+/g," ").split(" ");const V=le.length;let ae=1;let D=le[0].length;do{if(D+le[ae].length>o.wrap){D=le[ae].length;le[ae]=m+le[ae]}else{le[ae]=` ${le[ae]}`;D=D+le[ae].length}ae=ae+1}while(ae<V);e.token[Z]=le.join(v)}}let P=i;const _=i-1;let F=false;let $=false;let oe=0;let X=e.token[_].length+1;let Q=(()=>{if(j.idx(i,"start")>0){let Z=i;do{if(e.types[Z].indexOf("end")>0&&e.begin[Z]===i){if(Z<L-1&&j.idx(Z+1,"attribute")>-1){F=true;break}}Z=Z+1}while(Z<L)}else if(i<L-1&&j.idx(i+1,"attribute")>-1){F=true}if(j.is(q,"end")||j.is(q,"template_end")){return s+(j.is(_,"singleton")?2:1)}if(j.is(_,"singleton"))return s+1;return s})();if(F===false&&j.is(i,"comment_attribute")){x.push(s);x[_]=e.types[_]==="singleton"?s+1:s;return}if(Q<1)Q=1;do{W=W+e.token[i].length+1;if(e.types[i].indexOf("attribute")>0){if(e.types[i]==="template_attribute_start"){if(I.preserveAttributes===true){x.push(-10)}else{let Z=1;do{if(e.lines[i]===0){x.push(-20)}else if(e.lines[i]===1){if(I.forceAttribute===true){x.push(Q)}else{x.push(-10)}}else{x.push(Q)}if(Z===0)break;i=i+1;if(j.is(i,"template_attribute_start")){Z=Z+1}else if(j.is(i,"template_attribute_end")){Z=Z-1}oe=oe+1;if(e.token[i]!==void 0){W=W+e.token[i].length+1;X=X+e.token[i].length+1}}while(i<L)}}else if(e.types[i]==="template_attribute"){if(I.forceAttribute===true){x.push(Q)}else{x.push(-10)}}else if(e.types[i]==="comment_attribute"){x.push(Q)}else if(e.types[i].indexOf("start")>0){$=true;if(i<L-2&&e.types[i+2].indexOf("attribute")>0){x.push(-20);i=i+1;a[i]=i}else{if(_===i-1&&F===false){if(l){x.push(-20)}else{x.push(Q)}}else{if(l){x.push(-20)}else{x.push(Q+1)}}if(e.lexer[i+1]!==f){i=i+1;R()}}}else if(e.types[i].indexOf("end")>0&&e.types[i].indexOf("template")<0){if(x[i-1]!==-20)x[i-1]=x[e.begin[i]]-1;if(e.lexer[i+1]!==f){x.push(-20)}else{x.push(Q)}}else{x.push(Q)}}else if(j.is(i,"attribute")){X=X+e.token[i].length+1;if(I.preserveAttributes===true){x.push(-10)}else if(I.forceAttribute===true||I.forceAttribute>=1||$===true||i<L-1&&(j.idx(i+1,"template_attribute_")>-1&&e.lines[i+1]!==-20||j.idx(i+1,"attribute")>0)){e.token[i]=k(e.token[i]);if(I.forceAttribute===false&&e.lines[i]===1){if(j.is(i+1,"template_attribute_start")&&e.lines[i+1]>1){x.push(Q)}else{x.push(-10)}}else{x.push(Q)}}else{x.push(-10)}}else if(e.begin[i]<_+1){break}i=i+1;oe=oe+1}while(i<L);i=i-1;if(j.idx(i,"template")<0&&j.idx(i,"end")>0&&j.idx(i,"attribute")>0&&j.not(_,"singleton")&&x[i-1]>0&&F===true){x[i-1]=x[i-1]-1}if(x[i]!==-20){if(l===true&&j.idx(_,"start")>-1&&j.is(i+1,"script_start")){x[i]=Q}else{if(t.is(i,"/")&&x[i-1]!==10){x[i-1]=-10}else{x[i]=x[_]}}}if(I.forceAttribute===true){W=0;x[_]=Q}else if(I.forceAttribute>=1){if(oe>=I.forceAttribute){x[_]=Q}else{x[_]=-10}}else{x[_]=-10}if(I.preserveAttributes===true||t.is(_,"<%xml%>")||t.is(_,"<?xml?>")){W=0;return}P=i;if(P>_+1){if(I.selfCloseSpace===false)X=X-1;if(X>o.wrap&&o.wrap>0&&I.forceAttribute===false){if(I.forceLeadAttribute===true){x[_]=Q;P=P-1}W=e.token[i].length;do{if(e.token[P].length>o.wrap&&ce(e.token[P]))O(P);if(j.idx(P,"template")>-1&&x[P]===-10){x[P]=Q}else if(j.is(P,"attribute")&&x[P]===-10){x[P]=Q}P=P-1}while(P>_)}}else if(o.wrap>0&&j.is(i,"attribute")&&e.token[i].length>o.wrap&&ce(e.token[i])){O(i)}}do{if(e.lexer[i]===f){if(e.token[i].toLowerCase().indexOf("<!doctype")===0)x[i-1]=s;if(e.types[i].indexOf("attribute")>-1){u()}else if(j.is(i,"comment")){if(r<0)r=i;if(j.not(i+1,"comment")||i>0&&j.idx(i-1,"end")>-1)p()}else if(j.not(i,"comment")){q=d();if(j.is(q,"end")||j.is(q,"template_end")){s=s-1;if(j.is(q,"template_end")&&j.is(e.begin[q]+1,"template_else"))s=s-1;if(t.is(i,"</ol>")||t.is(i,"</ul>")||t.is(i,"</dl>"))z()}if(j.is(i,"script_end")&&j.is(i+1,"end")){if(e.lines[q]<1){x.push(-20)}else if(e.lines[q]>1){x.push(s)}else{x.push(-10)}}else if((I.forceIndent===false||I.forceIndent===true&&j.is(q,"script_start"))&&(j.is(i,"content")||j.is(i,"singleton")||j.is(i,"template"))){W=W+e.token[i].length;if(j.is(i,"template")){x.push(s);const g=e.token[i].indexOf(m);if(g>0){const k=[];const O=x[i-1]*o.indentSize+e.token[i].charCodeAt(2)===45?o.indentSize:o.indentSize-1;let P=0;do{k.push(" ");P=P+1}while(P<O);e.token[i]=e.token[i].replace(/^\s+/gm,v).replace(/\n/g,_=>`${_}${k.join(v)}`)}}else if(e.lines[q]>0&&j.is(q,"script_start")){x.push(-10)}else if(o.wrap>0&&(j.idx(i,"template")<0||q<L&&j.idx(i,"template")>-1&&j.idx(i,"template")<0)){G()}else if(q<L&&(j.idx(q,"end")>-1||j.idx(q,"start")>-1)&&(e.lines[q]>0||j.idx(i,"template_")>-1)){x.push(s)}else if(e.lines[q]===0){x.push(-20)}else{x.push(s)}}else if(j.is(i,"start")||j.is(i,"template_start")){s=s+1;if(j.is(i,"template_start")&&j.is(i+1,"template_else")){s=s+1}if(l===true&&t.is(i+1,"{")){if(e.lines[q]===0){x.push(-20)}else if(e.lines[q]>1){x.push(s)}else{x.push(-10)}}else if(j.is(i,"start")&&j.is(q,"end")){x.push(-20)}else if(j.is(i,"start")&&j.is(q,"script_start")){x.push(-10)}else if(I.forceIndent===true){x.push(s)}else if(j.is(i,"template_start")&&j.is(q,"template_end")){x.push(-20)}else if(e.lines[q]===0&&(j.is(q,"content")||j.is(q,"singleton")||j.is(q,"start")&&j.is(q,"template"))){x.push(-20)}else{x.push(s)}}else if(I.forceIndent===false&&e.lines[q]===0&&(j.is(q,"content")||j.is(q,"singleton"))){x.push(-20)}else if(j.is(i+2,"script_end")){x.push(-20)}else if(j.is(i,"template_else")){if(j.is(q,"template_end")){x[i-1]=s+1}else{x[i-1]=s-1}x.push(s)}else{x.push(s)}}if(j.not(i,"content")&&j.not(i,"singleton")&&j.not(i,"template")&&j.not(i,"attribute")){W=0}}else{W=0;R()}i=i+1}while(i<L);return x})();return(()=>{const x=[];const d=(()=>{const u=[o.indentChar];const g=o.indentSize-1;let k=0;if(k<g){do{u.push(o.indentChar);k=k+1}while(k<g)}return u.join(v)})();function z(u){const g=[];const k=o.preserveLine+1;const O=Math.min(e.lines[i+1]-1,k);let P=0;if(u<0)u=0;do{g.push(m);P=P+1}while(P<O);if(u>0){P=0;do{g.push(d);P=P+1}while(P<u)}return g.join(v)}function p(){let u=e.token[i].split(m);const g=e.lines[i+1];if(j.is(i,"comment"))u=u.map(_=>_.trimStart());const k=C[i-1]>-1?j.is(i,"attribute")?C[i-1]+1:C[i-1]:(()=>{let _=i-1;let F=_>-1&&j.idx(_,"start")>-1;if(C[i]>-1&&j.is(i,"attribute")){return C[i]+1}do{_=_-1;if(C[_]>-1){return j.is(i,"content")&&F===false?C[_]:C[_]+1}if(j.idx(_,"start")>-1)F=true}while(_>0);return _===-2?0:1})();let O=0;e.lines[i+1]=0;const P=u.length-1;do{if(j.is(i,"comment")){if(u[O]!==v){if(u[O+1].trimStart()!==v){x.push(u[O],z(k))}else{x.push(u[O],"\n")}}else{if(u[O+1].trimStart()===v){x.push("\n")}else{x.push(z(k))}}}else{x.push(u[O]);x.push(z(k))}O=O+1}while(O<P);e.lines[i+1]=g;x.push(u[P]);if(C[i]===-10){x.push(" ")}else if(C[i]>1){x.push(z(C[i]))}}function G(){const u=/\/?>$/;const g=e.token[i];const k=u.exec(g);if(k===null)return;let O=i+1;let P=false;let _=I.selfCloseSpace===true&&k!==null&&k[0]==="/>"?" ":v;e.token[i]=g.replace(u,v);do{if(j.is(O,"jsx_attribute_end")&&e.begin[e.begin[O]]===i){P=false}else if(e.begin[O]===i){if(j.is(O,"jsx_attribute_start")){P=true}else if(j.idx(O,"attribute")<0&&P===false){break}}else if(P===false&&(e.begin[O]<i||j.idx(O,"attribute")<0)){break}O=O+1}while(O<L);if(j.is(O-1,"comment_attribute"))_=z(C[O-2]-1);e.token[O-1]=`${e.token[O-1]}${_}${k[0]}`;if(j.is(O,"comment")&&e.lines[i+1]<2)C[i]=-10}i=H.start;let R=o.indentLevel;do{if(e.lexer[i]===f){if((j.is(i,"start")||j.is(i,"singleton")||j.is(i,"xml"))&&j.idx(i,"attribute")<0&&i<L-1&&e.types[i+1]!==void 0&&j.idx(i+1,"attribute")>-1){G()}if(t.not(i,void 0)&&e.token[i].indexOf(m)>0&&(j.is(i,"content")&&I.preserveText===false||j.is(i,"comment")||j.is(i,"attribute"))){p()}else{x.push(e.token[i]);if(C[i]===-10&&i<L-1){x.push(" ")}else if(C[i]>-1){R=C[i];x.push(z(C[i]))}}}else{if(a[i]===i&&j.not(i,"reference")){x.push(e.token[i])}else{H.end=a[i];o.indentLevel=R;H.start=i;x.push(H.beautify[e.lexer[i]](o).replace(/\s+$/,v));if(C[H.iterator]>-1&&a[i]>i){x.push(z(C[H.iterator]))}i=H.iterator;o.indentLevel=0}}i=i+1}while(i<L);H.iterator=L-1;if(x[0]===m||c(x[0],32))x[0]=v;return x.join(v)})()};H.beautify.style=o=>{const a=[];const f=H.data;const e=o.crlf===true?"\r\n":"\n";const l=H.end>0?H.end+1:f.token.length;const m=o.preserveLine+1;const I=Te(o.indentSize);const L=(()=>{let s=0;const C=[];do{C.push(o.indentChar);s=s+1}while(s<o.indentSize);return C.join(v)})();let j=o.indentLevel;let t=o.style.forceValue==="wrap"&&o.wrap>0?o.wrap:0;let i=H.start;let r=[v,v];function q(s){const C=[];const x=(()=>{if(i===l-1)return 1;if(f.lines[i+1]-1>m)return m;if(f.lines[i+1]>1)return f.lines[i+1]-1;return 1})();let d=0;if(s<0)s=0;do{C.push(e);d=d+1;t=j}while(d<x);if(s>0){d=0;do{C.push(L);d=d+1}while(d<s)}a.push(C.join(v))}function W(){const s=f.begin[i];const C=f.token[s];const x=f.token[i];const d=[];let z=i;let p=0;let G;let R=0;if(s<0||z<=s)return;do{z=z-1;if(f.begin[z]===s){if(c(f.token[z],58)){G=[z-1,0];do{z=z-1;if((c(f.token[z],59)&&C==="{"||c(f.token[z],44)&&C==="(")&&f.begin[z]===s||f.token[z]===x&&f.begin[f.begin[z]]===s){break}if(f.types[z]!=="comment"&&f.types[z]!=="selector"&&f.token[z]!==C&&f.begin[z]===s){G[1]=f.token[z].length+G[1]}}while(z>s+1);if(G[1]>R)R=G[1];d.push(G)}}else if(f.types[z]==="end"){if(z<f.begin[z])break;z=f.begin[z]}}while(z>s);z=d.length;if(z<2)return;do{z=z-1;if(d[z][1]<R){p=d[z][1];do{f.token[d[z][0]]=f.token[d[z][0]]+" ";p=p+1}while(p<R)}}while(z>0)}if(o.script.vertical===true&&o.style.compressCSS===false){i=l;do{i=i-1;if(c(f.token[i],125)||c(f.token[i],41))W()}while(i>0);i=H.start}do{if(f.types[i]==="property")t=j+f.token[i].length;if(f.types[i+1]==="end"||f.types[i+1]==="template_end"||f.types[i+1]==="template_else"){j=j-1}if(f.types[i]==="template"&&f.lines[i]===0){a.push(f.token[i]);if(f.types[i+1]==="template"&&f.lines[i+1]>0)q(j)}else if(f.types[i]==="template"&&f.lines[i]>0){if(f.types[i-2]!=="property"&&f.types[i-1]!=="colon"){t=j;a.push(f.token[i]);q(j)}else if(f.types[i-2]==="property"&&f.types[i-1]==="colon"&&f.types[i+1]==="separator"&&c(f.token[i+1],44)){t=t+f.token[i].length;if(t>o.wrap)q(j);a.push(f.token[i]);do{i=i+1;a.push(f.token[i]);if(f.lines[i+1]>0)q(j)}while(f.types[i]!=="separator"&&ne(f.token[i],59));if(c(f.token[i],59)&&f.types[i]==="separator"){a.push(f.token[i]);if(f.lines[i+1]>0)q(j);i=i+1;continue}}else{t=t+f.token[i].length;if(t>o.wrap||o.style.forceValue==="collapse"){q(j);if(ne(f.token[i][2],45)){a.push(I,f.token[i].replace("{{","{{-"))}else{a.push(I,f.token[i])}}else{a.push(f.token[i])}}}else if(f.types[i]==="template_else"){a.push(f.token[i]);j=j+1;q(j)}else if(f.types[i]==="start"||f.types[i]==="template_start"){j=j+1;a.push(f.token[i]);if(f.types[i+1]!=="end"&&f.types[i+1]!=="template_end"&&(o.style.compressCSS===false||o.style.compressCSS===true&&f.types[i+1]==="selector")){q(j)}}else if(c(f.token[i],59)&&(o.style.compressCSS===false||o.style.compressCSS===true&&f.types[i+1]==="selector")||(f.types[i]==="end"||f.types[i]==="template_end"||f.types[i]==="comment")){a.push(f.token[i]);if(f.types[i+1]==="value"){if(f.lines[i+1]===1){a.push(" ")}else if(f.lines[i+1]>1){q(j)}}else if(f.types[i+1]!=="separator"){if(f.types[i+1]!=="comment"||f.types[i+1]==="comment"&&f.lines[i+1]>1){q(j)}else{a.push(" ")}}}else if(c(f.token[i],58)){a.push(f.token[i]);if(o.style.compressCSS===false)a.push(" ")}else if(f.types[i]==="selector"){if(o.style.classPadding===true&&f.types[i-1]==="end"&&f.lines[i]<3){a.push(e)}if(f.token[i].indexOf("and(")>0){f.token[i]=f.token[i].replace(/and\(/,"and (");a.push(f.token[i])}else if(f.token[i].indexOf("when(")>0){r=f.token[i].split("when(");a.push(r[0].replace(/\s+$/,v));q(j+1);a.push(`when (${r[1]}`)}else{a.push(f.token[i])}if(f.types[i+1]==="start"){if(o.script.braceAllman===true){q(j)}else if(o.style.compressCSS===false){a.push(" ")}}}else if(c(f.token[i],44)){a.push(f.token[i]);if(f.types[i+1]==="selector"||f.types[i+1]==="property"){q(j)}else if(o.style.compressCSS===false){a.push(" ")}}else if(f.stack[i]==="map"&&c(f.token[i+1],41)&&i-f.begin[i]>5){a.push(f.token[i]);q(j)}else if(f.token[i]==="x;"){q(j)}else if((f.types[i]==="variable"||f.types[i]==="function")&&o.style.classPadding===true&&f.types[i-1]==="end"&&f.lines[i]<3){a.push(e);a.push(f.token[i])}else if(ne(f.token[i],59)||c(f.token[i],59)&&(o.style.compressCSS===false||o.style.compressCSS===true&&ne(f.token[i+1],125))){a.push(f.token[i])}i=i+1}while(i<l);H.iterator=l-1;return a.join(v)};H.beautify.script=o=>{const a=new Set(["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]);const f=je(null);const e=H.data;const l="script";const m=H.scopes;const I=H.end<1||H.end>e.token.length?e.token.length:H.end+1;const L=(()=>{let t=H.start;let i=isNaN(o.indentLevel)?0:Number(o.indentLevel);let r=false;let q=false;let W="";let s="";let C=e.types[0];let x=e.token[0];const d=[-1];const z=[];const p=H.start>0?Array(H.start).fill(0,0,H.start):[];const G=[];const R=[[]];const u=[];const g=[];const k=[];const O=[false];const P=[];const _=[];function F(){$(false,false);const A=o.commentIndent===true?i:0;if(r===false&&/\/\u002a\s*global\s/.test(e.token[t])){const N=e.token[t].replace(/\/\u002a\s*global\s+/,"").replace(/\s*\u002a\/$/,"").split(",");let y=N.length;do{y=y-1;N[y]=N[y].replace(/\s+/g,"");if(N[y]!=="")m.push([N[y],-1])}while(y>0)}if(e.types[t-1]==="comment"||e.types[t+1]==="comment"){p[t-1]=A}else if(e.lines[t]<2){let N=t+1;if(e.types[N]==="comment"){do{N=N+1}while(N<I&&e.types[N]==="comment")}if(t<I-1&&e.stack[N]!=="block"&&(e.token[N]==="{"||e.token[N]==="x{")){let y=m.length;e.begin.splice(t,0,e.begin[N]);e.ender.splice(t,0,e.ender[N]);e.lexer.splice(t,0,e.lexer[N]);e.lines.splice(t,0,e.lines[N]);e.stack.splice(t,0,e.stack[N]);e.token.splice(t,0,e.token[N]);e.types.splice(t,0,e.types[N]);if(y>0){do{y=y-1;if(m[y][1]===N){m[y][1]=t}else if(m[y][1]<t){break}}while(y>0)}N=N+1;e.begin.splice(N,1);e.ender.splice(N,1);e.lexer.splice(N,1);e.lines.splice(N,1);e.stack.splice(N,1);e.token.splice(N,1);e.types.splice(N,1);y=t+1;do{e.begin[y]=t;e.stack[y]=e.stack[N];y=y+1}while(y<N);y=y+1;do{if(e.begin[y]===e.begin[N]){e.begin[y]=t;if(e.types[y]==="end"){break}}y=y+1}while(y<I-1);e.begin[N]=t;t=t-1}else{p[t-1]=-10;if(e.stack[t]==="paren"||e.stack[t]==="method"){p.push(i+2)}else{p.push(i)}if(o.commentIndent===true&&p[t]>-1&&e.lines[t]<3){e.lines[t]=3}}if(e.types[t+1]!=="comment")r=true;return}else if(e.token[t-1]===","){p[t-1]=A}else if(x==="="&&e.types[t-1]!=="comment"&&/^(\/\*\*\s*@[a-z_]+\s)/.test(s)===true){p[t-1]=-10}else if(x==="{"&&e.types[t-1]!=="comment"&&e.lines[0]<2){if(e.stack[t]==="function"){p[t-1]=A}else{p[t-1]=/\n/.test(s)?A:-10}}else{p[t-1]=A}if(e.types[t+1]!=="comment")r=true;if(e.token[e.begin[t]]==="("){p.push(i+1)}else{p.push(i)}if(p[t]>-1&&e.lines[t]<3){if(e.types[t-1]==="comment"&&s.startsWith("//")){e.lines[t]=2}else{e.lines[t]=3}}if(o.script.commentNewline===true&&s.startsWith("//")===false&&e.lines[t]>=3){e.lines[t]=2}}function $(A,N){let y=t-1;let h=A===true?0:1;const b=R[R.length-1]===void 0?[]:R[R.length-1];const S=N===false&&e.stack[t]==="array"&&A===true&&s!=="[";if(g[g.length-1]===false||e.stack[t]==="array"&&o.script.arrayFormat==="inline"||e.stack[t]==="object"&&o.script.objectIndent==="inline"){return}g[g.length-1]=false;do{if(e.types[y]==="end"){h=h+1}else if(e.types[y]==="start"){h=h-1}if(e.stack[y]==="global")break;if(h===0){if(e.stack[t]==="class"||e.stack[t]==="map"||S===false&&(A===false&&e.token[y]!=="("&&e.token[y]!=="x("||A===true&&e.token[y]===",")){if(e.types[y+1]==="template_start"){if(e.lines[y]<1){p[y]=-20}else{p[y]=i-1}}else if(b.length>0&&b[b.length-1]>-1){p[y]=i-1}else{p[y]=i}}else if(e.stack[t]==="array"&&e.types[t]==="operator"){if(e.token[y]===",")p[y]=i;if(y===e.begin[t])break}if(A===false)break}if(h<0){if(e.types[y+1]==="template_start"||e.types[y+1]==="template_string_start"){if(e.lines[y]<1){p[y]=-20}else{p[y]=i-1}}else if(b.length>0&&b[b.length-1]>-1){p[y]=i-1}else{p[y]=i}break}y=y-1}while(y>-1)}function oe(){const A=R[R.length-1]===void 0?[]:R[R.length-1];const N=()=>{let y=t;let h=false;const b=e.begin[y];do{y=y-1;if(e.lexer[y]==="markup"){h=true;break}if(e.begin[y]!==b)y=e.begin[y]}while(y>b);if(h===true){y=t;do{y=y-1;if(e.begin[y]!==b){y=e.begin[y]}else if(e.token[y]===","){p[y]=i+1}}while(y>b);p[b]=i+1;p[t-1]=i}else{p[t-1]=-20}};if(s===")"&&e.token[t+1]==="."&&A[A.length-1]>-1&&e.token[A[0]]!==":"){let y=e.begin[t];let h=false;let b=false;do{y=y-1}while(y>0&&p[y]<-9);h=p[y]===i;y=t+1;do{y=y+1;if(e.token[y]==="{"){b=true;break}if(e.begin[y]===e.begin[t+1]&&(e.types[y]==="separator"||e.types[y]==="end")){break}}while(y<I);if(h===false&&b===true&&R.length>1){R[R.length-2].push(e.begin[t]);i=i+1}}if(C!=="separator")Z();if(e.token[t+1]===","&&(e.stack[t]==="object"||e.stack[t]==="array")){$(true,false)}if(e.token[e.begin[t]-1]===","&&(e.token[t+1]==="}"||e.token[t+1]==="]")&&(e.stack[t]==="object"||e.stack[t]==="array")){$(true,false)}if(e.stack[t]!=="attribute"){if(s!==")"&&s!=="x)"&&(e.lexer[t-1]!=="markup"||e.lexer[t-1]==="markup"&&e.token[t-2]!=="return")){i=i-1}if(s==="}"&&e.stack[t]==="switch"&&o.script.noCaseIndent===false){i=i-1}}if(s==="}"||s==="x}"){if(e.types[t-1]!=="comment"&&x!=="{"&&x!=="x{"&&C!=="end"&&C!=="string"&&C!=="number"&&C!=="separator"&&x!=="++"&&x!=="--"&&(t<2||e.token[t-2]!==";"||e.token[t-2]!=="x;"||x==="break"||x==="return")){let y=t-1;let h=false;const b=e.begin[t];const S=z.length;do{if(e.begin[y]===b){if(e.token[y]==="="||e.token[y]===";"||e.token[y]==="x;"){h=true}if(e.token[y]==="."&&p[y-1]>-1){g[g.length-1]=false;p[b]=i+1;p[t-1]=i;break}if(y>0&&e.token[y]==="return"&&(e.token[y-1]===")"||e.token[y-1]==="x)"||e.token[y-1]==="{"||e.token[y-1]==="x{"||e.token[y-1]==="}"||e.token[y-1]==="x}"||e.token[y-1]===";"||e.token[y-1]==="x;")){i=i-1;p[t-1]=i;break}if(e.token[y]===":"&&G.length===0||e.token[y]===","&&h===false){break}if(y===0||e.token[y-1]==="{"||e.token[y-1]==="x{"||e.token[y]==="for"||e.token[y]==="if"||e.token[y]==="do"||e.token[y]==="function"||e.token[y]==="while"||e.token[y]==="var"||e.token[y]==="let"||e.token[y]==="const"||e.token[y]==="with"){if(z[S-1]===false&&S>1&&(t===I-1||e.token[t+1]!==")"&&e.token[t+1]!=="x)")&&e.stack[t]!=="object"){i=i-1}break}}else{y=e.begin[y]}y=y-1}while(y>b)}d.pop()}if(o.script.bracePadding===false&&s!=="}"&&C!=="markup"){p[t-1]=-20}if(o.script.bracePadding===true&&C!=="start"&&x!==";"&&(p[e.begin[t]]<-9||g[g.length-1]===true)){p[e.begin[t]]=-10;p[t-1]=-10;p.push(-20)}else if(e.stack[t]==="attribute"){p[t-1]=-20;p.push(i)}else if(e.stack[t]==="array"&&(A.length>0||u[u.length-1]===true)){X();g[g.length-1]=false;p[e.begin[t]]=i+1;p[t-1]=i;p.push(-20)}else if((e.stack[t]==="object"||e.begin[t]===0&&s==="}")&&A.length>0){X();g[g.length-1]=false;p[e.begin[t]]=i+1;p[t-1]=i;p.push(-20)}else if(s===")"||s==="x)"){const y=s===")"&&x!=="("&&_.length>0?_.pop()+1:0;const h=e.token[e.begin[t]-1]==="if"?(()=>{let b=t;do{b=b-1;if(e.token[b]===")"&&p[b-1]>-1)return y}while(b>e.begin[t]);return y+5})():y;if(y>0&&(o.language!=="jsx"||o.language==="jsx"&&e.token[e.begin[t]-1]!=="render")){const b=o.wrap;const S=e.begin[t];const E=_.length;let w=t-2;if(h>b){p[e.begin[t]]=i+1;p[t-1]=i;do{if(e.begin[w]===S){if(e.token[w]==="&&"||e.token[w]==="||"){p[w]=i+1}else if(p[w]>-1&&e.types[w]!=="comment"&&e.token[w+1]!=="."){p[w]=p[w]+1}}else if(p[w]>-1&&e.token[w+1]!=="."){p[w]=p[w]+1}w=w-1}while(w>S)}else if(E>0){_[E-1]=_[E-1]+y}}else if(s===")"&&t>e.begin[t]+2&&e.lexer[e.begin[t]+1]===l&&e.token[e.begin[t]+1]!=="function"){const b=e.begin[t]<0?0:e.begin[t];const S=o.wrap;const E=A.length;let w=0;let T=0;let M=0;let K=0;let ee=0;let J=false;let fe=false;let se=i+1;let ue=false;let me=false;let re=false;if(p[b]<-9){T=b;do{T=T+1}while(T<t&&p[T]<-9);K=T;do{w=w+e.token[T].length;if(p[T]===-10)w=w+1;if(e.token[T]==="("&&M>0&&M<S-1&&K===t){M=-1}if(e.token[T]===")"){ee=ee-1}else if(e.token[T]==="("){ee=ee+1}if(T===b&&ee>0)M=w;T=T-1}while(T>b&&p[T]<-9);if(e.token[T+1]===".")se=p[T]+1;if(w>S-1&&S>0&&x!=="("&&M!==-1&&g[g.length-2]===false){if(e.token[b-1]==="if"&&z[z.length-1]===true||e.token[b-1]!=="if"){p[b]=se;if(e.token[b-1]==="for"){T=b;do{T=T+1;if(e.token[T]===";"&&e.begin[T]===b){p[T]=se}}while(T<t)}}}}T=t;w=0;do{T=T-1;if(e.stack[T]==="function"){T=e.begin[T]}else if(e.begin[T]===b){if(e.token[T]==="?"){re=true}else if(e.token[T]===","&&J===false){J=true;if(w>=S&&S>0)ue=true}else if(e.types[T]==="markup"&&me===false){me=true}if(p[T]>-9&&e.token[T]!==","&&e.types[T]!=="markup"){w=0}else{if(p[T]===-10)w=w+1;w=w+e.token[T].length;if(w>=S&&S>0&&(J===true||me===true)){ue=true}}}else{if(p[T]>-9){w=0}else{w=w+e.token[T].length;if(w>=S&&S>0&&(J===true||me===true)){ue=true}}}}while(T>b&&ue===false);if(J===false&&e.token[e.begin[t]+1].charAt(0)==="`"){p[e.begin[t]]=-20;p[t-1]=-20}else if((J===true||me===true)&&w>=S&&S>0||p[b]>-9){if(re===true){se=p[b];if(e.token[b-1]==="["){T=t;do{T=T+1;if(e.types[T]==="end"||e.token[T]===","||e.token[T]===";"){break}}while(T<I);if(e.token[T]==="]"){se=se-1;fe=true}}}else if(E>0&&A[E-1]>T){se=se-E}g[g.length-1]=false;T=t;do{T=T-1;if(e.begin[T]===b){if(e.token[T].indexOf("=")>-1&&e.types[T]==="operator"&&e.token[T].indexOf("!")<0&&e.token[T].indexOf("==")<0&&e.token[T]!=="<="&&e.token[T].indexOf(">")<0){w=T;do{w=w-1;if(e.begin[w]===b&&(e.token[w]===";"||e.token[w]===","||w===b)){break}}while(w>b)}else if(e.token[T]===","){p[T]=se}else if(p[T]>-9&&fe===false&&(e.token[b-1]!=="for"||e.token[T+1]==="?"||e.token[T+1]===":")&&(e.token[e.begin[t]]!=="("||e.token[T]!=="+")){p[T]=p[T]+1}}else if(p[T]>-9&&fe===false){p[T]=p[T]+1}}while(T>b);p[b]=se;p[t-1]=se-1}else{p[t-1]=-20}if(e.token[e.begin[t]-1]==="+"&&p[e.begin[t]]>-9){p[e.begin[t]-1]=-10}}else if(o.language==="jsx"){N()}else{p[t-1]=-20}p.push(-20)}else if(g[g.length-1]===true){if(s==="]"&&e.begin[t]-1>0&&e.token[e.begin[e.begin[t]-1]]==="["){g[g.length-2]=false}if(e.begin[t]<p.length)p[e.begin[t]]=-20;if(o.language==="jsx"){N()}else if(s==="]"&&p[e.begin[t]]>-1){p[t-1]=p[e.begin[t]]-1}else{p[t-1]=-20}p.push(-20)}else if(e.types[t-1]==="comment"&&e.token[t-1].substring(0,2)==="//"){if(e.token[t-2]==="x}")p[t-3]=i+1;p[t-1]=i;p.push(-20)}else if(e.types[t-1]!=="comment"&&(x==="{"&&s==="}"||x==="["&&s==="]")){p[t-1]=-20;p.push(-20)}else if(s==="]"){if(z[z.length-1]===true&&g[g.length-1]===false&&o.script.arrayFormat!=="inline"||x==="]"&&p[t-2]===i+1){p[t-1]=i;p[e.begin[t]]=i+1}else if(p[t-1]===-10){p[t-1]=-20}if(e.token[e.begin[t]+1]==="function"){p[t-1]=i}else if(z[z.length-1]===false){if(x==="}"||x==="x}")p[t-1]=i;let y=t-1;let h=1;do{if(e.token[y]==="]")h=h+1;if(e.token[y]==="["){h=h-1;if(h===0){if(y>0&&(e.token[y+1]==="{"||e.token[y+1]==="x{"||e.token[y+1]==="[")){p[y]=i+1;break}if(e.token[y+1]!=="["||q===false){p[y]=-20;break}break}}if(h===1&&e.token[y]==="+"&&p[y]>1){p[y]=p[y]-1}y=y-1}while(y>-1)}else if(o.language==="jsx"){N()}if(o.script.arrayFormat==="inline"){let y=t;const h=e.begin[t];do{y=y-1;if(e.types[y]==="end")break}while(y>h);if(y>h){p[e.begin[t]]=i+1;p[t-1]=i}else{p[e.begin[t]]=-20;p[t-1]=-20}}else if(p[e.begin[t]]>-1){p[t-1]=p[e.begin[t]]-1}p.push(-20)}else if(s==="}"||s==="x}"||z[z.length-1]===true){if(s==="}"&&x==="x}"&&e.token[t+1]==="else"){p[t-2]=i+2;p.push(-20)}else{p.push(i)}p[t-1]=i}else{p.push(-20)}if(e.types[t-1]==="comment")p[t-1]=i;if(o.script.inlineReturn&&o.script.correct===false&&s==="x}"&&(e.stack[t]==="if"||e.stack[t]==="else")&&e.token[e.begin[e.begin[t-1]-1]-2]!=="else"){p[t-1]=-20}X();q=z[z.length-1];z.pop();R.pop();u.pop();k.pop();P.pop();g.pop();O.pop()}function X(){let A=0;const N=R[R.length-1];if(N===void 0)return;A=N.length-1;if(A<1&&N[A]<0&&(s===";"||s==="x;"||s===")"||s==="x)"||s==="}"||s==="x}")){N.pop();return}if(A<0||N[A]<0)return;if(s===":"){if(e.token[N[A]]!=="?"){do{N.pop();A=A-1;i=i-1}while(A>-1&&N[A]>-1&&e.token[N[A]]!=="?")}N[A]=t;p[t-1]=i}else{do{N.pop();A=A-1;i=i-1}while(A>-1&&N[A]>-1)}if((e.stack[t]==="array"||s===",")&&N.length<1)N.push(-1)}function Q(){const A=t;do{if(e.lexer[t+1]===l&&e.begin[t+1]<A)break;if(e.token[A-1]==="return"&&e.types[t]==="end"&&e.begin[t]===A)break;p.push(0);t=t+1}while(t<I);f[A]=t;p.push(i-1)}function Z(){let A=t-1;const N=e.begin[t];if(i<1)return;do{if(N!==e.begin[A]){A=e.begin[A]}else{if(e.types[A]==="separator"||e.types[A]==="operator"){if(e.token[A]==="."&&p[A-1]>0){if(e.token[N-1]==="if"){i=i-2}else{i=i-1}}break}}A=A-1}while(A>0&&A>N)}function le(){if(e.token[t+1]!==","&&s.indexOf("/>")!==s.length-2||e.token[t+1]===","&&e.token[e.begin[t]-3]!=="React"){$(false,false)}if(x==="return"||x==="?"||x===":"){p[t-1]=-10;p.push(-20)}else if(C==="start"||e.token[t-2]==="return"&&e.stack[t-1]==="method"){p.push(i)}else{p.push(-20)}}function V(){const A=R[R.length-1]===void 0?[]:R[R.length-1];function N(){const y=e.token[t+1];let h=0;let b=0;let S=t;let E=s==="+"?i+2:i;let w=0;if(o.wrap<1){p.push(-10);return}do{S=S-1;if(e.token[e.begin[t]]==="("){if(S===e.begin[t]){w=h}if(e.token[S]===","&&e.begin[S]===e.begin[t]&&z[z.length-1]===true){break}}if(h>o.wrap-1)break;if(p[S]>-9)break;if(e.types[S]==="operator"&&e.token[S]!=="="&&e.token[S]!=="+"&&e.begin[S]===e.begin[t]){break}h=h+e.token[S].length;if(S===e.begin[t]&&e.token[S]==="["&&h<o.wrap-1){break}if(e.token[S]==="."&&p[S]>-9)break;if(p[S]===-10)h=h+1}while(S>0);if(w>0)w=w+y.length;h=h+y.length;b=S;if(h>o.wrap-1&&p[S]<-9){do{b=b-1}while(b>0&&p[b]<-9)}if(e.token[b+1]==="."&&e.begin[t]<=e.begin[b]){E=E+1}else if(e.types[b]==="operator"){E=p[b]}b=y.length;if(h+b<o.wrap){p.push(-10);return}if(e.token[e.begin[t]]==="("&&(e.token[A[0]]===":"||e.token[A[0]]==="?")){E=i+3}else if(e.stack[t]==="method"){p[e.begin[t]]=i;if(z[z.length-1]===true){E=i+3}else{E=i+1}}else if(e.stack[t]==="object"||e.stack[t]==="array"){$(true,false)}if(e.token[S]==="var"||e.token[S]==="let"||e.token[S]==="const"){h=h-o.indentSize*o.indentChar.length*2}if(w>0){S=o.wrap-w}else{S=o.wrap-h}if(S>0&&S<5){p.push(E);if(e.token[t].charAt(0)==='"'||e.token[t].charAt(0)==="'"){t=t+1;p.push(-10)}return}if(e.token[e.begin[t]]!=="("||w>o.wrap-1||w===0){if(w>0)h=w;if(h-y.length<o.wrap-1&&(y.charAt(0)==='"'||y.charAt(0)==="'")){t=t+1;h=h+3;if(h-y.length>o.wrap-4){p.push(E);return}p.push(-10);return}p.push(E);return}p.push(-10)}Z();if(A.length>0&&A[A.length-1]>-1&&e.stack[t]==="array"){u[u.length-1]=true}if(s!==":"){if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&g.length>0){$(true,false)}if(s!=="?"&&e.token[A[A.length-1]]==="."){let y=0;let h=t;const b=e.begin[h];do{if(e.begin[h]===b){if(e.token[h+1]==="{"||e.token[h+1]==="["||e.token[h]==="function"){break}if(e.token[h]===","||e.token[h]===";"||e.types[h]==="end"||e.token[h]===":"){A.pop();i=i-1;break}if(e.token[h]==="?"||e.token[h]===":"){if(e.token[A[A.length-1]]==="."&&y<2)A[A.length-1]=b+1;break}if(e.token[h]===".")y=y+1}h=h+1}while(h<I)}}if(s==="!"||s==="..."){if(x==="}"||x==="x}")p[t-1]=i;p.push(-20);return}if(x===";"||x==="x;"){if(e.token[e.begin[t]-1]!=="for")p[t-1]=i;p.push(-20);return}if(s==="*"){if(x==="function"||x==="yield"){p[t-1]=-20}else{p[t-1]=-10}p.push(-10);return}if(s==="?"){if(e.lines[t]===0&&e.types[t-2]==="word"&&e.token[t-2]!=="return"&&e.token[t-2]!=="in"&&e.token[t-2]!=="instanceof"&&e.token[t-2]!=="typeof"&&(C==="reference"||C==="word")){if(e.types[t+1]==="word"||e.types[t+1]==="reference"||(e.token[t+1]==="("||e.token[t+1]==="x(")&&e.token[t-2]==="new"){p[t-1]=-20;if(e.types[t+1]==="word"||e.types[t+1]==="reference"){p.push(-10);return}p.push(-20);return}}if(e.token[t+1]===":"){p[t-1]=-20;p.push(-20);return}G.push(t);if(o.script.ternaryLine===true){p[t-1]=-10}else{let y=t-1;do{y=y-1}while(y>-1&&p[y]<-9);A.push(t);i=i+1;if(p[y]===i&&e.token[y+1]!==":"){i=i+1;A.push(t)}p[t-1]=i;if(e.token[e.begin[t]]==="("&&(A.length<2||A[0]===A[1])){g[g.length-1]=false;if(t-2===e.begin[t]){p[e.begin[t]]=i-1}else{p[e.begin[t]]=i}y=t-2;do{if(e.types[y]==="end"&&p[y-1]>-1)break;if(p[y]>-1)p[y]=p[y]+1;y=y-1}while(y>e.begin[t])}}p.push(-10);return}if(s===":"){if(e.stack[t]==="map"||e.types[t+1]==="type"||e.types[t+1]==="type_start"){p[t-1]=-20;p.push(-10);return}if(G.length>0&&e.begin[G[G.length-1]]===e.begin[t]){let y=t;const h=e.begin[t];do{y=y-1;if(e.begin[y]===h){if(e.token[y]===","||e.token[y]===";"){p[t-1]=-20;break}if(e.token[y]==="?"){G.pop();X();if(o.script.ternaryLine===true)p[t-1]=-10;p.push(-10);return}}else if(e.types[y]==="end"){y=e.begin[y]}}while(y>h)}if(e.token[t-2]==="where"&&e.stack[t-2]===e.stack[t]){p[t-1]=-10;p.push(-10);return}if(C==="reference"&&e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("){p[t-1]=-20;p.push(-10);return}if((x===")"||x==="x)")&&e.token[e.begin[t-1]-2]==="function"){p[t-1]=-20;p.push(-10);return}if(e.stack[t]==="attribute"){p[t-1]=-20;p.push(-10);return}if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&(C==="reference"||x===")"||x==="]"||x==="?")&&(e.stack[t]==="map"||e.stack[t]==="class"||e.types[t+1]==="reference")&&(G.length===0||G[G.length-1]<e.begin[t])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[t])>-1||e.types[t-2]==="word"&&e.stack[t]!=="switch")){p[t-1]=-20;p.push(-10);return}if(e.stack[t]==="switch"&&(G.length<1||G[G.length-1]<e.begin[t])){p[t-1]=-20;if(o.script.caseSpace===true){p.push(-10)}else{p.push(i)}return}if(e.stack[t]==="object"){p[t-1]=-20}else if(G.length>0){p[t-1]=i}else{p[t-1]=-10}p.push(-10);return}if(s==="++"||s==="--"){if(C==="number"||C==="reference"){p[t-1]=-20;p.push(-10)}else if(t<I-1&&(e.types[t+1]==="number"||e.types[t+1]==="reference")){p.push(-20)}else{p.push(-10)}return}if(s==="+"){if(C==="start"){p[t-1]=-20}else{p[t-1]=-10}if(o.wrap<1||e.token[e.begin[t]]==="x("){p.push(-10);return}const y=e.token[t+1];if(y===void 0){p.push(-10);return}if(e.types[t-1]==="operator"||e.types[t-1]==="start"){if(e.types[t+1]==="reference"||y==="("||y==="["){p.push(-20);return}if(Number(y.slice(1,-1))>-1&&(/\d/.test(y.charAt(1))===true||y.charAt(1)==="."||y.charAt(1)==="-"||y.charAt(1)==="+")){p.push(-20);return}}return N()}if(e.types[t-1]!=="comment"){if(x==="("){p[t-1]=-20}else if(s==="*"&&e.stack[t]==="object"&&e.types[t+1]==="reference"&&(x==="{"||x===",")){p[t-1]=i}else if(s!=="?"||G.length===0){p[t-1]=-10}}if(s.indexOf("=")>-1&&s!=="=="&&s!=="==="&&s!=="!="&&s!=="!=="&&s!==">="&&s!=="<="&&s!=="=>"&&e.stack[t]!=="method"&&e.stack[t]!=="object"){let y=t+1;let h=0;let b=false;let S="";if((e.token[e.begin[t]]==="("||e.token[e.begin[t]]==="x(")&&e.token[t+1]!=="function"){return}do{if(e.types[y]==="start"){if(b===true&&e.token[y]!=="["){if(O[O.length-1]===true){O[O.length-1]=false}break}h=h+1}if(e.types[y]==="end")h=h-1;if(h<0){if(O[O.length-1]===true){O[O.length-1]=false}break}if(h===0){S=e.token[y];if(b===true){if(e.types[y]==="operator"||e.token[y]===";"||e.token[y]==="x;"||e.token[y]==="?"||e.token[y]==="var"||e.token[y]==="let"||e.token[y]==="const"){if(S!==void 0&&(S==="?"||S.indexOf("=")>-1&&S!=="=="&&S!=="==="&&S!=="!="&&S!=="!=="&&S!==">="&&S!=="<=")){if(O[O.length-1]===false){O[O.length-1]=true}}if((S===";"||S==="x;"||S==="var"||S==="let"||S==="const")&&O[O.length-1]===true){O[O.length-1]=false}break}if(O[O.length-1]===true&&(S==="return"||S==="break"||S==="continue"||S==="throw")){O[O.length-1]=false}}if(S===";"||S==="x;"||S===",")b=true}y=y+1}while(y<I);p.push(-10);return}if(s==="-"&&x==="return"||x==="="){p.push(-20);return}if(C==="operator"&&e.types[t+1]==="reference"&&x!=="--"&&x!=="++"&&s!=="&&"&&s!=="||"){p.push(-20);return}return N()}function ae(){const A=()=>{let N=e.begin[t];if(N<0){m.push([e.token[t],-1])}else{if(e.stack[N+1]!=="function"){do{N=e.begin[N]}while(N>-1&&e.stack[N+1]!=="function")}m.push([e.token[t],N])}};if(e.types[t-1]==="comment"){p[t-1]=i}else if(C==="end"&&x!==")"&&e.token[e.begin[t-1]-1]!==")"){p[t-1]=-10}else if(C!=="separator"&&C!=="start"&&C!=="end"&&C.indexOf("template_string")<0){if(C==="word"||C==="operator"||C==="property"||C==="type"||C==="reference"){p[t-1]=-10}else{p[t-1]=-20}}if(x==="var"&&e.lexer[t-1]===l){A()}else if(x==="function"){m.push([e.token[t],t])}else if(x==="let"||x==="const"){m.push([e.token[t],t])}else if(e.stack[t]==="arguments"){m.push([e.token[t],t])}else if(x===","){let N=t;do{N=N-1}while(N>e.begin[t]&&e.token[N]!=="var"&&e.token[N]!=="let"&&e.token[N]!=="const");if(e.token[N]==="var"){A()}else if(e.token[N]==="let"||e.token[N]==="const"){m.push([e.token[t],t])}}p.push(-10)}function D(){const A=R[R.length-1]===void 0?[]:R[R.length-1];const N=()=>{if(o.script.methodChain>0){let y=t;let h=e.begin[t];const b=[t];const S=e.token[h-1]==="if";do{y=y-1;if(e.types[y]==="end")y=e.begin[y];if(e.begin[y]===h){if(e.types[y]==="string"&&e.token[y].indexOf("${")===e.token[y].length-2){break}if(e.token[y]==="."){if(p[y-1]>0){p[t-1]=S===true?i+1:i;return}b.push(y)}else if(e.token[y]===";"||e.token[y]===","||e.types[y]==="operator"||(e.types[y]==="word"||e.types[y]==="reference")&&(e.types[y-1]==="word"||e.types[y-1]==="reference")){break}}}while(y>h);if(b.length<o.script.methodChain){p[t-1]=-20;return}y=0;h=b.length;do{p[b[y]-1]=S===true?i+1:i;y=y+1}while(y<h);y=b[b.length-1]-1;do{if(p[y]>-1)p[y]=p[y]+1;y=y+1}while(y<t);i=S===true?i+2:i+1}p[t-1]=i};if(s==="::"){p[t-1]=-20;p.push(-20);return}if(s==="."){if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&A.length>0){if(e.stack[t]==="object"||e.stack[t]==="array"){$(true,false)}else{$(false,false)}}if(o.script.methodChain===0){p[t-1]=-20}else if(o.script.methodChain<0){if(e.lines[t]>0){N()}else{p[t-1]=-20}}else{N()}p.push(-20);return}if(s===","){Z();if(z[z.length-1]===false&&(e.stack[t]==="object"||e.stack[t]==="array"||e.stack[t]==="paren"||e.stack[t]==="expression"||e.stack[t]==="method")){z[z.length-1]=true;if(e.token[e.begin[t]]==="("){let y=t;do{y=y-1;if(e.begin[y]===e.begin[t]&&e.token[y]==="+"&&p[y]>-9){p[y]=p[y]+2}}while(y>e.begin[t])}}if(e.stack[t]==="array"&&o.script.arrayFormat==="indent"){p[t-1]=-20;p.push(i);return}if(e.stack[t]==="array"&&o.script.arrayFormat==="inline"){p[t-1]=-20;p.push(-10);return}if(e.stack[t]==="object"&&o.script.objectIndent==="indent"){p[t-1]=-20;p.push(i);return}if(e.stack[t]==="object"&&o.script.objectIndent==="inline"){p[t-1]=-20;p.push(-10);return}if(A.length>0){if(A[A.length-1]>-1)X();p[t-1]=-20;p.push(i);return}if(e.token[t-2]===":"&&e.token[t-4]==="where"){p[t-1]=-20;p.push(-10);return}p[t-1]=-20;if(e.types[t+1]!=="end"){k[k.length-1]=k[k.length-1]+1}if((e.token[e.begin[t]]==="("||e.token[e.begin[t]]==="x(")&&o.language!=="jsx"&&e.stack[t]!=="global"&&(e.types[t-1]!=="string"&&e.types[t-1]!=="number"||e.token[t-2]!=="+"||e.types[t-1]==="string"&&e.types[t-1]!=="number"&&e.token[t-2]==="+"&&e.types[t-3]!=="string"&&e.types[t-3]!=="number")){p.push(-10);return}if(C==="reference"&&e.types[t-2]==="word"&&"var-let-const-from".indexOf(e.token[t-2])<0&&(e.types[t-3]==="end"||e.token[t-3]===";")){P[P.length-1]=true;p.push(-10);return}if(P[P.length-1]===true||e.stack[t]==="notation"){p.push(-10);return}if(k[k.length-1]>3&&(e.stack[t]==="array"||e.stack[t]==="object")){if(g[g.length-1]===true)$(true,true);p[t-1]=-20;if(u[u.length-1]===true){p.push(i);return}const y=e.begin[t];let h=t;do{if(e.types[h]==="end"){h=e.begin[h]}else{if(e.token[h]===","&&e.types[h+1]!=="comment"){p[h]=i}}h=h-1}while(h>y);p[y]=i;u[u.length-1]=true;return}if(e.stack[t]==="object"){if(g[g.length-1]===true&&e.types[e.begin[t]-1]!=="word"&&e.types[e.begin[t]-1]!=="reference"&&e.token[e.begin[t]-1]!=="("&&e.token[e.begin[t]-1]!=="x("){const y=e.begin[t];let h=t-1;do{if(e.begin[h]===y){if(e.token[h]===",")break;if(e.token[h]===":"){$(true,false);break}}h=h-1}while(h>y)}}if(g[g.length-1]===false||e.token[t-2]==="+"&&(C==="string"||C==="number")&&p[t-2]>0&&(x.charAt(0)==='"'||x.charAt(0)==="'")){if(e.stack[t]==="method"){if(e.token[t-2]==="+"&&(x.charAt(0)==='"'||x.charAt(0)==="'")&&(e.token[t-3].charAt(0)==='"'||e.token[t-3].charAt(0)==="'")){p.push(i+2);return}if(e.token[t-2]!=="+"){p.push(-10);return}}p.push(i);return}if(g[g.length-1]===true&&e.stack[t]!=="object"){p.push(-10);return}if(k[k.length-1]<4&&(e.stack[t]==="array"||e.stack[t]==="object")){p.push(-10);return}p.push(i);return}if(s===";"||s==="x;"){Z();if(e.token[t+1]!==void 0&&e.types[t+1].indexOf("attribute")>0&&e.types[t+1].indexOf("end")>0){p[t-1]=-20;p.push(i-1);return}if(d[d.length-1]>-1&&e.stack[d[d.length-1]]!=="expression"){let y=t;do{y=y-1;if(e.token[y]===";")break;if(e.token[y]===","){i=i-1;break}if(e.types[y]==="end")y=e.begin[y]}while(y>0&&y>e.begin[t])}d[d.length-1]=-1;X();if(e.token[e.begin[t]-1]!=="for")$(false,false);P[P.length-1]=false;p[t-1]=-20;if(e.begin[t]>0&&e.token[e.begin[t]-1]==="for"&&e.stack[t]!=="for"){p.push(-10);return}p.push(i);return}p.push(-20)}function ie(){const A=e.stack[t+1];const N=t===0?e.stack[t]:e.stack[t-1];if(x===")"||(N==="object"||N==="array")&&x!=="]"){if(A!=="method"||A==="method"&&e.token[t+1]!==")"&&e.token[t+2]!==")"){if(x===")"&&(A!=="function"||e.token[e.begin[e.begin[t-1]-1]]==="("||e.token[e.begin[e.begin[t-1]-1]]==="x(")){$(false,false)}else if(e.types[t+1]!=="end"&&e.types[t+2]!=="end"){$(true,false)}}}z.push(false);R.push([]);O.push(false);u.push(false);P.push(false);k.push(0);if(o.script.neverFlatten===true||A==="array"&&o.script.arrayFormat==="indent"||A==="attribute"||C==="generic"||A==="class"&&x!=="("&&x!=="x("||s==="["&&e.token[t+1]==="function"){g.push(false)}else{if(A==="expression"||A==="method"){g.push(true)}else if((A==="object"||A==="class")&&(x==="("||x==="x("||C==="word"||C==="reference")){g.push(true)}else if(A==="array"||s==="("||s==="x("){g.push(true)}else if(s==="{"&&A==="object"&&C!=="operator"&&C!=="start"&&C!=="string"&&C!=="number"&&N!=="object"&&N!=="array"&&t>0){g.push(true)}else{g.push(false)}}if(s!=="("&&s!=="x("&&e.stack[t+1]!=="attribute"){i=i+1}if(s==="{"||s==="x{"){d.push(-1);if(e.types[t-1]!=="comment"){if(C==="markup"){p[t-1]=i}else if(o.script.braceAllman===true&&C!=="operator"&&x!=="return"){p[t-1]=i-1}else if(e.stack[t+1]!=="block"&&(A==="function"||x===")"||x==="x)"||x===","||x==="}"||C==="markup")){p[t-1]=-10}else if(x==="{"||x==="x{"||x==="["||x==="}"||x==="x}"){p[t-1]=i-1}}if(A==="object"){if(o.script.objectIndent==="indent"){g[g.length-1]=false;p.push(i);return}if(o.script.objectIndent==="inline"){g[g.length-1]=true;p.push(-20);return}}if(A==="switch"){if(o.script.noCaseIndent===true){p.push(i-1);return}i=i+1;p.push(i);return}if(g[g.length-1]===true){if(C!=="word"&&C!=="reference"){p.push(-20);return}}p.push(i);return}if(s==="("||s==="x("){if(o.wrap>0&&s==="("&&e.token[t+1]!==")"){_.push(1)}if(x==="-"&&(e.token[t-2]==="("||e.token[t-2]==="x(")){p[t-2]=-20}if(C==="end"&&N!=="if"&&N!=="for"&&N!=="catch"&&N!=="else"&&N!=="do"&&N!=="try"&&N!=="finally"&&N!=="catch"){if(e.types[t-1]==="comment"){p[t-1]=i}else{p[t-1]=-20}}if(x==="async"){p[t-1]=-10}else if(A==="method"||e.token[t-2]==="function"&&C==="reference"){if(x==="import"||x==="in"||o.script.functionNameSpace===true){p[t-1]=-10}else if(x==="}"&&e.stack[t-1]==="function"||C==="word"||C==="reference"||C==="property"){p[t-1]=-20}else if(N!=="method"&&A!=="method"){p[t-1]=i}}if(x==="+"&&(e.token[t-2].charAt(0)==='"'||e.token[t-2].charAt(0)==="'")){p.push(i);return}if(x==="}"||x==="x}"){p.push(-20);return}if(x==="-"&&(t<2||e.token[t-2]!==")"&&e.token[t-2]!=="x)"&&e.token[t-2]!=="]"&&e.types[t-2]!=="reference"&&e.types[t-2]!=="string"&&e.types[t-2]!=="number")||o.script.functionSpace===false&&x==="function"){p[t-1]=-20}p.push(-20);return}if(s==="["){if(x==="[")z[z.length-2]=true;if(x==="return"||x==="var"||x==="let"||x==="const"){p[t-1]=-10}else if(e.types[t-1]!=="comment"&&e.stack[t-1]!=="attribute"&&(C==="end"||C==="word"||C==="reference")){p[t-1]=-20}else if(x==="["||x==="{"||x==="x{"){p[t-1]=i-1}if(e.stack[t]==="attribute"){p.push(-20);return}if(o.script.arrayFormat==="indent"){g[g.length-1]=false;p.push(i);return}if(o.script.arrayFormat==="inline"){g[g.length-1]=true;p.push(-20);return}if(A==="method"||g[g.length-1]===true){p.push(-20);return}let y=t+1;do{if(e.token[y]==="]"){p.push(-20);return}if(e.token[y]===","){p.push(i);return}y=y+1}while(y<I);p.push(-20)}}function B(){if(s.length===1){p.push(-20);if(e.lines[t]===0)p[t-1]=-20}else if(s.indexOf("#!/")===0){p.push(i)}else{p.push(-10)}if((x===","||C==="start")&&(e.stack[t]==="object"||e.stack[t]==="array")&&g[g.length-1]===false&&t>0){p[t-1]=i}}function ye(){if(W==="template_else"){p[t-1]=i-1;p.push(i)}else if(W==="template_start"){i=i+1;if(e.lines[t-1]<1)p[t-1]=-20;if(e.lines[t]>0||x.length===1&&C==="string"){p.push(i)}else{p.push(-20)}}else if(W==="template_end"){i=i-1;if(C==="template_start"||e.lines[t-1]<1){p[t-1]=-20}else{p[t-1]=i}if(e.lines[t]>0){p.push(i)}else{p.push(-20)}}else if(W==="template"){if(e.lines[t]>0){p.push(i)}else{p.push(-20)}}}function te(){if(W==="template_string_start"){i=i+1;p.push(i)}else if(W==="template_string_else"){Z();p[t-1]=i-1;p.push(i)}else{Z();i=i-1;p[t-1]=i;p.push(-10)}if(t>2&&(e.types[t-2]==="template_string_else"||e.types[t-2]==="template_string_start")){if(o.script.bracePadding===true){p[t-2]=-10;p[t-1]=-10}else{p[t-2]=-20;p[t-1]=-20}}}function U(){if(e.token[t-1]===","||e.token[t-1]===":"&&e.stack[t-1]!=="data_type"){p[t-1]=-10}else{p[t-1]=-20}if(e.types[t]==="type"||e.types[t]==="type_end"){p.push(-10)}if(e.types[t]==="type_start"){p.push(-20)}}function Y(){if((x===")"||x==="x)")&&e.stack[t]==="class"&&(e.token[e.begin[t-1]-1]==="static"||e.token[e.begin[t-1]-1]==="final"||e.token[e.begin[t-1]-1]==="void")){p[t-1]=-10;p[e.begin[t-1]-1]=-10}if(x==="]")p[t-1]=-10;if(s==="else"&&x==="}"){if(e.token[t-2]==="x}")p[t-3]=p[t-3]-1;if(o.script.braceAllman===true||o.script.elseNewline===true){p[t-1]=i}}if(s==="new"&&a.has(e.token[t+1]));if(s==="from"&&C==="end"&&t>0&&(e.token[e.begin[t-1]-1]==="import"||e.token[e.begin[t-1]-1]===",")){p[t-1]=-10}if(s==="function"){if(o.script.functionSpace===false&&t<I-1&&(e.token[t+1]==="("||e.token[t+1]==="x(")){p.push(-20);return}p.push(-10);return}if(x==="-"&&t>1){if(e.types[t-2]==="operator"||e.token[t-2]===","){p[t-1]=-20}else if(e.types[t-2]==="start"){p[t-2]=-20;p[t-1]=-20}}else if(s==="while"&&(x==="}"||x==="x}")){let A=t-1;let N=0;do{if(e.token[A]==="}"||e.token[A]==="x}")N=N+1;if(e.token[A]==="{"||e.token[A]==="x{")N=N-1;if(N===0){if(e.token[A-1]==="do"){p[t-1]=-10;break}p[t-1]=i;break}A=A-1}while(A>-1)}else if(s==="in"||(s==="else"&&o.script.elseNewline===false&&o.script.braceAllman===false||s==="catch")&&(x==="}"||x==="x}")){p[t-1]=-10}else if(s==="var"||s==="let"||s==="const"){d[d.length-1]=t;if(C==="end")p[t-1]=i;if(e.token[e.begin[t]-1]!=="for"){let A=t+1;let N=0;do{if(e.types[A]==="end")N=N-1;if(e.types[A]==="start")N=N+1;if(N<0||N===0&&(e.token[A]===";"||e.token[A]===",")){break}A=A+1}while(A<I);if(e.token[A]===",")i=i+1}p.push(-10);return}if((s==="default"||s==="case")&&C!=="word"&&e.stack[t]==="switch"){p[t-1]=i-1;p.push(-10);return}if(s==="catch"&&x==="."){p[t-1]=-20;p.push(-20);return}if(s==="catch"||s==="finally"){p[t-1]=-10;p.push(-10);return}if(o.script.bracePadding===false&&t<I-1&&e.token[t+1].charAt(0)==="}"){p.push(-20);return}if(e.stack[t]==="object"&&(x==="{"||x===",")&&(e.token[t+1]==="("||e.token[t+1]==="x(")){p.push(-20);return}if(e.types[t-1]==="comment"&&e.token[e.begin[t]]==="("){p[t-1]=i+1}if(o.script.inlineReturn){if(e.stack[t]==="if"&&s==="return"&&(x==="x{"||x==="{")){const A=e.begin.lastIndexOf(e.begin[t-1],t-3);if(e.token[A-2]==="else"){if(x==="x{")e.token[t-1]="{";if(e.token[e.ender[t]]==="x}")e.token[e.ender[t]]="}";e.lines[e.ender[t]]=e.lines[e.ender[t]]-1}else{if(e.token[e.ender[t-1]+2]!=="if"&&e.token[e.ender[t-1]+1]!=="else"){p[t-1]=-20;if(x==="{")e.token[t-1]="x{";if(e.token[e.ender[t]]==="}")e.token[e.ender[t]]="x}"}else if(e.token[e.ender[t-1]+2]!=="if"&&e.token[e.ender[t-1]+1]!=="x{"){p[t-1]=-20;e.lines[e.ender[t-1]+2]=e.lines[e.ender[t-1]+2]-1;if(e.token[t-1]==="{")e.token[t-1]="x{";if(e.token[e.ender[t]]==="}")e.token[e.ender[t]]="x}";if(e.token[e.ender[t-1]+2]==="{")e.token[e.ender[t-1]+2]="x{"}}}if((x==="x}"||x==="}")&&(e.stack[t-1]==="if"&&s==="else"&&(e.token[t+1]==="{"||e.token[t+1]==="x{")&&e.token[t+2]==="return")){if(e.token[t-2]==="x;")e.token[t-2]=";"}if(x==="x{"&&s==="return"&&e.stack[t]==="else"){p[t-1]=-20;if(e.token[e.ender[t-1]-1]==="x;")e.token[e.ender[t-1]-1]=";";e.lines[e.ender[t-1]]=e.lines[e.ender[t-1]]-1;e.lines[e.ender[t]+1]=e.lines[e.ender[t]+1]-1}if(x==="x}"&&s==="else"&&e.token[t+1]==="x{"&&e.token[t+2]==="return"&&e.token[e.ender[t]-1]==="}"){e.token[e.ender[t]-1]="x}"}}p.push(-10)}do{if(e.lexer[t]===l){W=e.types[t];s=e.token[t];if(W==="comment"){F()}else if(W==="regex"){p.push(-20)}else if(W==="string"){B()}else if(W.indexOf("template_string")===0){te()}else if(W==="separator"){D()}else if(W==="start"){ie()}else if(W==="end"){oe()}else if(W==="type"||W==="type_start"||W==="type_end"){U()}else if(W==="operator"){V()}else if(W==="word"){Y()}else if(W==="reference"){ae()}else if(W==="markup"){le()}else if(W.indexOf("template")===0){ye()}else if(W==="generic"){if(x!=="return"&&x.charAt(0)!=="#"&&C!=="operator"&&x!=="public"&&x!=="private"&&x!=="static"&&x!=="final"&&x!=="implements"&&x!=="class"&&x!=="void"){p[t-1]=-20}if(e.token[t+1]==="("||e.token[t+1]==="x("){p.push(-20)}else{p.push(-10)}}else{p.push(-10)}if(W!=="comment"){C=W;x=s}if(_.length>0&&e.token[t]!==")"){if(e.types[t]==="comment"&&_[_.length-1]>-1){_[_.length-1]=o.wrap+1}else if(p[t]>-1||e.token[t].charAt(0)==="`"&&e.token[t].indexOf("\n")>0){_[_.length-1]=-1}else if(_[_.length-1]>-1){_[_.length-1]=_[_.length-1]+e.token[t].length;if(p[t]===-10)_[_.length-1]=_[_.length-1]+1}}}else{Q()}t=t+1}while(t<I);return p})();const j=(()=>{const t=[];const i=(()=>{const z=[];const p=o.indentChar;let G=o.indentSize;if(typeof G!=="number"||G<1)return"";do{z.push(p);G=G-1}while(G>0);return z.join("")})();const r=o.crlf===true?"\r\n":"\n";const q=o.preserveLine+1;const W=["x;","x}","x{","x(","x)"];let s=H.start;let C="";let x=o.indentLevel;function d(z){const p=[];const G=(()=>{if(s===I-1)return 1;if(e.lines[s+1]-1>q)return q;if(e.lines[s+1]>1)return e.lines[s+1]-1;return 1})();let R=0;if(z<0)z=0;do{p.push(r);R=R+1}while(R<G);if(z>0){R=0;do{p.push(i);R=R+1}while(R<z)}return p.join("")}if(o.script.vertical===true){let z=function(p){let G=0;let R=0;let u=p-1;let g=0;let k=0;const O=e.begin[s];const P=[];do{if((e.begin[u]===O||e.token[u]==="]"||e.token[u]===")")&&(e.token[u+1]===":"&&e.stack[u]==="object"||e.token[u+1]==="=")){g=u;R=0;do{if(e.begin[g]===O){if(e.token[g]===","||e.token[g]===";"||e.token[g]==="x;"||L[g]>-1&&e.types[g]!=="comment"){if(e.token[g+1]==="."){R=R+o.indentSize*o.indentChar.length}break}}else if(L[g]>-1){break}if(e.types[g]!=="comment"){if(L[g-1]===-10)R=R+1;R=e.token[g].length+R}g=g-1}while(g>O);k=g;if(e.token[k]===","&&e.token[u+1]==="="){do{if(e.types[k]==="end")k=e.begin[k];if(e.begin[k]===O){if(e.token[k]===";"||e.token[k]==="x;")break;if(e.token[k]==="var"||e.token[k]==="const"||e.token[k]==="let"){R=R+o.indentSize*o.indentChar.length;break}}k=k-1}while(k>O)}if(R>G)G=R;P.push([u,R]);u=g}else if(e.types[u]==="end"){u=e.begin[u]}u=u-1}while(u>O);u=P.length;if(u>0){do{u=u-1;g=P[u][1];if(g<G){do{e.token[P[u][0]]=e.token[P[u][0]]+" ";g=g+1}while(g<G)}}while(u>0)}};s=I;do{s=s-1;if(e.lexer[s]==="script"){if(e.token[s]==="}"&&e.token[s-1]!=="{"&&L[e.begin[s]]>0){z(s)}}else{s=e.begin[s]}}while(s>0)}s=H.start;do{if(e.lexer[s]===l||H.beautify[e.lexer[s]]===void 0){if(e.types[s]==="comment"&&o.commentIndent===true){if(/\n/.test(e.token[s])){const z=e.begin[s]>-1?e.token[s].charAt(2)==="*"?Te(L[s],i)+o.indentChar:Te(L[s],i):o.indentChar;const p=e.token[s].split(/\n/);let G=1;do{p[G]=z+p[G].trimStart();G=G+1}while(G<p.length);e.token.splice(s,1,p.join("\n"))}}if(W.indexOf(e.token[s])<0){if(e.token[s]!==";"||o.script.noSemicolon===false){t.push(e.token[s])}else if(L[s]<0&&e.types[s+1]!=="comment"){t.push(";")}}if(s<I-1&&e.lexer[s+1]!==l&&e.begin[s]===e.begin[s+1]&&e.types[s+1].indexOf("end")<0&&e.token[s]!==","){t.push(" ")}else if(L[s]>-1){if((L[s]>-1&&e.token[s]==="{"||L[s]>-1&&e.token[s+1]==="}")&&e.lines[s]<3&&o.script.braceNewline===true){if(e.lines[s+1]<3)t.push(d(0))}t.push(d(L[s]));x=L[s]}else if(L[s]===-10){t.push(" ");if(e.lexer[s+1]!==l)x=x+1}}else{if(f[s]===s){t.push(e.token[s])}else{H.end=f[s];H.start=s;o.indentLevel=x;C=H.beautify[e.lexer[s]](o);t.push(C.replace(/\s+$/,""));s=H.iterator;if(L[s]===-10){t.push(" ")}else if(L[s]>-1){t.push(d(L[s]))}o.indentLevel=0}}s=s+1}while(s<I);H.iterator=I-1;return t.join("")})();return j};var Ae={language:{description:"The language name",lexer:"all",type:"select",default:"auto",values:[{rule:"auto",description:"Prettify will automatically detect the language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",lexer:"all",type:"number"},indentSize:{default:2,description:'The number of "indentChar" values to comprise a single indentation.',lexer:"all",type:"number"},indentChar:{default:" ",description:"The string characters to comprise a single indentation. Any string combination is accepted.",lexer:"all",type:"string"},crlf:{default:false,description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",lexer:"all",type:"boolean"},endNewline:{default:false,description:"Insert an empty line at the end of output.",lexer:"all",type:"boolean"},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",lexer:"all",type:"number"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"all",type:"boolean"},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"all",type:"boolean"},quoteConvert:{lexer:"all",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},attributeSort:{default:false,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",lexer:"markup",type:"boolean"},attributeSortList:{default:[],description:"A comma separated list of attribute names. Attributes will be sorted according to this list and then alphanumerically. This option requires 'attributeSort' have a value of true.",lexer:"markup",type:"array"},attributeCasing:{default:"preserve",description:"Controls the casing of attribute values and keys.",type:"select",lexer:"markup",values:[{rule:"preserve",description:"All tag attribute keys/values are preserved and left intact."},{rule:"lowercase",description:"All tag attribute keys/values are converted to lowercase"},{rule:"lowercase-name",description:"Only attribute keys are converted to lowercase"},{rule:"lowercase-value",description:"Only attribute values are converted to lowercase"}]},attributeValues:{default:false,description:"Controls how attribute values should be formatter",type:"select",lexer:"markup",values:[{rule:"preserve",description:"Preserves attribute values, leaving them intact."},{rule:"collapse",description:"Collapsed all space separated attributes values onto newlines"},{rule:"wrap",description:"Collapase attribute values when then exceed wrap limit"},{rule:"strip",description:"Strips newlines and extraneous whitespaces from attribute values"}]},delimiterSpacing:{default:true,description:"Whether or not delimiter characters should apply a single space at the start and end point",lexer:"markup",type:"boolean"},forceAttribute:{default:false,description:"If all markup attributes should be indented each onto their own line. This option accepts either a boolean or number value, depending on your preferences you can either force attributes based a count limit, disable forcing or always enable enforcing.",lexer:"markup",type:["number","boolean"],multi:{number:{default:1,description:"Optionally define an attribute force threshold. When the number of attributes exceeds this limit then they will be forced, otherwise they will be left intact."},boolean:{default:false,description:"Whether or not to enforce the rule. A value of true will always force attributes, whereas a value of false will never force attributes."}}},forceLeadAttribute:{default:false,description:"Forces leading attribute onto a newline when using wrap based indentation.",lexer:"markup",type:"boolean"},forceIndent:{default:false,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",lexer:"markup",type:"boolean"},preserveAttributes:{default:false,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",lexer:"markup",type:"boolean"},preserveText:{default:false,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",lexer:"markup",type:"boolean"},selfCloseSpace:{default:false,description:'Markup self-closing tags end will end with " />" instead of "/>".',lexer:"markup",type:"boolean"},classPadding:{description:"Inserts new line characters between every CSS code block.",default:false,type:"boolean",lexer:"style"},sortSelectors:{default:false,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code.",lexer:"style"},sortProperties:{lexer:"style",description:"This option will alphabetically sort CSS properties contained within classes.",default:false,type:"boolean"},noLeadZero:{lexer:"style",description:"This will eliminate leading zeros from numbers expressed within values.",default:false,type:"boolean"},compressCSS:{lexer:"style",description:"If CSS should be beautified in a style where the properties and values are minifed for faster reading of selectors.",default:false,type:"boolean"},forceValue:{lexer:"style",description:"If CSS selector property values should be indented onto newlines",default:"preserve",type:"select",values:[{rule:"preserve",description:"Preserves property values, output does not augment provided structures"},{rule:"collapse",description:"Collapsed all selector property values onto newlines"},{rule:"wrap",description:"Collapase only selector property values which exceed wrap limit"}]},braceAllman:{lexer:"script",default:false,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:false,description:"This will create a newline before and after objects values",type:"boolean",lexer:"script"},braceNewline:{default:false,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean",lexer:"script"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"select",lexer:"script",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},arrayFormat:{lexer:"script",description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"select",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},objectSort:{default:false,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean",lexer:"script"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"select",lexer:"script",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{lexer:"script",default:true,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{lexer:"script",default:true,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{lexer:"script",default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},caseSpace:{default:false,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code.",lexer:"script"},inlineReturn:{lexer:"script",default:true,type:"boolean",description:"Inlines return statements contained within `if` and `else` conditions. This rules also augments code and will reason about your structure to output the best and most readable results."},elseNewline:{lexer:"script",default:false,type:"boolean",description:'If keyword "else" is forced onto a new line.'},ternaryLine:{lexer:"script",description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:false},neverFlatten:{lexer:"script",default:true,description:"If destructured lists in script should never be flattend.",type:"boolean"},variableList:{lexer:"script",description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each \u2014 Ensure each reference is a single declaration statement.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{lexer:"script",description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:false},noCaseIndent:{lexer:"script",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation, thereby keeping the case on a single line of code.",default:false,type:"boolean"},noSemicolon:{lexer:"script",description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:false,type:"boolean"},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"select",lexer:"script",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]}};var Se={};dt(Se,{format:()=>He,language:()=>Ve,options:()=>Fe,parse:()=>rt});function xt(o){const a=o.source.search(/((\/(\*|\/))|{%-?\s*comment\s*-?%}|<!--)\s*@prettify\s+(\w+)?\s*{\s+/);const f=o.source.search(/((\/(\*|\/))|{%-?\s*comment\s*-?%}|<!--)\s*@prettify-ignore\b/);const e=Ne(Ae);const l=e.length;let m=0;if(f>-1&&o.source.slice(0,f).trimStart()==="")return false;if(a>-1&&(a===0||`"':`.indexOf(o.source.charAt(a-1))<0)){let I=function(){if(t.charAt(r-1)!=="\\")return false;let R=r;do{R=R-1}while(R>0&&t.charAt(R)==="\\");return(r-R)%2===0};const L=[];const j=a;const t=o.source;const i=t.length;let r=j;let q=0;let W="";let s="";let C="";let x="";let d=[];let z=[];let p;let G;if(t.charAt(r)==="<"){G="<!--"}else if(t.charAt(r+1)==="/"){G="//"}else if(t.charAt(r+1)==="%"){p=t.indexOf("}",r+1);if(t[p-1].charCodeAt(0)===37)G=t.slice(r,p+1)}else{G="/*"}do{if(t.slice(r-9,r)==="@prettify")break;r=r+1}while(r<i);do{if(I()===false){if(W===""){if(t.charAt(r)==='"'||t.charAt(r)==="'"||t.charAt(r)==="`"){W=t.charAt(r);if(L.length>0&&L[L.length-1].charAt(L[L.length-1].length-1)===":")q=r}else if(/\s/.test(t.charAt(r))===false&&q===0){q=r}else if(t.charAt(r)===","||/\s/.test(t.charAt(r))===true&&q>0){s=t.slice(q,r);if(L.length>0){if(L.length>0&&s===":"&&L[L.length-1].indexOf(":")<0){L[L.length-1]=L[L.length-1]+s;q=r}else if(L.length>0&&L[L.length-1].charAt(L[L.length-1].length-1)===":"){L[L.length-1]=L[L.length-1]+s;q=0}else{L.push(s);q=0}}else{L.push(s);q=0}}if(G==="<!--"&&t.slice(r-2,r+1)==="-->")break;if(G==="//"&&t.charAt(r)==="\n")break;if(G==="/*"&&t.slice(r-1,r+1)==="*/")break;if(G.charCodeAt(1)===37&&t.slice(r-1,r+1)==="%"&&t.indexOf("endcomment",t.indexOf("{%",p))>0)break}else if(t.charAt(r)===W&&W!=="${"){W=""}else if(W==="`"&&t.slice(r,r+2)==="${"){W="${"}else if(W==="${"&&t.charAt(r)==="}"){W="`"}}r=r+1}while(r<i);if(q>0){W=t.slice(q,r+1);if(G==="<!--")W=W.replace(/\s*-+>$/,"");else if(G==="//")W=W.replace(/\s+$/,"");else W=W.replace(/\s*\u002a\/$/,"");L.push(W)}r=L.length;if(r>0){do{r=r-1;if(L[r].indexOf(":")>0){z=[L[r].slice(0,L[r].indexOf(":")),L[r].slice(L[r].indexOf(":")+1)]}else if(Ae[L[r]]!==void 0&&Ae[L[r]].type==="boolean"){o.options[L[r]]=true}if(z.length===2&&Ae[z[0]]!==void 0){if(z[1].charAt(z[1].length-1)===z[1].charAt(0)&&(z[1].charAt(0)==='"'||z[1].charAt(0)==="'"||z[1].charAt(0)==="`")){z[1]=z[1].slice(1,z[1].length-1)}if(Ae[z[0]].type==="number"&&isNaN(Number(z[1]))===false){o.options[z[0]]=Number(z[1])}else if(Ae[z[0]].type==="boolean"){o.options[z[0]]=z[1]==="true"}else{if(Ae[z[0]].values!==void 0){d=Ne(Ae[z[0]].values);q=d.length;do{q=q-1;if(d[q]===z[1]){o.options[z[0]]=z[1];break}}while(q>0)}else{if(z[0]==="language"){C=z[1]}else if(z[0]==="lexer"){x=z[1]}o.options[z[0]]=z[1]}}}}while(r>0);if(x===""&&C!=="")x=st(C)}}if(o.options.lexer==="script"){if(o.options.script.styleGuide!==void 0){switch(o.options.script.styleGuide){case"airbnb":o.options.wrap=80;o.options.indentChar=" ";o.options.indentSize=2;o.options.preserveLine=1;o.options.script.correct=true;o.options.script.quoteConvert="single";o.options.script.variableList="each";o.options.script.endComma="always";o.options.script.bracePadding=true;break;case"crockford":o.options.indentChar=" ";o.options.indentSize=4;o.options.script.correct=true;o.options.script.bracePadding=false;o.options.script.elseNewline=false;o.options.script.endComma="never";o.options.script.noCaseIndent=true;o.options.script.functionSpace=true;o.options.script.variableList="each";o.options.script.vertical=false;break;case"google":o.options.wrap=-1;o.options.indentChar=" ";o.options.indentSize=4;o.options.preserveLine=1;o.options.script.correct=true;o.options.script.quoteConvert="single";o.options.script.vertical=false;break;case"jquery":o.options.wrap=80;o.options.indentChar="	";o.options.indentSize=1;o.options.script.correct=true;o.options.script.bracePadding=true;o.options.script.quoteConvert="double";o.options.script.variableList="each";break;case"jslint":o.options.indentChar=" ";o.options.indentSize=4;o.options.script.correct=true;o.options.script.bracePadding=false;o.options.script.elseNewline=false;o.options.script.endComma="never";o.options.script.noCaseIndent=true;o.options.script.functionSpace=true;o.options.script.variableList="each";o.options.script.vertical=false;break;case"standard":o.options.wrap=0;o.options.indentChar=" ";o.options.indentSize=2;o.options.endNewline=false;o.options.preserveLine=1;o.options.script.correct=true;o.options.script.noSemicolon=true;o.options.script.endComma="never";o.options.script.braceNewline=false;o.options.script.bracePadding=false;o.options.script.braceAllman=false;o.options.script.quoteConvert="single";o.options.script.functionSpace=true;o.options.script.ternaryLine=false;o.options.script.variableList="each";o.options.script.vertical=false;break;case"yandex":o.options.script.correct=true;o.options.script.bracePadding=false;o.options.script.quoteConvert="single";o.options.script.variableList="each";o.options.script.vertical=false;break}}if(o.options.script.braceStyle!==void 0){switch(o.options.script.braceStyle){case"collapse":o.options.script.braceNewline=false;o.options.script.bracePadding=false;o.options.script.braceAllman=false;o.options.script.objectIndent="indent";o.options.script.neverFlatten=true;break;case"collapse-preserve-inline":o.options.script.braceNewline=false;o.options.script.bracePadding=true;o.options.script.braceAllman=false;o.options.script.objectIndent="indent";o.options.script.neverFlatten=false;break;case"expand":o.options.script.braceNewline=false;o.options.script.bracePadding=false;o.options.script.braceAllman=true;o.options.script.objectIndent="indent";o.options.script.neverFlatten=true;break}}if(o.options.language==="json")o.options.wrap=0}do{if(o.options[Ne[m]]!==void 0){Ae[Ne[m]].lexer.length}m=m+1}while(m<l)}function wt(o){const{source:a,options:f}=o;const{lexer:e,language:l}=f;if(typeof o.lexers[e]==="function"){o.lexers[e](`${a} `)}else{n.error=`Specified lexer, ${e}, is not a function.`}let m=0;let I=0;const L=Ne(n.data);const j=L.length;do{I=m+1;do{if(n.data[L[m]].length!==n.data[L[I]].length){n.error=`"${L[m]}" array is of different length than "${L[I]}"`;break}I=I+1}while(I<j);m=m+1}while(m<j-1);if(n.data.begin.length>0){if(e==="script"&&(l==="json"&&f.json.objectSort===true||f.language!=="json"&&f.script.objectSort===true)){n.sortCorrection(0,n.count+1)}else if(e==="style"&&f.style.sortProperties){n.sortCorrection(0,n.count+1)}}return n.data}function nt(o){const a=Date.now();const f={language:o,chars:-1};return e=>{f.chars=e;f.size=kt(e);f.time=(Date.now()-a).toFixed(1);return f}}function vt(o){const{languageName:a}=ke(o.options.language);const f=o.options.crlf===true?"\r\n":"\n";const e=o.source.match(/\n/g);const l=nt(a);let m=v;if(e===null){if(o.options.endNewline)m=f;o.stats=l(m.length)}else{m=e[0].length>o.options.preserveLine?Te(o.options.preserveLine,f):Te(e[0].length,f);if(o.options.endNewline)m+=f;o.stats=l(m.length)}return m}function it(o){o.data=n.init();if(!/\S/.test(o.source))return vt(o);if(o.options.language==="text"){o.options.language="text";o.options.languageName="Plain Text";o.options.lexer="markup"}else if(o.options.language==="auto"||o.options.language===void 0){const{lexer:m,language:I,languageName:L}=Ve(o.source);if(I==="unknown"){console.warn("Prettify: unknown and/or unsupport language");console.info("Prettify: define a support language (fallback is HTML)")}o.options.lexer=m;o.options.language=I;o.options.languageName=L}else{const{lexer:m,language:I,languageName:L}=ke(o.options.language);if(I==="unknown"){console.warn(`Prettify: unsupport ${o.options.language}`);console.info("Prettify: language is not supported (fallback is HTML)")}o.options.lexer=m;o.options.language=I;o.options.languageName=L}const a=nt(o.options.languageName);const f=o.mode;const e=o.options.crlf===true?"\r\n":"\n";let l=o.source;if(xt(o)===false){o.stats=a(l.length);return l}o.data=wt(o);if(f==="parse"){o.stats=a(l.length);return n.data}l=o.beautify[o.options.lexer](o.options);l=o.options.endNewline===true?l.replace(/\s*$/,e):l.replace(/\s+$/,v);o.stats=a(l.length);o.end=0;o.start=0;return l}He.before=o=>H.hooks.before.push(o);He.after=o=>H.hooks.after.push(o);Fe.listen=o=>H.hooks.rules.push(o);Ge(He,"stats",{get(){return H.stats}});Ge(rt,"stats",{get(){return H.stats}});Ge(Fe,"rules",{get(){return H.options}});function He(o,a){H.source=o;if(typeof a==="object")H.options=Fe(a);if(H.hooks.before.length>0){for(const e of H.hooks.before){if(e(H.options,o)===false)return o}}const f=it(H);if(H.hooks.after.length>0){for(const e of H.hooks.after){if(e.call(n.data,f,H.options)===false)return o}}return new Promise((e,l)=>{if(n.error.length)return l(n.error);return e(f)})}function Fe(o){for(const a of Ne(o)){if(a in Ae&&Ae[a].lexer==="auto"){H.options[a]=o[a]}else if(a==="markup"){Ie(H.options.markup,o.markup)}else if(a==="script"){Ie(H.options.script,o.script)}else if(a==="style"){Ie(H.options.style,o.style)}else if(a==="json"){Ie(H.options.json,o.json)}else if(a==="grammar"){pe.extend(o.grammar)}else if(a in H.options){H.options[a]=o[a]}}if(H.hooks.rules.length>0){for(const a of H.hooks.rules)a(H.options)}return H.options}function rt(o,a){H.source=o;H.mode="parse";if(typeof a==="object")H.options=Fe(a);const f=it(H);return new Promise((e,l)=>{if(n.error.length)return l(n.error);return e(f)})}var ve=require("vscode");var ot=Ze(require("path"));var Re=Ze(require("fs"));var Pe=require("vscode");var ze=class{constructor(){this.error=false;this.barItem=Pe.window.createStatusBarItem(Pe.StatusBarAlignment.Right,-2);this.outputChannel=Pe.window.createOutputChannel("Liquid")}statusBarItem(a,f){const e={enabled:{text:"\u{1F4A7} Liquid: $(check)",tooltip:"Enable/Disable Liquid Formatting",command:"liquid.disableFormatting"},disabled:{text:"\u{1F4A7} Liquid: $(x)",tooltip:"Enable Liquid Formatting",command:"liquid.enableFormatting"},error:{text:"\u26A0\uFE0F Liquid: $(check)",tooltip:"Errors detected! Toggle output",command:"liquid.toggleOutput"}};Object.assign(this.barItem,e[a]);if(f!==void 0)return f?this.barItem.show():this.barItem.hide()}outputLog({title:a,message:f,show:e=false}){const l=new Date().toLocaleString();this.outputChannel.appendLine(`[${l}] ${a}: ${f}`);if(e){this.error=true;this.statusBarItem("error");this.outputChannel.show()}}};var Me=class extends ze{constructor(){super();this.liquid=ve.workspace.getConfiguration("liquid");this.format=false;this.watch=false;this.error=false;this.reset=false;this.config={};this.liquid=ve.workspace.getConfiguration("liquid");this.format=this.liquid.get("format");if(ve.workspace.workspaceFolders!==void 0){this.rcfile=ot.default.join(ve.workspace.workspaceFolders[0].uri.fsPath,".liquidrc")}this.watch=false;this.error=false;this.reset=false}setFormattingRules(){var f;if(!Re.default.existsSync(this.rcfile)){const e=ve.workspace.getConfiguration("liquid");const l=e.get("rules");Se.options(l);this.config=(f=Se.options)==null?void 0:f.rules}else{try{const e=Re.default.readFileSync(this.rcfile,"utf8");const l=JSON.parse(e);Se.options(l.prettify);this.outputLog({title:"Prettify",message:"Updated Formatting Rules"});this.error=false}catch(e){this.outputLog({title:"Error reading formatting rules",file:this.rcfile,message:e.message,show:true})}finally{this.rcfileWatcher()}}}rcfileWatcher(){if(!this.watch){const f=ve.workspace.createFileSystemWatcher(this.rcfile,true,false,false);f.onDidDelete(()=>this.setFormattingRules());f.onDidChange(()=>{this.reset=true;this.setFormattingRules()});this.watch=true}}async rcfileGenerate(){if(Re.default.existsSync(this.rcfile)){const l=await ve.window.showErrorMessage(".liquidrc file already exists!","Open");if(l==="Open"){ve.workspace.openTextDocument(this.rcfile).then(m=>{ve.window.showTextDocument(m,1,false)},m=>{return console.error(m)})}}const f=Object.assign({},Se.options.rules);delete f.lexer;delete f.language;delete f.languageName;delete f.mode;delete f.indentLevel;delete f.grammar;delete f.script.commentNewline;delete f.script.objectSort;delete f.script.vertical;delete f.script.variableList;delete f.style.forceValue;delete f.style.quoteConvert;delete f.style.compressCSS;delete f.json.objectSort;f.indentSize=ve.workspace.getConfiguration("editor").get("tabSize");const e=JSON.stringify({prettify:f},null,2);Re.default.writeFile(this.rcfile,e,l=>{if(l){return this.outputLog({title:"Error generating rules",file:this.rcfile,message:l.message,show:true})}ve.workspace.openTextDocument(this.rcfile).then(m=>{ve.window.showTextDocument(m,1,false)},m=>{return console.error(m)}).then(()=>{this.rcfileWatcher();return ve.window.showInformationMessage("You are now using a .liquidrc file to define formatting rules \u{1F44D}")})})}};var $e=class extends Me{async completeDocument(){if(_e.window.activeTextEditor===void 0)return;const{activeTextEditor:a}=_e.window;const{document:f}=a;const e=$e.range(f);const l=f.getText(e);try{const m=await Se.format(l,{language:f.languageId});await a.edit(I=>I.replace(e,m))}catch(m){this.outputLog({title:"Prettify",message:`${m}`})}}async selectedText(){if(_e.window.activeTextEditor===void 0)return;const{activeTextEditor:a}=_e.window;const{document:f,selection:e}=a;const l=f.getText(e);try{const m=await Se.format(l);await a.edit(I=>I.replace(e,m))}catch(m){this.outputLog({title:"Prettify",message:`${m}`})}}static range(a){const f=a.getText().length-1;const e=a.positionAt(0);const l=a.positionAt(f);return new _e.Range(e,l)}};var De=class extends $e{constructor(){super();this.handler={};this.setFormattingRules()}onConfigChanges(){this.error=false;this.dispose();this.setFormattingRules();this.onOpenTextDocument()}onOpenTextDocument(){if(xe.window.activeTextEditor===void 0)return;const{fileName:f,languageId:e}=xe.window.activeTextEditor.document;if(this.error)this.statusBarItem("error",true);if(e!=="html"){this.dispose();this.barItem.hide();return}if(!xe.workspace.getConfiguration("editor").formatOnSave){this.format=false}if(!this.format){this.dispose();this.statusBarItem("disabled",true);return}if(f in this.handler)this.handler[f].dispose();if(!this.error&&this.format)this.statusBarItem("enabled",true);this.handler[f]=xe.languages.registerDocumentFormattingEditProvider({scheme:"file",language:"html"},{async provideDocumentFormattingEdits(l,m,I){const L=$e.range(l);const j=l.getText(L);try{const t=await Se.format(j,{language:l.languageId});return[xe.TextEdit.replace(L,t)]}catch(t){this.outputLog({title:"Prettify",message:`${t}`})}}})}dispose(){for(const f in this.handler)if(f in this.handler)this.handler[f].dispose()}selection(){try{this.selectedText();xe.window.showInformationMessage("Selection Formatted \u{1F4A7}")}catch(f){xe.window.showInformationMessage("Format Failed! The selection is invalid or incomplete!");this.outputChannel.appendLine(`\u{1F4A7} Liquid: ${f}`)}}liquidrc(){return this.rcfileGenerate()}async document(){try{await this.completeDocument();xe.window.showInformationMessage("Document Formatted \u{1F4A7}")}catch(f){console.log(f);xe.window.showInformationMessage("Document could not be formatted, check your code!");this.outputChannel.appendLine(`\u{1F4A7} Liquid: ${f}`)}}output(){return this.outputChannel.show()}async enable(){this.format=true;await this.liquid.update("format",this.format,xe.ConfigurationTarget.Global);return await xe.window.showInformationMessage("Liquid Formatting Enabled \u{1F4A7}")}async disable(){this.format=false;await this.liquid.update("format",this.format,xe.ConfigurationTarget.Global);return await xe.window.showInformationMessage("Liquid Formatting Disabled \u{1F4A7}")}};exports.activate=o=>{const{registerCommand:a}=Le.commands;const f=o.subscriptions;const e=Le.window.activeTextEditor;const l=new De;const{liquidrc:m,onConfigChanges:I,onOpenTextDocument:L,disable:j,enable:t,selection:i,output:r}=l;f.push(a("liquid.liquidrc",m.bind(l)));if(!e||!e.document)return;f.push(Le.workspace.onDidChangeConfiguration(I.bind(l)));f.push(Le.workspace.onDidOpenTextDocument(L.bind(l)));f.push(a("liquid.disableFormatting",j.bind(l)));f.push(a("liquid.enableFormatting",t.bind(l)));f.push(a("liquid.formatSelection",i.bind(l)));f.push(a("liquid.toggleOutput",r.bind(l)))};
