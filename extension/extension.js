"use strict";var lt=Object.create;var Qe=Object.defineProperty;var at=Object.getOwnPropertyDescriptor;var ct=Object.getOwnPropertyNames;var ft=Object.getPrototypeOf;var ut=Object.prototype.hasOwnProperty;var pt=(o,a,c,e)=>{if(a&&typeof a==="object"||typeof a==="function"){for(let l of ct(a))if(!ut.call(o,l)&&l!==c)Qe(o,l,{get:()=>a[l],enumerable:!(e=at(a,l))||e.enumerable})}return o};var Ke=(o,a,c)=>(c=o!=null?lt(ft(o)):{},pt(a||!o||!o.__esModule?Qe(c,"default",{value:o,enumerable:true}):c,o));var qe=require("vscode");var xe=require("vscode");var _e=require("vscode");var ht=Object.defineProperty;var dt=(o,a)=>{for(var c in a)ht(o,c,{get:a[c],enumerable:true})};var H=function(){const o=typeof process!=="undefined"&&process.versions!=null?"node":"browser";let a="";return{env:o,mode:"beautify",end:0,iterator:0,start:0,scopes:[],beautify:{},lexers:{},get source(){return o==="node"&&Buffer.isBuffer(a)?a.toString():a},set source(c){a=o==="node"?Buffer.isBuffer(c)?c:Buffer.from(c):c},data:{begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]},hooks:{before:[],language:[],rules:[],after:[]},stats:{chars:-1,time:-1,size:"",language:""},options:{lexer:"auto",language:"text",languageName:"Plain Text",mode:"beautify",indentLevel:0,crlf:false,commentIndent:true,endNewline:false,indentChar:" ",indentSize:2,preserveComment:false,preserveLine:2,wrap:0,grammar:{html:{tags:[],voids:[],embedded:{}},liquid:{tags:[],else:[],singletons:[],embedded:{}},script:{keywords:[]},style:{units:[]}},markup:{correct:false,commentNewline:false,attributeValues:"preserve",attributeSort:false,attributeSortList:[],forceAttribute:false,forceLeadAttribute:false,forceIndent:false,preserveText:false,preserveAttributes:false,selfCloseSpace:false,quoteConvert:"none"},style:{correct:false,compressCSS:false,classPadding:false,noLeadZero:false,sortSelectors:false,sortProperties:false,quoteConvert:"none",forceValue:"preserve"},script:{correct:false,braceNewline:false,bracePadding:false,braceStyle:"none",braceAllman:false,commentNewline:false,caseSpace:false,inlineReturn:true,elseNewline:false,endComma:"never",arrayFormat:"default",objectSort:false,objectIndent:"default",functionNameSpace:false,functionSpace:false,styleGuide:"none",ternaryLine:false,methodChain:4,neverFlatten:false,noCaseIndent:false,noSemicolon:false,quoteConvert:"none",variableList:"none",vertical:false},json:{arrayFormat:"default",braceAllman:false,bracePadding:false,objectIndent:"default",objectSort:false}}}}();var v="";var Le=Object.assign;var Se=Object.create;var Ne=Object.keys;var Be=Object.defineProperty;var Je=Array.isArray;var we;var pe=new(we=class{constructor(){this.html={};this.liquid={};this.script={};this.style={};this.script.keywords=new Set(we.defaults.script.keywords);this.style.units=new Set(we.defaults.style.units);this.html.tags=new Set(we.defaults.html.tags);this.html.voids=new Set(we.defaults.html.voids);this.html.embed={};this.liquid.tags=new Set(we.defaults.liquid.tags);this.liquid.else=new Set(we.defaults.liquid.else);this.liquid.singletons=new Set(we.defaults.liquid.singletons);this.liquid.embed={};this.defaults()}embed(o,a){return a in this[o].embed}defaults(){for(const o in we.defaults.html.embedded){this.html.embed[o]={};for(const{language:a,attribute:c=null}of we.defaults.html.embedded[o]){this.html.embed[o].language=a;if(typeof c==="object"){for(const e in c){this.html.embed[o].attribute=e;if(Array.isArray(c[e])){this.html.embed[o].value=l=>new Set(c[e]).has(l)}else{this.html.embed[o].value=l=>new RegExp(c[e]).test(l)}}}else{this.html.embed[o].attribute=null}}}for(const o in we.defaults.liquid.embedded){this.liquid.embed[o]={end:a=>new RegExp(`^{%-?\\s*end${o}`).test(a)};for(const{language:a,argument:c}of we.defaults.liquid.embedded[o]){this.liquid.embed[o].language=a;if(c){if(Array.isArray(c)){this.liquid.embed[o].attribute=e=>new Set(c).has(e)}else{this.liquid.embed[o].attribute=e=>new RegExp(c).test(e)}}else{this.liquid.embed[o].attribute=null}}}}extend(o){for(const a in o){if(a==="html"){if("tags"in o[a]&&Array.isArray(o[a].tags)){for(const c of o[a].tags){if(!this.html.tags.has(c))this.html.tags.add(c)}}if("voids"in o[a]&&Array.isArray(o[a].voids)){for(const c of o[a].voids){if(!this.html.voids.has(c))this.html.voids.add(c)}}if("embedded"in o[a]);}if(a==="liquid"){if("tags"in o[a]&&Array.isArray(o[a].tags)){for(const c of o[a].tags){if(!this.liquid.tags.has(c))this.liquid.tags.add(c)}}if("else"in o[a]&&Array.isArray(o[a].else)){for(const c of o[a].else){if(!this.liquid.else.has(c))this.liquid.else.add(c)}}if("singletons"in o[a]&&Array.isArray(o[a].singletons)){for(const c of o[a].singletons){if(!this.liquid.singletons.has(c))this.liquid.singletons.add(c)}}if("embedded"in o[a]&&typeof o[a].embedded==="object"){for(const c in o[a].embedded){if(!(c in this.liquid.embed)){this.liquid.embed[c]={end:e=>new RegExp(`{%-?\\s*end${c}`).test(e)}}for(const{language:e,argument:l}of o[a].embedded[c]){if(this.liquid.embed[c].language!==e){this.liquid.embed[c].language=e}if(l){if(this.liquid.embed[c].attribute===null){if(Array.isArray(l)){this.liquid.embed[c].attribute=b=>new Set(l).has(b)}else{this.liquid.embed[c].attribute=b=>new RegExp(l).test(b)}}else{const b=[];for(const L of we.defaults.liquid.embedded[c]){if(Array.isArray(L.argument)){for(const q of L.argument){if(l!==q)b.push(l);else b.push(q)}this.liquid.embed[c].attribute=q=>new Set(b).has(q)}else{if(L.argument!==l){this.liquid.embed[c].attribute=q=>new RegExp(l).test(q)}}}}}}}}}if(a==="style"){if("units"in o[a]&&Array.isArray(o[a].units)){for(const c of o[a].units){if(!this.style.units.has(c))this.style.units.add(c)}}}if(a==="script"){if("keywords"in o[a]&&Array.isArray(o[a].keywords)){for(const c of o[a].keywords){if(!this.script.keywords.has(c))this.script.keywords.add(c)}}}}}},we.defaults={script:{keywords:["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]},style:{units:["%","cap","ch","cm","deg","dpcm","dpi","dppx","em","ex","fr","grad","Hz","ic","in","kHz","lh","mm","ms","mS","pc","pt","px","Q","rad","rem","rlh","s","turn","vb","vh","vi","vmax","vmin","vw"]},html:{embedded:{script:[{language:"javascript"},{language:"json",attribute:{type:["application/json","application/ld+json"]}},{language:"jsx",attribute:{type:["text/jsx","application/jsx"]}}],style:[{language:"css"}]},voids:["area","base","basefont","br","col","embed","eventsource","frame","hr","image","img","input","isindex","keygen","link","meta","path","param","progress","source","wbr","use"],tags:["body","colgroup","dd","dt","head","html","li","option","p","tbody","td","tfoot","th","thead","tr"]},liquid:{embedded:{schema:[{language:"json"}],style:[{language:"css"}],stylesheet:[{language:"css"},{language:"scss",argument:/\s*['"]scss['"]/}],javascript:[{language:"javascript"}]},tags:["case","capture","comment","embed","filter","for","form","if","macro","paginate","raw","switch","tablerow","unless","verbatim","schema","style","javascript","highlight","stylesheet"],else:["default","else","when","elsif"],singletons:["assign","increment","decrement","render","include"]}},we);function gt(o){const a=Se(null);if(o)return Le(a,o);return a}function Ie(o,a=" "){if(o===0)return a;let c=v;let e=1;do{c+=a}while(e++<o);return c}function p(o,a){if(!o)return false;return o.charCodeAt(0)===a}function ie(o,a){return p(o,a)===false}function ue(o){return/\s/.test(o)}function kt(o){const a=1024;const c=1048576;const e=1073741824;if(o<a)return o+" B";else if(o<c)return(o/a).toFixed(1)+" KB";else if(o<e)return(o/c).toFixed(1)+" MB";else return(o/e).toFixed(1)+" GB"}function bt(o){return`\\${o}`}function Ue(o){const a=o.indexOf("{");const c=p(o[a+2],45)?o.slice(a+3).trimStart():o.slice(a+2).trimStart();return c.slice(0,c.search(/\s/))}function mt(o){const a=o.indexOf("{");if(p(o[a+1],37)){let c=p(o[a+2],45)?o.slice(a+3).trimStart():o.slice(a+2).trimStart();c=c.slice(0,c.search(/\s/));if(c.startsWith("end"))return false;return pe.liquid.tags.has(c)}return false}function Ee(o){let a=o;if(Array.isArray(o))a=o.join("");const c=a.indexOf("{");if(p(a[c+1],37)){if(p(a[c+2],45))return a.slice(c+3).trimStart().startsWith("end");return a.slice(c+2).trimStart().startsWith("end")}return false}function Ce(o,a){if(a===1){return p(o[0],123)&&(p(o[1],37)||p(o[1],123))}else if(a===2){return p(o[o.length-1],125)&&(p(o[o.length-2],37)||p(o[o.length-2],123))}else if(a===3){return p(o[0],123)&&(p(o[1],37)||p(o[1],123))&&(p(o[o.length-1],125)&&(p(o[o.length-2],37)||p(o[o.length-2],123)))}else if(a===4){return/{[{%}]/.test(o)}else if(a===5){return/{[{%]/.test(o)&&/[%}]}/.test(o)}}function Ye(o){let a=0;const c=o.length;const e=o;const l=()=>{let L=0;const q=e.length;if(L<q){do{if(Je(e[L])===true)e[L]=Ye.apply(this,e[L]);L=L+1}while(L<q)}};const b=L=>{let q=a;let j=0;let t=0;let i=0;let r=[];let P=e[a];let M="";const n=typeof P;if(q<c){do{M=typeof e[q];if(e[q]<P||M<n){P=e[q];r=[q]}else if(e[q]===P){r.push(q)}q=q+1}while(q<c)}t=r.length;q=a;j=t+a;if(q<j){do{e[r[i]]=e[q];e[q]=P;i=i+1;q=q+1}while(q<j)}a=a+t;if(a<c){b("")}else{if(this.recursive===true)l();o=e}return L};b("");return o}function et(o){let a=0;const c=o.length;const e=o;const l=()=>{let L=0;const q=e.length;if(L<q){do{if(Je(e[L]))e[L]=et.apply(this,e[L]);L=L+1}while(L<q)}};const b=L=>{let q=a;let j=0;let t=0;let i=0;let r=e[a];let P=[];let M="";const n=typeof r;if(q<c){do{M=typeof e[q];if(e[q]>r||M>n){r=e[q];P=[q]}else if(e[q]===r){P.push(q)}q=q+1}while(q<c)}t=P.length;q=a;j=t+a;if(q<j){do{e[P[i]]=e[q];e[q]=r;i=i+1;q=q+1}while(q<j)}a=a+t;if(a<c){b("")}else{if(this.recursive===true)l();o=e}return L};b("");return o}function tt(o){let a=o;const c=[o[0]];const e=()=>{let b=0;const L=a.length;if(b<L){do{if(Je(a[b]))a[b]=tt.apply(this,a[b]);b=b+1}while(b<L)}};const l=b=>{let L=0;const q=[];const j=a.length;if(L<j){do{if(a[L]!==b)q.push(a[L]);L=L+1}while(L<j)}a=q;if(q.length>0){c.push(q[0]);l(q[0])}else{if(this.recursive===true)e();o=a}};l(this.array[0]);return o}var s=new class St{constructor(){this.datanames=["begin","ender","lexer","lines","stack","token","types"];this.data={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};this.structure=[["global",-1]];this.references=[[]];this.count=-1;this.lineNumber=1;this.linesSpace=0;this.error=""}get current(){const{begin:a,ender:c,lexer:e,lines:l,stack:b,token:L,types:q}=this.data;return{begin:a[a.length-1],ender:c[c.length-1],lexer:e[e.length-1],lines:l[l.length-1],stack:b[b.length-1],token:L[a.length-1],types:q[a.length-1]}}init(){this.error="";this.count=-1;this.linesSpace=0;this.lineNumber=1;this.references=[[]];this.data.begin=[];this.data.ender=[];this.data.lexer=[];this.data.lines=[];this.data.stack=[];this.data.token=[];this.data.types=[];this.structure=[["global",-1]];this.structure.pop=()=>{const a=this.structure.length-1;const c=this.structure[a];if(a>0)this.structure.splice(a,1);return c};return this.data}concat(a,c){for(const e of this.datanames)a[e]=a[e].concat(c[e]);if(a===this.data)this.count=a.token.length-1}objectSort(a){let c=this.count;let e=this.structure[this.structure.length-1][1];let l=0;let b=0;let L=0;let q=0;let j=true;let t=0;let i=0;let r=0;const P=[];const M=e;const n=H.options.language==="json";const C=a.lexer[c]==="style"&&this.structure[this.structure.length-1][0]==="global";const x=a.lexer[c]==="style";const d=x===true?[";","separator"]:[",","separator"];const F=this.linesSpace;const u=this.count;const B=C===true?"global":this.structure[this.structure.length-1][0];function D(g,k){let O=g[0];let R=k[0];if(a.types[O]==="comment"){do{O=O+1}while(O<u&&a.types[O]==="comment");if(a.token[O]===void 0){return 1}}if(a.types[R]==="comment"){do{R=R+1}while(R<u&&a.types[R]==="comment");if(a.token[R]===void 0)return 1}if(x===true){if(a.token[O].indexOf("@import")===0||a.token[R].indexOf("@import")===0){return O<R?-1:1}if(a.types[O]!==a.types[R]){if(a.types[O]==="function")return 1;if(a.types[O]==="variable")return-1;if(a.types[O]==="selector")return 1;if(a.types[O]==="property"&&a.types[R]!=="variable")return-1;if(a.types[O]==="mixin"&&a.types[R]!=="property"&&a.types[R]!=="variable")return-1}}if(a.token[O].toLowerCase()>a.token[R].toLowerCase())return 1;return-1}const f={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};q=c;do{if(a.begin[c]===e||C===true&&c<q&&a.token[c]==="}"&&a.begin[a.begin[c]]===-1){if(a.types[c].indexOf("template")>-1)return;if(a.token[c]===d[0]||x===true&&a.token[c]==="}"&&a.token[c+1]!==";"){j=true;t=c+1}else if(x===true&&a.token[c-1]==="}"){j=true;t=c}if(t===0&&a.types[0]==="comment"){do{t=t+1}while(a.types[t]==="comment")}else if(a.types[t]==="comment"&&a.lines[t]<2){t=t+1}if(j===true&&(a.token[c]===d[0]||x===true&&a.token[c-1]==="}")&&t<=q){if(x===true&&"};".indexOf(a.token[q])<0){q=q+1}else if(x===false&&a.token[q]!==","){q=q+1}P.push([t,q]);if(x===true&&a.token[t]==="}"){q=t}else{q=t-1}}}c=c-1}while(c>e);if(P.length>0&&P[P.length-1][0]>c+1){l=P[P.length-1][0]-1;if(a.types[l]==="comment"&&a.lines[l]>1){do{l=l-1}while(l>0&&a.types[l]==="comment");P[P.length-1][0]=l+1}if(a.types[c+1]==="comment"&&c===-1){do{c=c+1}while(a.types[c+1]==="comment")}P.push([c+1,l])}if(P.length>1){if(n===true||x===true||a.token[c-1]==="="||a.token[c-1]===":"||a.token[c-1]==="("||a.token[c-1]==="["||a.token[c-1]===","||a.types[c-1]==="word"||c===0){P.sort(D);r=P.length;j=false;e=0;do{i=P[e][1];if(x===true){L=i;if(a.types[L]==="comment")L=L-1;if(a.token[L]==="}"){i=i+1;d[0]="}";d[1]="end"}else{d[0]=";";d[1]="separator"}}l=P[e][0];if(x===true&&a.types[i-1]!=="end"&&a.types[i]==="comment"&&a.types[i+1]!=="comment"&&e<r-1){i=i+1}if(l<i){do{if(x===false&&e===r-1&&l===i-2&&a.token[l]===","&&a.lexer[l]==="script"&&a.types[l+1]==="comment"){b=b+1}else{this.push(f,{begin:a.begin[l],ender:a.ender[l],lexer:a.lexer[l],lines:a.lines[l],stack:a.stack[l],token:a.token[l],types:a.types[l]});b=b+1}if(a.token[l]===d[0]&&(x===true||a.begin[l]===a.begin[P[e][0]])){j=true}else if(a.token[l]!==d[0]&&a.types[l]!=="comment"){j=false}l=l+1}while(l<i)}if(j===false&&f.token[f.token.length-1]!=="x;"&&(x===true||e<r-1)){l=f.types.length-1;if(f.types[l]==="comment"){do{l=l-1}while(l>0&&f.types[l]==="comment")}l=l+1;this.splice({data:f,howmany:0,index:l,record:{begin:M,stack:B,ender:this.count,lexer:f.lexer[l-1],lines:0,token:d[0],types:d[1]}});b=b+1}e=e+1}while(e<r);this.splice({data:a,howmany:b,index:c+1});this.linesSpace=F;this.concat(a,f)}}}pop(a){const c={begin:a.begin.pop(),ender:a.ender.pop(),lexer:a.lexer.pop(),lines:a.lines.pop(),stack:a.stack.pop(),token:a.token.pop(),types:a.types.pop()};if(a===this.data)this.count=this.count-1;return c}push(a,c,e=""){const l=()=>{let b=this.count;const L=a.begin[b];if(a.lexer[b]==="style"&&H.options.style.sortProperties===true||a.lexer[b]==="script"&&(H.options.script.objectSort===true||H.options.json.objectSort===true)){return}do{if(a.begin[b]===L||a.begin[a.begin[b]]===L&&a.types[b].indexOf("attribute")>-1&&a.types[b].indexOf("attribute_end")<0){a.ender[b]=this.count}else{b=a.begin[b]}b=b-1}while(b>L);if(b>-1)a.ender[b]=this.count};this.datanames.forEach(b=>a[b].push(c[b]));if(a===this.data){this.count=this.count+1;this.linesSpace=0;if(c.lexer!=="style"){if(e.replace(/(\{|\}|@|<|>|%|#|)/g,"")===""){e=c.types==="else"?"else":e=c.token}}if(c.types==="start"||c.types.indexOf("_start")>0){this.structure.push([e,this.count])}else if(c.types==="end"||c.types.indexOf("_end")>0){let b=0;if(this.structure.length>2&&(a.types[this.structure[this.structure.length-1][1]]==="else"||a.types[this.structure[this.structure.length-1][1]].indexOf("_else")>0)&&(a.types[this.structure[this.structure.length-2][1]]==="start"||a.types[this.structure[this.structure.length-2][1]].indexOf("_start")>0)&&(a.types[this.structure[this.structure.length-2][1]+1]==="else"||a.types[this.structure[this.structure.length-2][1]+1].indexOf("_else")>0)){this.structure.pop();a.begin[this.count]=this.structure[this.structure.length-1][1];a.stack[this.count]=this.structure[this.structure.length-1][0];a.ender[this.count-1]=this.count;b=a.ender[a.begin[this.count]+1]}l();if(b>0)a.ender[a.begin[this.count]+1]=b;this.structure.pop()}else if(c.types==="else"||c.types.indexOf("_else")>0){if(e==="")e="else";if(this.count>0&&(a.types[this.count-1]==="start"||a.types[this.count-1].indexOf("_start")>0)){this.structure.push([e,this.count])}else{l();if(e===""){this.structure[this.structure.length-1]=["else",this.count]}else{this.structure[this.structure.length-1]=[e,this.count]}}}}}safeSort(a,c,e){if(Je(a)===false)return a;if(c==="normal"){return tt.call({array:a,recursive:e},a)}else if(c==="descend"){return et.call({recursive:e},a)}return Ye.call({recursive:e},a)}sortCorrection(a,c){let e=a;let l=-1;const b=this.data;const L=[];const q=this.structure.length<2?[-1]:[this.structure[this.structure.length-2][1]];do{if(e>0&&b.types[e].indexOf("attribute")>-1&&b.types[e].indexOf("end")<0&&b.types[e-1].indexOf("start")<0&&b.types[e-1].indexOf("attribute")<0&&b.lexer[e]==="markup"){q.push(e-1)}if(e>0&&b.types[e-1].indexOf("attribute")>-1&&b.types[e].indexOf("attribute")<0&&b.lexer[q[q.length-1]]==="markup"&&b.types[q[q.length-1]].indexOf("start")<0){q.pop()}if(b.begin[e]!==q[q.length-1]){if(q.length>0){b.begin[e]=q[q.length-1]}else{b.begin[e]=-1}}if(b.types[e].indexOf("else")>-1){if(q.length>0){q[q.length-1]=e}else{q.push(e)}}if(b.types[e].indexOf("end")>-1)q.pop();if(b.types[e].indexOf("start")>-1)q.push(e);e=e+1}while(e<c);e=c;do{e=e-1;if(b.types[e].indexOf("end")>-1){L.push(e);l=l+1}b.ender[e]=l>-1?L[l]:-1;if(b.types[e].indexOf("start")>-1){L.pop();l=l-1}}while(e>a)}spacer(a){this.linesSpace=1;do{if(a.array[a.index]==="\n"){this.linesSpace=this.linesSpace+1;this.lineNumber=this.lineNumber+1}if(ue(a.array[a.index+1])===false)break;a.index=a.index+1}while(a.index<a.end);return a.index}splice(a){const c=[this.data.begin[this.count],this.data.token[this.count]];if(a.record!==void 0&&a.record.token!==""){for(const e of this.datanames){a.data[e].splice(a.index,a.howmany,a.record[e])}if(a.data===this.data){this.count=this.count-a.howmany+1;if(c[0]!==this.data.begin[this.count]||c[1]!==this.data.token[this.count]){this.linesSpace=0}}return}for(const e of this.datanames){a.data[e].splice(a.index,a.howmany)}if(a.data===this.data){this.count=this.count-a.howmany;this.linesSpace=0}}wrapCommentBlock(a){const{wrap:c,crlf:e,preserveComment:l}=H.options;const b=[];const L=[];const q=e===true?"\r\n":"\n";const j=/(\/|\\|\||\*|\[|\]|\{|\})/g;const t=/{%-?\s*|\s*-?%}/g;let i=a.start;let r=0;let P=0;let M=0;let n=0;let C=[];let x="";let d="";let F=false;let u=false;let B=false;let D=false;let f="";let g=a.terminator.length-1;let k=a.terminator.charAt(g);let O=0;let R;const _=a.opening.replace(j,bt);const z=new RegExp(`^(${_}\\s*@prettify-ignore-start)`);const $=new RegExp(`(${_}\\s*)`);const oe=p(a.opening[0],123)&&p(a.opening[1],37);if(oe){R=new RegExp(`\\s*${a.terminator.replace(t,K=>{if(K.charCodeAt(0)===123)return"{%-?\\s*";return"\\s*-?%}"})}$`)}const G=()=>{if(/^\s+$/.test(C[r+1])||C[r+1]===""){do{r=r+1}while(r<n&&(/^\s+$/.test(C[r+1])||C[r+1]===""))}if(r<n-1)L.push("")};do{b.push(a.chars[i]);if(a.chars[i]==="\n")this.lineNumber=this.lineNumber+1;if(a.chars[i]===k&&a.chars.slice(i-g,i+1).join("")===a.terminator)break;i=i+1}while(i<a.end);f=b.join("");if(z.test(f)===true){let K="\n";i=i+1;do{b.push(a.chars[i]);if(b.slice(b.length-20).join("")==="@prettify-ignore-end"){if(oe){const le=a.chars.indexOf("{",i);if(p(a.chars[le+1],37)){const Z=a.chars.slice(le,a.chars.indexOf("}",le+1)+1).join("");if(R.test(Z))a.terminator=Z}}i=i+1;break}i=i+1}while(i<a.end);r=i;g=a.opening.length-1;k=a.opening.charAt(g);do{if(a.opening==="/*"&&a.chars[r-1]==="/"&&(a.chars[r]==="*"||a.chars[r]==="/"))break;if(a.opening!=="/*"&&a.chars[r]===k&&a.chars.slice(r-g,r+1).join("")===a.opening)break;r=r-1}while(r>a.start);if(a.opening==="/*"&&a.chars[r]==="*"){K="*/"}else if(a.opening!=="/*"){K=a.terminator}g=K.length-1;k=K.charAt(g);if(K!=="\n"||a.chars[i]!=="\n"){do{b.push(a.chars[i]);if(K==="\n"&&a.chars[i+1]==="\n")break;if(a.chars[i]===k&&a.chars.slice(i-g,i+1).join("")===K)break;i=i+1}while(i<a.end)}if(a.chars[i]==="\n")i=i-1;f=b.join("").replace(/\s+$/,"");return[f,i]}if(l===true||c<1||i===a.end||f.length<=c&&f.indexOf("\n")<0||a.opening==="/*"&&f.indexOf("\n")>0&&f.replace("\n","").indexOf("\n")>0&&/\n(?!(\s*\*))/.test(f)===false){return[f,i]}r=a.start;if(r>0&&a.chars[r-1]!=="\n"&&ue(a.chars[r-1])){do{r=r-1}while(r>0&&a.chars[r-1]!=="\n"&&ue(a.chars[r-1]))}x=a.chars.slice(r,a.start).join("");const Y=new RegExp("\n"+x,"g");C=f.replace(/\r\n/g,"\n").replace(Y,"\n").split("\n");n=C.length;C[0]=C[0].replace($,"");C[n-1]=C[n-1].replace(R,"");if(n<2)C=C[0].split(" ");if(C[0]===""){C[0]=a.opening}else{C.splice(0,0,a.opening)}n=C.length;r=0;do{d=r<n-1?C[r+1].replace(/^\s+/,""):"";if(/^\s+$/.test(C[r])===true||C[r]===""){G()}else if(C[r].slice(0,4)==="    "){L.push(C[r])}else if(C[r].replace(/^\s+/,"").length>c&&C[r].replace(/^\s+/,"").indexOf(" ")>c){C[r]=C[r].replace(/^\s+/,"");P=C[r].indexOf(" ");L.push(C[r].slice(0,P));C[r]=C[r].slice(P+1);r=r-1}else{C[r]=a.opening==="/*"&&C[r].indexOf("/*")!==0?`   ${C[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`:`${C[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`;O=r<1?c-(a.opening.length+1):c;P=C[r].length;M=C[r].replace(/^\s+/,"").indexOf(" ");if(P>O&&M>0&&M<O){P=O;do{P=P-1;if(ue(C[r].charAt(P))&&P<=c)break}while(P>0);if(C[r].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(C[r])===true&&/^\s*(\*|-)\s/.test(C[r+1])===false){C.splice(r+1,0,"* ")}if(C[r].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(C[r])===true&&/^\s*\d+\.\s/.test(C[r+1])===false){C.splice(r+1,0,"1. ")}if(P<4){L.push(C[r]);D=true}else if(r===n-1){L.push(C[r].slice(0,P));C[r]=C[r].slice(P+1);D=true;r=r-1}else if(/^\s+$/.test(C[r+1])===true||C[r+1]===""){L.push(C[r].slice(0,P));C[r]=C[r].slice(P+1);F=true;r=r-1}else if(C[r+1].slice(0,4)!=="    "&&/^\s*(\*|-)\s/.test(C[r+1])){L.push(C[r].slice(0,P));C[r]=C[r].slice(P+1);u=true;r=r-1}else if(C[r+1].slice(0,4)!=="    "&&/^\s*\d+\.\s/.test(C[r+1])){L.push(C[r].slice(0,P));C[r]=C[r].slice(P+1);B=true;r=r-1}else if(C[r+1].slice(0,4)==="    "){L.push(C[r].slice(0,P));C[r]=C[r].slice(P+1);D=true;r=r-1}else if(P+d.length>c&&d.indexOf(" ")<0){L.push(C[r].slice(0,P));C[r]=C[r].slice(P+1);D=true;r=r-1}else if(C[r].replace(/^\s+/,"").indexOf(" ")<c){C[r+1]=C[r].length>c?C[r].slice(P+1)+q+C[r+1]:`${C[r].slice(P+1)} ${C[r+1]}`}if(F===false&&u===false&&B===false&&D===false){C[r]=C[r].slice(0,P)}}else if(C[r+1]!==void 0&&(C[r].length+d.indexOf(" ")>c&&d.indexOf(" ")>0||C[r].length+d.length>c&&d.indexOf(" ")<0)){L.push(C[r]);r=r+1}else if(C[r+1]!==void 0&&/^\s+$/.test(C[r+1])===false&&C[r+1]!==""&&C[r+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(C[r+1])===false){C[r+1]=`${C[r]} ${C[r+1]}`;F=true}if(D===false&&u===false&&B===false){if(F===true){F=false}else if(/^\s*(\*|-|(\d+\.))\s*$/.test(C[r])===false){if(r<n-1&&C[r+1]!==""&&/^\s+$/.test(C[r])===false&&C[r+1].slice(0,4)!=="    "&&/^\s*(\*|-|(\d+\.))\s/.test(C[r+1])===false){C[r]=`${C[r]} ${C[r+1]}`;C.splice(r+1,1);n=n-1;r=r-1}else{if(a.opening==="/*"&&C[r].indexOf("/*")!==0){L.push(`   ${C[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`)}else{L.push(`${C[r].replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}`)}}}}D=false;u=false;B=false}r=r+1}while(r<n);if(L.length>0){if(L[L.length-1].length>c-(a.terminator.length+1)){L.push(a.terminator)}else{L[L.length-1]=`${L[L.length-1]} ${a.terminator}`}f=L.join(q)}else{C[C.length-1]=C[C.length-1]+a.terminator;f=C.join(q)}return[f,i]}wrapCommentLine(a){let c=a.start;let e=0;let l="";let b=[];const{wrap:L,preserveComment:q}=H.options;function j(){let i="";do{e=e+1;if(a.chars[e+1]==="\n")return}while(e<a.end&&ue(a.chars[e])===true);if(a.chars[e]+a.chars[e+1]==="//"){b=[];do{b.push(a.chars[e]);e=e+1}while(e<a.end&&a.chars[e]!=="\n");i=b.join("");if(/^\/\/ (\*|-|(\d+\.))/.test(i)===false&&i.slice(0,6)!=="//    "&&/^\/\/\s*$/.test(i)===false){l=`${l} ${i.replace(/(^\/\/\s*)/,"").replace(/\s+$/,"")}`;c=e-1;j()}}}const t=()=>{const i=[];const r={ender:-1,types:"comment",lexer:a.lexer,lines:this.linesSpace};if(this.count>-1){r.begin=this.structure[this.structure.length-1][1];r.stack=this.structure[this.structure.length-1][0];r.token=this.data.token[this.count]}else{r.begin=-1;r.stack="global";r.token=""}let P=0;let M=0;l=l.replace(/\s+/g," ").replace(/\s+$/,"");M=l.length;if(L>M)return;do{P=L;if(l.charAt(P)!==" "){do{P=P-1}while(P>0&&l.charAt(P)!==" ");if(P<3){P=L;do{P=P+1}while(P<M-1&&l.charAt(P)!==" ")}}i.push(l.slice(0,P));l=`// ${l.slice(P).replace(/^\s+/,"")}`;M=l.length}while(L<M);P=0;M=i.length;do{r.token=i[P];this.push(this.data,r,v);r.lines=2;this.linesSpace=2;P=P+1}while(P<M)};do{b.push(a.chars[c]);c=c+1}while(c<a.end&&a.chars[c]!=="\n");if(c===a.end){a.chars.push("\n")}else{c=c-1}l=b.join("").replace(/\s+$/,"");if(/^(\/\/\s*@prettify-ignore-start\b)/.test(l)===true){let i="\n";c=c+1;do{b.push(a.chars[c]);c=c+1}while(c<a.end&&(a.chars[c-1]!=="d"||a.chars[c-1]==="d"&&b.slice(b.length-20).join("")!=="@prettify-ignore-end"));e=c;do{}while(e>a.start&&a.chars[e-1]==="/"&&(a.chars[e]==="*"||a.chars[e]==="/"));if(a.chars[e]==="*")i="*/";if(i!=="\n"||a.chars[c]!=="\n"){do{b.push(a.chars[c]);if(i==="\n"&&a.chars[c+1]==="\n")break;c=c+1}while(c<a.end&&(i==="\n"||i==="*/"&&(a.chars[c-1]!=="*"||a.chars[c]!=="/")))}if(a.chars[c]==="\n")c=c-1;l=b.join("").replace(/\s+$/,"");return[l,c]}if(l==="//"||l.slice(0,6)==="//    "||q===true){return[l,c]}l=l.replace(/(\/\/\s*)/,"// ");if(L<1||c===a.end-1&&this.data.begin[this.count]<1)return[l,c];e=c+1;j();t();return[l,c]}};H.lexers.style=function o(a){const{options:c}=H;const e=c.style;const{data:l}=s;const b=a.split(v);const L=a.length;const q=[];const j=[];let t=0;let i=v;let r=v;function P(D){const f=Se(null);f.begin=s.structure[s.structure.length-1][1];f.ender=-1;f.lexer="style";f.lines=s.linesSpace;f.stack=s.structure[s.structure.length-1][0];f.token=r;f.types=i;s.push(l,f,D)}function M(D){const f=D;do{D=D-1}while(b[D]==="\\"&&D>0);return(f-D)%2===1}function n(D){const f=D.replace(/\s*!important/," !important").split(v);const g=/-?transition$/.test(l.token[s.count-2]);const k=[];const O=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g;const R=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g;let _=0;let z=0;let $=v;let oe=f.length;let G=[];const Y=se=>{return se};const K=se=>{se=se.replace(/\s*/g,v);return/\/\d/.test(se)&&D.indexOf("url(")===0?se:` ${se.charAt(0)} ${se.charAt(1)}`};const le=se=>{if(e.noLeadZero===true){return se.replace(/^-?\D0+(\.|\d)/,X=>X.replace(/0+/,v))}else if(/0*\./.test(se)){return se.replace(/0*\./,"0.")}else if(/0+/.test(/\d+/.exec(se)[0])){return/^\D*0+\D*$/.test(se)?se.replace(/0+/,"0"):se.replace(/\d+/.exec(se)[0],/\d+/.exec(se)[0].replace(/^0+/,v))}return se};const Z=se=>se.replace(",",", ");const ae=se=>`${se} `;const W=()=>{const se=_-1;let X=se;if(se<1)return true;do{X=X-1}while(X>0&&f[X]==="\\");return(se-X)%2===1};if(_<oe){do{G.push(f[_]);if(f[_-1]!=="\\"||W()===false){if($===v){if(p(f[_],34)){$='"';z=z+1}else if(p(f[_],39)){$="'";z=z+1}else if(p(f[_],40)){$=")";z=z+1}else if(p(f[_],91)){$="]";z=z+1}}else if(p(f[_],40)&&p($,41)||p(f[_],91)&&p($,93)){z=z+1}else if(f[_]===$){z=z-1;if(z===0)$=v}}if($===v&&f[_]===" "){G.pop();k.push(Y(G.join(v)));G=[]}_=_+1}while(_<oe)}k.push(Y(G.join(v)));oe=k.length;_=0;if(_<oe){do{if(e.noLeadZero===true&&/^-?0+\.\d+[a-z]/.test(k[_])===true){k[_]=k[_].replace(/0+\./,".")}else if(e.noLeadZero===false&&/^-?\.\d+[a-z]/.test(k[_])){k[_]=k[_].replace(".","0.")}else if(O.test(k[_])||R.test(k[_])){k[_]=k[_].replace(O,le).replace(R,le)}else if(/^(0+([a-z]{2,3}|%))$/.test(k[_])&&g===false){k[_]="0"}else if(/^(0+)/.test(k[_])){k[_]=k[_].replace(/0+/,"0");if(/\d/.test(k[_].charAt(1)))k[_]=k[_].substr(1)}else if(/^url\((?!('|"))/.test(k[_])&&k[_].charCodeAt(k[_].length-1)===41){$=k[_].charAt(k[_].indexOf("url(")+4);if($!=="@"&&ie($,40)&&ie($,60)){if(e.quoteConvert==="double"){k[_]=k[_].replace(/url\(/,'url("').replace(/\)$/,'")')}else{k[_]=k[_].replace(/url\(/,"url('").replace(/\)$/,"')")}}}if(/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(k[_])){if(!pe.style.units.has(k[_].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,v))){k[_]=k[_].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,ae)}}if(/^\w+\(/.test(k[_])&&k[_].charAt(k[_].length-1)===")"&&(k[_].indexOf("url(")!==0||k[_].indexOf("url(")===0&&k[_].indexOf(" ")>0)){k[_]=k[_].replace(/,\S/g,Z)}_=_+1}while(_<oe)}$=k.join(" ");return $.charAt(0)+$.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,K)}function C(){const D=[];const f=[];const g=e.quoteConvert;let k=t;let O=0;let R=v;let _=null;const z=()=>{f.push(b[k]);if(ue(b[k+1])){do{k=k+1}while(k<L&&ue(b[k+1]))}};if(k<L){do{if(p(b[k],34)||p(b[k],39)){if(_===null)_=false;if(D[D.length-1]===b[k]&&(b[k-1]!=="\\"||M(k-1)===false)){D.pop();if(g==="double"){b[k]='"'}else if(g==="single"){b[k]="'"}}else if(ie(D[D.length-1],34)&&ie(D[D.length-1],39)&&(b[k-1]!=="\\"||M(k-1)===false)){D.push(b[k]);if(g==="double"){b[k]='"'}else if(g==="single"){b[k]="'"}}else if(b[k-1]==="\\"&&g!=="none"){if(M(k-1)===true){if(g==="double"&&p(b[k],39)){f.pop()}else if(g==="single"&&p(b[k],34)){f.pop()}}}else if(g==="double"&&p(b[k],34)){b[k]='\\"'}else if(g==="single"&&p(b[k],39)){b[k]="\\'"}f.push(b[k])}else if(b[k-1]!=="\\"||M(k-1)===false){if(p(b[k],40)){if(_===null)_=true;D.push(")");z()}else if(p(b[k],91)){_=false;D.push("]");z()}else if((p(b[k],35)||p(b[k],64))&&p(b[k+1],123)){_=false;f.push(b[k]);k=k+1;D.push("}");z()}else if(b[k]===D[D.length-1]){f.push(b[k]);D.pop()}else{f.push(b[k])}}else{f.push(b[k])}if(s.structure[s.structure.length-1][0]==="map"&&D.length===0&&(p(b[k+1],44)||p(b[k+1],41))){if(p(b[k+1],41)&&p(l.token[s.count],40)){s.pop(l);s.structure.pop();f.splice(0,0,"(")}else{break}}if(p(b[k+1],58)){O=k;if(ue(b[O]))do{O=O-1}while(ue(b[O]));R=b.slice(O-6,O+1).join(v);if(R.indexOf("filter")===R.length-6||R.indexOf("progid")===R.length-6){R="filter"}}if(D.length===0){if(p(b[k+1],59)&&M(k+1)===true||p(b[k+1],58)&&ie(b[k],58)&&ie(b[k+2],58)&&R!=="filter"&&R!=="progid"||(p(b[k+1],125)||p(b[k+1],123))||p(b[k+1],47)&&(p(b[k+2],42)||p(b[k+2],47))){O=f.length-1;if(ue(f[O])){do{O=O-1;k=k-1;f.pop()}while(ue(f[O]))}break}if(p(b[k+1],44))break}k=k+1}while(k<L)}t=k;if(s.structure[s.structure.length-1][0]==="map"&&p(f[0],40)){q[q.length-1]=q[q.length-1]-1}r=f.join(v).replace(/\s+/g," ").replace(/^\s/,v).replace(/\s$/,v);if(_===true){r=r.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (")}if(s.count>-1&&l.token[s.count].indexOf("extend(")===0){i="pseudo"}else if(_===true&&/\d/.test(r.charAt(0))===false&&/^rgba?\(/.test(r)===false&&r.indexOf("url(")!==0&&(r.indexOf(" ")<0||r.indexOf(" ")>r.indexOf("("))&&r.charAt(r.length-1)===")"){if(p(l.token[s.count],58)){i="value"}else{r=r.replace(/,\u0020?/g,", ");i="function"}r=n(r)}else if(s.count>-1&&`"'`.indexOf(l.token[s.count].charAt(0))>-1&&l.types[s.count]==="variable"){i="item"}else if(p(f[0],64)||f[0]==="$"){if(l.types[s.count]==="colon"&&c.language==="css"&&(l.types[s.count-1]==="property"||l.types[s.count-1]==="variable")){i="value"}else if(s.count>-1){i="item";R=l.token[s.count];k=R.indexOf("(");if(p(R[R.length-1],41)&&k>0){R=R.slice(k+1,R.length-1);l.token[s.count]=l.token[s.count].slice(0,k+1)+n(R)+")"}}r=n(r)}else{i="item"}P(v)}function x(D){let f=s.count;let g=0;let k=v;const O=[];const R=()=>{if(s.count<0)return;if(f>0&&(l.types[f]==="comment"||l.types[f]==="ignore")){do{f=f-1;O.push(l.token[f])}while(f>0&&l.lexer[f]==="style"&&(l.types[f]==="comment"||l.types[f]==="ignore"))}g=f-1;if(g>0&&(l.types[g]==="comment"||l.types[g]==="ignore")){do{g=g-1}while(g>0&&l.lexer[f]==="style"&&(l.types[g]==="comment"||l.types[g]==="ignore"))}if(g<0)g=0;if(f<0)f=0;k=l.token[f].charAt(0)};function _(z){let $=z;const oe=l.begin[$];l.token[z]=l.token[z].replace(/\s*&/," &").replace(/(\s*>\s*)/g," > ").replace(/(\s*\+\s*)/g," + ").replace(/:\s+/g,": ").replace(/^(\s+)/,v).replace(/(\s+)$/,v).replace(/\s+::\s+/,"::");if(p(l.token[$-1],44)||p(l.token[$-1],58)||l.types[$-1]==="comment"||l.types[$-1]==="pseudo"){if(l.types[$-1]==="pseudo"){l.token[$-1]=`${l.token[$-1]}${l.token[$]}`;l.types[$-1]="selector";s.splice({data:l,howmany:1,index:$})}else{do{$=$-1;if(l.begin[$]===oe){if(p(l.token[$],59)||l.types[$].indexOf("template")>-1)break;if(ie(l.token[$],44)&&l.types[$]!=="comment"){l.types[$]="selector"}if(p(l.token[$],58)){if(ie(l.token[$-1],58)&&l.stack[f]==="global"&&(l.types[$-1]==="comment"||l.types[$-1]==="ignore"||l.types[$-1].indexOf("template")>-1)){l.token[$]=`${l.token[$]}${l.token[$+1]}`;s.pop(l)}else if(s.count===1){l.token[$]=`${l.token[$]}${l.token[$+1]}`;s.pop(l)}else if(l.types[$]==="selector"&&l.types[$+1]==="item"){l.token[$]=`${l.token[$]}${l.token[$+1]}`;s.pop(l)}else{l.token[$]=`${l.token[$-1]}:${l.token[$+1]}`;l.lines[$]=l.lines[$-1];s.splice({data:l,howmany:2,index:$})}}}else{break}}while($>0)}}$=s.count;if(e.sortSelectors===true&&p(l.token[$-1],44)){const G=[l.token[$]];do{$=$-1;if(l.types[$]==="comment"||l.types[$]==="ignore"){do{$=$-1}while($>0&&(l.types[$]==="comment"||l.types[$]==="ignore"))}if(p(l.token[$],44))$=$-1;G.push(l.token[$])}while($>0&&(p(l.token[$-1],44)||l.types[$-1]==="selector"||l.types[$-1]==="comment"||l.types[$-1]==="ignore"));G.sort();$=s.count;l.token[$]=G.pop();do{$=$-1;if(l.types[$]==="comment"||l.types[$]==="ignore"){do{$=$-1}while($>0&&(l.types[$]==="comment"||l.types[$]==="ignore"))}if(p(l.token[$],44))$=$-1;l.token[$]=G.pop()}while($>0&&(p(l.token[$-1],44)||l.token[$-1]==="selector"||l.types[$-1]==="comment"||l.types[$-1]==="ignore"))}f=s.count;R()}R();if(D==="start"&&(l.types[f]==="value"||l.types[f]==="variable")){l.types[f]="item"}if(l.lexer[s.count-1]!=="style"||g<0){if(D==="colon"){if(k==="$"||p(k,64)){l.types[f]="variable"}else{if(l.stack[f]!=="global"&&(l.types[f]!=="comment"||l.types[f]!=="ignore")){l.types[f]="property"}}}else if(l.lexer[f]==="style"){l.types[f]="selector";_(f)}}else if(D==="start"&&l.types[f]==="function"&&l.lexer[f]==="style"){l.types[f]="selector";_(f)}else if(l.types[f]==="item"&&l.lexer[f]==="style"){if(D==="start"){_(f);l.types[f]="selector";if(p(l.token[f],58))l.types[g]="selector";if(l.token[f].indexOf("=\u201C")>0){s.error=`Invalid Quote (\u201C, \\201c) used on line number ${s.lineNumber}`}else if(l.token[f].indexOf("=\u201D")>0){s.error=`Invalid Quote (\u201D, \\201d) used on line number ${s.lineNumber}`}}else if(D==="end"){if(k==="$"||p(k,64)){l.types[f]="variable"}else{l.types[f]="value"}l.token[f]=n(l.token[f])}else if(D==="separator"){if(l.types[g]==="colon"||p(l.token[g],44)||p(l.token[g],123)){if(ie(b[t],59)&&(l.types[g]==="selector"||p(l.token[g],123))){l.types[f]="selector";_(f)}else if(l.token[f].charAt(0)==="$"||p(l.token[f],64)){l.types[f]="variable"}else{l.types[f]="value"}l.token[f]=n(l.token[f]);if(l.token[f].charAt(0)==="\u201C"){s.error=`Invalid Quote (\u201C, \\201c) used on line number ${s.lineNumber}`}else if(l.token[f].charAt(0)==="\u201D"){s.error=`Invalid (\u201D, \\201d) used on line number ${s.lineNumber}`}}else{if(k==="$"||p(k,64)){l.types[f]="variable"}else if(l.types[g]==="value"||l.types[g]==="variable"){l.token[g]=l.token[g]+l.token[f];s.pop(l)}else{l.types[f]="value"}}}else if(D==="colon"){if(k==="$"||p(k,64)){l.types[f]="variable"}else{l.types[f]="property"}}else if(p(l.token[g],64)&&(l.types[g-2]!=="variable"&&l.types[g-2]!=="property"||l.types[g-1]==="separator")){l.types[g]="variable";i="variable";l.token[g]=n(l.token[g])}}}function d(){let D=s.count;do{D=D-1}while(D>0&&l.types[D]==="comment");if(l.token[D]===";")return;s.splice({data:l,howmany:0,index:D+1,record:{begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"style",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:";",types:"separator"}})}function F(D,f){const g=[];let k=v;let O=v;let R=0;let _=D.length;const z=$=>{const oe=l.types[s.count-1];if(i==="item"){if(oe==="colon"){l.types[s.count]="value"}else{x(oe)}}i=$;if(i.indexOf("start")>-1||i.indexOf("else")>-1){P(r)}else{P(v)}};j[j.length-1]=true;if(t<L){do{g.push(b[t]);if(k===v){if(b[t]==='"'){k='"'}else if(b[t]==="'"){k="'"}else if(b[t]==="/"){if(b[t+1]==="/"){k="/"}else if(b[t+1]==="*"){k="*"}}else if(b[t+1]===f.charAt(0)){do{R=R+1;t=t+1;g.push(b[t])}while(t<L&&R<f.length&&b[t+1]===f.charAt(R));if(R===f.length){k=g.join(v);if(ue(k.charAt(_))){do{_=_+1}while(ue(k.charAt(_)))}R=_;do{R=R+1}while(R<f.length&&!ue(k.charAt(R)));if(R===k.length)R=R-f.length;if(D==="{%"){if(k.indexOf("{%-")===0){k=k.replace(/^({%-\s*)/,"{%- ").replace(/(\s*-%})$/," -%}").replace(/(\s*%})$/," %}");O=k.slice(4)}else{k=k.replace(/^({%\s*)/,"{% ").replace(/(\s*%})$/," %}").replace(/(\s*-%})$/," -%}");O=k.slice(3)}}if(D==="{{"){k=k.replace(/^({{\s*)/,"{{ ").replace(/^({{-\s*)/,"{{- ").replace(/(\s*-}})$/," -}}").replace(/(\s*}})$/," }}")}if(i==="item"&&l.types[s.count-1]==="colon"&&(l.types[s.count-2]==="property"||l.types[s.count-2]==="variable")){i="value";l.types[s.count]="value";if(Number.isNaN(Number(l.token[s.count]))===true&&l.token[s.count].charAt(l.token[s.count].length-1)!==")"){l.token[s.count]=l.token[s.count]+k}else{l.token[s.count]=l.token[s.count]+" "+k}return}r=k;if(D==="{%"){const $=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];let oe=$.length-1;O=O.slice(0,O.indexOf(" "));if(O.indexOf("(")>0){O=O.slice(0,O.indexOf("("))}if(O==="else"||O==="elseif"||O==="when"||O==="elsif"){z("template_else");return}oe=$.length-1;if(oe>-1){do{if(O===$[oe]){z("template_start");return}if(O==="end"+$[oe]){z("template_end");return}oe=oe-1}while(oe>-1)}}else if(D==="{{"){let $=k.slice(2);const oe=$.length;let G=0;do{G=G+1}while(G<oe&&ue($.charAt(G))===false&&$.charCodeAt(_)!==40);$=$.slice(0,G);if($.charAt($.length-2)==="}"){$=$.slice(0,$.length-2)}if($==="end"){z("template_end");return}if($==="block"||$==="define"||$==="form"||$==="if"||$==="range"||$==="with"){z("template_start");return}}z("template");return}R=0}}else if(k===b[t]){if(p(k,34)||p(k,39)){k=v}else if(p(k,47)&&(b[t]==="\r"||p(b[t],10))){k=v}else if(p(k,42)&&p(b[t+1],47)){k=v}}t=t+1}while(t<L)}}function u(D){let f;if(D){f=s.wrapCommentLine({chars:b,end:L,lexer:"style",opening:"//",start:t,terminator:"\n"});r=f[0];i=/^(\/\/\s*@prettify-ignore-start)/.test(r)?"ignore":"comment"}else{f=s.wrapCommentBlock({chars:b,end:L,lexer:"style",opening:"/*",start:t,terminator:"*/"});r=f[0];i=/^(\/\*\s*@prettify-ignore-start)/.test(r)?"ignore":"comment"}P(v);t=f[1]}function B(){const D=s.linesSpace;const f=Se(null);f.data=Se(null);f.data.margin=[v,v,v,v,false];f.data.padding=[v,v,v,v,false];f.last=Se(null);f.last.margin=0;f.last.padding=0;f.removes=[];const g=s.structure[s.structure.length-1][1];function k(z){if(l.token[R-2]===z){const $=l.token[R].replace(/\s*!important\s*/g,v).split(" ");const oe=$.length;if(l.token[R].indexOf("!important")>-1)f.data[z[4]]=true;if(oe>3){if(f.data[z][0]===v)f.data[z][0]=$[0];if(f.data[z][1]===v)f.data[z][1]=$[1];if(f.data[z][2]===v)f.data[z][2]=$[2];if(f.data[z][3]===v)f.data[z][3]=$[3]}else if(oe>2){if(f.data[z][0]===v)f.data[z][0]=$[0];if(f.data[z][1]===v)f.data[z][1]=$[1];if(f.data[z][2]===v)f.data[z][2]=$[2];if(f.data[z][3]===v)f.data[z][3]=$[1]}else if(oe>1){if(f.data[z][0]===v)f.data[z][0]=$[0];if(f.data[z][1]===v)f.data[z][1]=$[1];if(f.data[z][2]===v)f.data[z][2]=$[0];if(f.data[z][3]===v)f.data[z][3]=$[1]}else{if(f.data[z][0]===v)f.data[z][0]=$[0];if(f.data[z][1]===v)f.data[z][1]=$[0];if(f.data[z][2]===v)f.data[z][2]=$[0];if(f.data[z][3]===v)f.data[z][3]=$[0]}}else if(l.token[R-2]===`${z}-bottom`){if(f.data[z][2]===v)f.data[z][2]=l.token[R]}else if(l.token[R-2]===`${z}-left`){if(f.data[z][3]===v)f.data[z][3]=l.token[R]}else if(l.token[R-2]===`${z}-right`){if(f.data[z][1]===v)f.data[z][1]=l.token[R]}else if(l.token[R-2]===`${z}-top`){if(f.data[z][0]===v)f.data[z][0]=l.token[R]}else{return}f.removes.push([R,z]);f.last[z]=R}function O(){let z=0;let $=v;const oe=/^(0+([a-z]+|%))/;const G=f.removes.length;const Y=f.data.margin[0]!==v&&f.data.margin[1]!==v&&f.data.margin[2]!==v&&f.data.margin[3]!==v;const K=f.data.padding[0]!==v&&f.data.padding[1]!==v&&f.data.padding[2]!==v&&f.data.padding[3]!==v;function le(Z){if(oe.test(f.data[Z][0])===true)f.data[Z][0]="0";if(oe.test(f.data[Z][1])===true)f.data[Z][1]="0";if(oe.test(f.data[Z][2])===true)f.data[Z][2]="0";if(oe.test(f.data[Z][3])===true)f.data[Z][3]="0";if(f.data[Z][0]===f.data[Z][1]&&f.data[Z][0]===f.data[Z][2]&&f.data[Z][0]===f.data[Z][3]){$=f.data[Z][0]}else if(f.data[Z][0]===f.data[Z][2]&&f.data[Z][1]===f.data[Z][3]&&f.data[Z][0]!==f.data[Z][1]){$=`${f.data[Z][0]} ${f.data[Z][1]}`}else if(f.data[Z][1]===f.data[Z][3]&&f.data[Z][0]!==f.data[Z][2]){$=`${f.data[Z][0]} ${f.data[Z][1]} ${f.data[Z][2]}`}else{$=`${f.data[Z][0]} ${f.data[Z][1]} ${f.data[Z][2]} ${f.data[Z][3]}`}if(f.data[Z[4]]===true)$=`${$.replace(" !important",v)} !important`;if(f.last[Z]>s.count){z=g<1?1:g+1;do{if(l.begin[z]===g&&l.types[z]==="value"&&l.token[z-2].indexOf(Z)===0){f.last[Z]=z;break}z=z+1}while(z<s.count)}l.token[f.last[Z]]=$;l.token[f.last[Z]-2]=Z}if(G>1&&(Y===true||K===true)){do{if(f.removes[z][0]!==f.last.margin&&f.removes[z][0]!==f.last.padding&&(Y===true&&f.removes[z][1]==="margin"||K===true&&f.removes[z][1]==="padding")){s.splice({data:l,howmany:l.types[f.removes[z][0]+1]==="separator"?4:3,index:f.removes[z][0]-2})}z=z+1}while(z<G-1)}if(Y===true)le("margin");if(K===true)le("padding");if(_===true){if(g<0){s.error="Brace mismatch. There appears to be more closing braces than starting braces."}else{s.sortCorrection(g,s.count+1)}}}let R=s.count;let _=false;do{R=R-1;if(l.begin[R]===g){if(l.types[R]==="value"&&l.types[R-2]==="property"){if(l.token[R-2].indexOf("margin")===0){k("margin")}else if(l.token[R-2].indexOf("padding")===0){k("padding")}}}else{_=true;R=l.begin[R]}}while(R>g);O();s.linesSpace=D}do{if(ue(b[t])){t=s.spacer({array:b,end:L,index:t})}else if(p(b[t],47)&&p(b[t+1],42)){u(false)}else if(p(b[t],47)&&p(b[t+1],47)){u(true)}else if(p(b[t],123)&&p(b[t+1],37)){F("{%","%}")}else if(p(b[t],123)&&p(b[t+1],123)){F("{{","}}")}else if(p(b[t],123)||p(b[t],40)&&p(l.token[s.count],58)&&l.types[s.count-1]==="variable"){x("start");i="start";r=b[t];if(p(b[t],40)){P("map");q.push(0)}else if(l.types[s.count]==="selector"||l.types[s.count]==="variable"){P(l.token[s.count])}else if(l.types[s.count]==="colon"){P(l.token[s.count-1])}else{P("block")}j.push(false)}else if(p(b[t],125)||b[t]===")"&&s.structure[s.structure.length-1][0]==="map"&&q[q.length-1]===0){if(p(b[t],125)&&p(l.token[s.count-1],123)&&l.types[s.count]==="item"&&l.token[s.count-2]!==void 0&&l.token[s.count-2].charAt(l.token[s.count-2].length-1)==="@"){l.token[s.count-2]=l.token[s.count-2]+"{"+l.token[s.count]+"}";s.pop(l);s.pop(l);s.structure.pop()}else{if(p(b[t],41))q.pop();x("end");if(p(b[t],125)&&ie(l.token[s.count],59)){if(l.types[s.count]==="value"||l.types[s.count]==="function"||l.types[s.count]==="variable"&&(p(l.token[s.count-1],58)||p(l.token[s.count-1],59))){if(e.correct===true){r=";"}else{r="x;"}i="separator";P(v)}else if(l.types[s.count]==="comment"){d()}}j.pop();r=b[t];i="end";if(p(b[t],125))B();if(e.sortProperties===true&&p(b[t],125))s.objectSort(l);P(v)}}else if(p(b[t],59)||p(b[t],44)){if(l.types[s.count-1]==="selector"||l.types[s.count]!=="function"&&p(l.token[s.count-1],125)){x("start")}else{x("separator")}if(l.types[s.count]!=="separator"&&M(t)===true){r=b[t];i="separator";P(v)}}else if(p(b[t],58)&&l.types[s.count]!=="end"){if(p(b[t+1],58)){t=t+1;x("pseudo");r="::";i="pseudo";P(v)}else{x("colon");r=":";i="colon";P(v)}}else{if(s.structure[s.structure.length-1][0]==="map"&&p(b[t],40)){q[q.length-1]=q[q.length-1]+1}C()}t=t+1}while(t<L);if(e.sortProperties===true)s.objectSort(l);return l};H.lexers.script=function o(a){const{options:c}=H;if(c.language==="json")c.script.quoteConvert="double";let e=0;let l="";let b="";let L=[];let q=0;let j=-1;let t=-1;let i=[];let r;let P;let M;const{data:n}=s;const{references:C}=s;const x=a.length;const d=a.split("");const F=[];const u=[];const B=[];const D=[0,""];const f=[false];const g=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];const k=Se(null);k.count=[];k.index=[];k.len=-1;k.word=[];function O(h){let m=0;const S=Z(1,false);const E=s.structure.length===0?"":s.structure[s.structure.length-1][0];const w=Se(null);w.begin=n.begin[s.count];w.ender=n.begin[s.count];w.lexer=n.lexer[s.count];w.lines=n.lines[s.count];w.stack=n.stack[s.count];w.token=n.token[s.count];w.types=n.types[s.count];if(/^(\/(\/|\*)\s*@prettify-ignore-start)/.test(l))return;if(b==="start"||b==="type_start")return;if(c.language==="json")return;if(p(w.token,59)||p(w.token,44)||w.stack==="class"||w.stack==="map"||w.stack==="attribute"||n.types[w.begin-1]==="generic"||S==="{"||E==="initializer"){return}if(p(w.token,125)&&n.stack[w.begin-1]==="global"&&n.types[w.begin-1]!=="operator"&&w.stack===n.stack[s.count-1]){return}if(w.stack==="array"&&w.token!=="]")return;if(n.token[n.begin[s.count]]==="{"&&w.stack==="data_type")return;if(w.types!==void 0&&w.types.indexOf("template")>-1&&w.types.indexOf("template_string")<0){return}if(p(S,59)&&h===false)return;if(n.lexer[s.count-1]!=="script"&&(e<x&&x===H.source.length-1||x<H.source.length-1)){return}if(p(w.token,125)&&(w.stack==="function"||w.stack==="if"||w.stack==="else"||w.stack==="for"||w.stack==="do"||w.stack==="while"||w.stack==="switch"||w.stack==="class"||w.stack==="try"||w.stack==="catch"||w.stack==="finally"||w.stack==="block")){if(w.stack==="function"&&(n.stack[w.begin-1]==="data_type"||n.types[w.begin-1]==="type")){m=w.begin;do{m=m-1}while(m>0&&n.token[m]!==")"&&n.stack[m]!=="arguments");m=n.begin[m]}else{m=n.begin[w.begin-1]}if(p(n.token[m],40)){m=m-1;if(n.token[m-1]==="function")m=m-1;if(n.stack[m-1]==="object"||n.stack[m-1]==="switch")return;if(n.token[m-1]!=="="&&n.token[m-1]!=="return"&&n.token[m-1]!==":"){return}}else{return}}if(w.types==="comment"||E==="method"||E==="paren"||E==="expression"||E==="array"||E==="object"||E==="switch"&&w.stack!=="method"&&n.token[n.begin[s.count]]==="("&&n.token[n.begin[s.count]-1]!=="return"&&n.types[n.begin[s.count]-1]!=="operator"){return}if(n.stack[s.count]==="expression"&&(n.token[n.begin[s.count]-1]!=="while"||n.token[n.begin[s.count]-1]==="while"&&n.stack[n.begin[s.count]-2]!=="do")){return}if(S!==""&&"=<>+*?|^:&%~,.()]".indexOf(S)>-1&&h===false)return;if(w.types==="comment"){m=s.count;do{m=m-1}while(m>0&&n.types[m]==="comment");if(m<1)return;w.token=n.token[m];w.types=n.types[m];w.stack=n.stack[m]}if(w.token===void 0||w.types==="start"||w.types==="separator"||w.types==="operator"&&w.token!=="++"&&w.token!=="--"||w.token==="x}"||w.token==="var"||w.token==="let"||w.token==="const"||w.token==="else"||w.token.indexOf("#!/")===0||w.token==="instanceof"){return}if(w.stack==="method"&&(n.token[w.begin-1]==="function"||n.token[w.begin-2]==="function")){return}if(c.script.variableList==="list")k.index[k.len]=s.count;l=c.script.correct===true?";":"x;";b="separator";m=s.linesSpace;s.linesSpace=0;X("");s.linesSpace=m;$()}function R(){let h=s.count;do{h=h-1}while(h>-1&&n.token[h]==="x}");if(n.stack[h]==="else")return X("");h=h+1;s.splice({data:n,howmany:0,index:h,record:{begin:n.begin[h],ender:-1,lexer:"script",lines:s.linesSpace,stack:n.stack[h],token:l,types:b}});X("")}function _(){let h=s.count;if(n.types[h]==="comment"){do{h=h-1}while(h>0&&n.types[h]==="comment")}if(n.token[h]==="from")h=h-2;if(n.token[h]==="x;"){s.splice({data:n,howmany:1,index:h})}}function z(){O(false);if(j>-1)y();M=s.wrapCommentBlock({chars:d,end:x,lexer:"script",opening:"/*",start:e,terminator:"*/"});e=M[1];if(n.token[s.count]==="var"||n.token[s.count]==="let"||n.token[s.count]==="const"){r=s.pop(n);X("");s.push(n,r,"");if(n.lines[s.count-2]===0)n.lines[s.count-2]=n.lines[s.count];n.lines[s.count]=0}else if(M[0]!==""){l=M[0];b=/^\/\*\s*@ignore\s*\bstart\b/.test(l)?"ignore":"comment";if(l.indexOf("# sourceMappingURL=")===2){D[0]=s.count+1;D[1]=l}s.push(n,{begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"script",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:l,types:b},"")}if(/\/\*\s*global\s+/.test(n.token[s.count])===true&&n.types.indexOf("word")<0){C[0]=n.token[s.count].replace(/\/\*\s*global\s+/,"").replace("*/","").replace(/,\s+/g,",").split(",")}}function $(){let h="";const m=Z(5,false);const S=s.count;const E=s.linesSpace;if(c.language==="json"||u.length<1||u[u.length-1].charAt(0)!=="x"||/^x?(;|\}|\))$/.test(l)===false){return}if(n.stack[s.count]==="do"&&m==="while"&&n.token[s.count]==="}"){return}if(l===";"&&n.token[S-1]==="x{"){h=n.token[n.begin[S-2]-1];if(n.token[S-2]==="do"||n.token[S-2]===")"&&"ifforwhilecatch".indexOf(h)>-1){r=s.pop(n);l=c.script.correct===true?"}":"x}";b="end";P=s.structure[s.structure.length-1];X("");u.pop();s.linesSpace=E;return}r=s.pop(n);l=c.script.correct===true?"}":"x}";b="end";P=s.structure[s.structure.length-1];X("");u.pop();l=";";b="end";s.push(n,r,"");s.linesSpace=E;return}l=c.script.correct===true?"}":"x}";b="end";if(n.token[s.count]==="x}")return;if(n.stack[s.count]==="if"&&(n.token[s.count]===";"||n.token[s.count]==="x;")&&m==="else"){P=s.structure[s.structure.length-1];X("");u.pop();s.linesSpace=E;return}do{P=s.structure[s.structure.length-1];X("");u.pop();if(n.stack[s.count]==="do")break}while(u[u.length-1]==="x{");s.linesSpace=E}function oe(){let h=s.count;if(n.stack[h]==="object"&&c.script.objectSort===true){l=",";b="separator";_();X("")}else{do{h=h-1}while(h>0&&n.types[h-1]==="comment");s.splice({data:n,howmany:0,index:h,record:{begin:n.begin[h],ender:-1,lexer:"script",lines:s.linesSpace,stack:n.stack[h],token:",",types:"separator"}});X("")}}function G(h){let m=false;let S=false;const E=Z(1,false);const w=n.token[s.count]==="("?s.count:n.begin[s.count];function I(){let T=0;const V=n.token[w-1]==="Array";const ee=V===true?"[":"{";const U=V===true?"]":"}";const ce=V===true?"array":"object";if(V===true&&n.types[s.count]==="number"){T=Number(n.token[s.count]);r=s.pop(n)}r=s.pop(n);r=s.pop(n);r=s.pop(n);s.structure.pop();l=ee;b="start";X(ce);if(T>0){l=",";b="separator";do{X("");T=T-1}while(T>0)}l=U;b="end";X("")}if(j>-1)y();if(B.length>0){if(B[B.length-1]===0){B.pop()}else{B[B.length-1]=B[B.length-1]-1}}if(p(h,41)||h==="x)"||p(h,93)){if(c.script.correct===true)se();_()}if(p(h,41)||h==="x)")O(false);if(k.len>-1){if(p(h,125)&&(c.script.variableList==="list"&&k.count[k.len]===0||n.token[s.count]==="x;"&&c.script.variableList==="each")){N()}k.count[k.len]=k.count[k.len]-1;if(k.count[k.len]<0)N()}if(p(l,44)&&n.stack[s.count]!=="initializer"&&(p(h,93)&&p(n.token[s.count-1],91)||p(h,125))){r=s.pop(n)}if(p(h,41)||h==="x)"){l=h;if(F.length>0){L=F[F.length-1];if(L.length>1&&ie(E,123)&&(L[0]==="if"||L[0]==="for"||L[0]==="with"||L[0]==="while"&&n.stack[L[1]-2]!==void 0&&n.stack[L[1]-2]!=="do")){m=true}}}else if(p(h,93)){l="]"}else if(p(h,125)){if(ie(l,44)&&c.script.correct===true)se();if(s.structure.length>0&&s.structure[s.structure.length-1][0]!=="object")O(true);if((c.script.objectSort===true||c.language==="json"&&c.json.objectSort===true)&&s.structure[s.structure.length-1][0]==="object"){s.objectSort(n)}if(b==="comment"){l=n.token[s.count];b=n.types[s.count]}l="}"}if(s.structure[s.structure.length-1][0]==="data_type"){b="type_end"}else{b="end"}F.pop();P=s.structure[s.structure.length-1];if(p(h,41)&&c.script.correct===true&&w-s.count<2&&(p(n.token[s.count],40)||n.types[s.count]==="number")&&(n.token[w-1]==="Array"||n.token[w-1]==="Object")&&n.token[w-2]==="new"){I();S=true}if(u[u.length-1]==="x{"&&p(h,125)){$();u.pop();if(n.stack[s.count]!=="try"){if(ie(E,58)&&ie(E,59)&&n.token[n.begin[e]-1]!=="?")$()}l="}"}else{u.pop()}if(c.script.endComma!==void 0&&c.script.endComma!=="none"&&s.structure[s.structure.length-1][0]==="array"||s.structure[s.structure.length-1][0]==="object"||s.structure[s.structure.length-1][0]==="data_type"){if(c.script.endComma==="always"&&n.token[s.count]!==","){const T=s.structure[s.structure.length-1][1];let V=s.count;do{if(n.begin[V]===T){if(p(n.token[V],44))break}else{V=n.begin[V]}V=V-1}while(V>T);if(V>T){const ee=b;const U=l;l=",";b="separator";X("");l=U;b=ee}}else if(c.script.endComma==="never"&&p(n.token[s.count],44)){s.pop(n)}}if(S===false){X("");if(l==="}"&&n.stack[s.count]!=="object"&&n.stack[s.count]!=="class"&&n.stack[s.count]!=="data_type"){C.pop();$()}}if(m===true){l=c.script.correct===true?"{":"x{";b="start";X(L[0]);u.push("x{");L[1]=s.count}f.pop();if(s.structure[s.structure.length-1][0]!=="data_type")f[f.length-1]=false}function Y(h,m,S){let E=0;let w=false;let I=false;let T=[h];let V;const ee=m.split("");const U=ee.length;const ce=e;const ne=e+h.length;const fe=c.script.quoteConvert===void 0?"none":c.script.quoteConvert;function be(){let ge=0;T=[];b=S;E=e;if(S==="string"&&/\s/.test(d[E+1])===true){ge=1;do{E=E+1;if(d[E]==="\n")ge=ge+1}while(E<x&&/\s/.test(d[E+1])===true);s.linesSpace=ge}}function re(){let ge="";function Pe(he){if(c.language!=="javascript"&&c.language!=="typescript"&&c.language!=="jsx"&&c.language!=="tsx"){const me=de=>de.replace(/\s*$/," ");const Oe=de=>de.replace(/^\s*/," ");if(/\{(#|\/|(%>)|(%\]))/.test(he)||/\}%(>|\])/.test(he))return he;he=he.replace(/\{((\{+)|%-?)\s*/g,me);he=he.replace(/\s*((\}\}+)|(-?%\}))/g,Oe);return he}return he}if(p(h,34)&&fe==="single"){T[0]="'";T[T.length-1]="'"}else if(p(h,39)&&fe==="double"){T[0]='"';T[T.length-1]='"'}else if(w===true){ge=T[T.length-1];T.pop();T.pop();T.push(ge)}e=E;if(m==="\n"){e=e-1;T.pop()}l=T.join("");if(p(h,34)||p(h,39)||h==="{{"||h==="{%"){l=Pe(l)}if(h==="{%"||h==="{{"){V=A(l);b=V[0];X(V[1]);return}if(S==="string"){b="string";if(c.language==="json"){l=l.replace(/\u0000/g,"\\u0000").replace(/\u0001/g,"\\u0001").replace(/\u0002/g,"\\u0002").replace(/\u0003/g,"\\u0003").replace(/\u0004/g,"\\u0004").replace(/\u0005/g,"\\u0005").replace(/\u0006/g,"\\u0006").replace(/\u0007/g,"\\u0007").replace(/\u0008/g,"\\u0008").replace(/\u0009/g,"\\u0009").replace(/\u000a/g,"\\u000a").replace(/\u000b/g,"\\u000b").replace(/\u000c/g,"\\u000c").replace(/\u000d/g,"\\u000d").replace(/\u000e/g,"\\u000e").replace(/\u000f/g,"\\u000f").replace(/\u0010/g,"\\u0010").replace(/\u0011/g,"\\u0011").replace(/\u0012/g,"\\u0012").replace(/\u0013/g,"\\u0013").replace(/\u0014/g,"\\u0014").replace(/\u0015/g,"\\u0015").replace(/\u0016/g,"\\u0016").replace(/\u0017/g,"\\u0017").replace(/\u0018/g,"\\u0018").replace(/\u0019/g,"\\u0019").replace(/\u001a/g,"\\u001a").replace(/\u001b/g,"\\u001b").replace(/\u001c/g,"\\u001c").replace(/\u001d/g,"\\u001d").replace(/\u001e/g,"\\u001e").replace(/\u001f/g,"\\u001f")}else if(h.indexOf("#!")===0){l=l.slice(0,l.length-1);s.linesSpace=2}else if(s.structure[s.structure.length-1][0]!=="object"||s.structure[s.structure.length-1][0]==="object"&&Z(1,false)!==":"&&ie(n.token[s.count],44)&&ie(n.token[s.count],123)){if(l.length>c.wrap&&c.wrap>0||c.wrap!==0&&n.token[s.count]==="+"&&(n.token[s.count-1].charAt(0)==='"'||n.token[s.count-1].charAt(0)==="'")){let he=l;let me="";let Oe=fe==="double"?'"':fe==="single"?"'":he.charAt(0);const de=c.wrap;const Me=/u[0-9a-fA-F]{4}/;const Ge=/x[0-9a-fA-F]{2}/;he=he.slice(1,he.length-1);if(n.token[s.count]==="+"&&(n.token[s.count-1].charAt(0)==='"'||n.token[s.count-1].charAt(0)==="'")){s.pop(n);Oe=n.token[s.count].charAt(0);he=n.token[s.count].slice(1,n.token[s.count].length-1)+he;s.pop(n)}if(he.length>de&&de>0){do{me=he.slice(0,de);if(me.charAt(de-5)==="\\"&&Me.test(he.slice(de-4,de+1))){me=me.slice(0,de-5)}else if(me.charAt(de-4)==="\\"&&Me.test(he.slice(de-3,de+2))){me=me.slice(0,de-4)}else if(me.charAt(de-3)==="\\"&&(Me.test(he.slice(de-2,de+3))||Ge.test(he.slice(de-2,de+1)))){me=me.slice(0,de-3)}else if(me.charAt(de-2)==="\\"&&(Me.test(he.slice(de-1,de+4))||Ge.test(he.slice(de-1,de+2)))){me=me.slice(0,de-2)}else if(me.charAt(de-1)==="\\"){me=me.slice(0,de-1)}me=Oe+me+Oe;he=he.slice(me.length-2);l=me;b="string";X("");s.linesSpace=0;l="+";b="operator";X("")}while(he.length>de)}if(he===""){l=Oe+Oe}else{l=Oe+he+Oe}b="string"}}}else if(/\{\s*\?>$/.test(l)){b="template_start"}else{b=S}if(l.length>0)X("")}if(j>-1)y();if(d[e-1]==="\\"&&te(e-1)===true&&(d[e]==='"'||d[e]==="'")){s.pop(n);if(n.token[0]==="{"){if(d[e]==='"'){h='"';m='\\"';T=['"']}else{h="'";m="\\'";T=["'"]}w=true}else{if(d[e]==='"'){T=['\\"'];re();return}T=["\\'"];re();return}}E=ne;if(E<x){do{if(n.token[0]!=="{"&&n.token[0]!=="["&&fe!=="none"&&(d[E]==='"'||d[E]==="'")){if(d[E-1]==="\\"){if(te(E-1)===true){if(fe==="double"&&d[E]==="'"){T.pop()}else if(fe==="single"&&d[E]==='"'){T.pop()}}}else if(fe==="double"&&d[E]==='"'&&d[e]==="'"){d[E]='\\"'}else if(fe==="single"&&d[E]==="'"&&d[e]==='"'){d[E]="\\'"}T.push(d[E])}else if(E>ce){I=true;if(d[E]==="{"&&d[E+1]==="%"&&d[E+2]!==h){re();Y("{%","%}","template");be()}else if(d[E]==="{"&&d[E+1]==="{"&&d[E+2]!==h){re();Y("{{","}}","template");be()}else{I=false;T.push(d[E])}}else{T.push(d[E])}if((h==='"'||h==="'")&&(I===true||E>ce)&&c.language!=="json"&&d[E-1]!=="\\"&&d[E]!=='"'&&d[E]!=="'"&&(d[E]==="\n"||E===x-1)){s.error="Unterminated string in script on line number "+s.lineNumber;break}if(d[E]===ee[U-1]&&(d[E-1]!=="\\"||te(E-1)===false)){if(U===1)break;if(T[E-ne]===ee[0]&&T.slice(E-ne-U+2).join("")===m)break}E=E+1}while(E<x)}re()}function K(){O(false);$();if(j>-1)y();M=s.wrapCommentLine({chars:d,end:x,lexer:"script",opening:"//",start:e,terminator:"\n"});e=M[1];if(M[0]!==""){l=M[0];b=/^(\/\/\s*@prettify-ignore-start)/.test(l)?"ignore":"comment";if(l.indexOf("# sourceMappingURL=")===2){D[0]=s.count+1;D[1]=l}s.push(n,{begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"script",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:l,types:b},"")}}function le(){let h=0;let m=false;let S=false;let E=0;let w=0;let I=0;let T="";let V="";let ee="";const U=[];const ce=f[f.length-1];const ne="0123456789=<>+-*?|^:&.,;%(){}[]~";function fe(){if(l==="(")s.structure[s.structure.length-1]=["paren",s.count];H.lexers.markup(U.join(""))}if(j>-1)y();V=s.count>0?n.token[s.count-1]:"";ee=s.count>0?n.types[s.count-1]:"";T=Z(1,false);if(c.language!=="jsx"&&c.language!=="tsx"&&/\d/.test(T)===false&&(l==="function"||V==="=>"||V==="void"||V==="."||n.stack[s.count]==="arguments"||b==="type"&&V==="type"||b==="reference"&&(ee==="operator"||V==="function"||V==="class"||V==="new")||b==="type"&&ee==="operator"||l==="return"||b==="operator")){const be=[];let re=0;let ge=0;h=e;do{be.push(d[h]);if(d[h]==="<"){re=re+1}else if(d[h]===">"){re=re-1;if(re<1)break}h=h+1}while(h<x);ge=e;e=h;T=Z(1,false);if(d[h]===">"&&(ce===true||V==="=>"||V==="."||ee!=="operator"||ee==="operator"&&(T==="("||T==="="))){b="generic";l=be.join("").replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", ");X("");return}e=ge}h=s.count;if(n.types[h]==="comment"){do{h=h-1}while(h>0&&n.types[h]==="comment")}if(ce===false&&Z(1,false)!==">"&&(d[e]!=="<"&&ne.indexOf(d[e+1])>-1||n.token[h]==="++"||n.token[h]==="--"||/\s/.test(d[e+1])===true||/\d/.test(d[e+1])===true&&(b==="operator"||b==="string"||b==="number"||b==="reference"||b==="word"&&l!=="return"))){b="operator";l=W();return X("")}if(c.language!=="typescript"&&(n.token[h]==="return"||n.types[h]==="operator"||n.types[h]==="start"||n.types[h]==="separator"||n.types[h]==="jsx_attribute_start"||n.token[h]==="}"&&s.structure[s.structure.length-1][0]==="global")){b="markup";c.language="jsx";do{U.push(d[e]);if(d[e]==="{"){w=w+1;m=true}else if(d[e]==="}"){w=w-1;if(w===0)m=false}else if(d[e]==="<"&&m===false){if(d[e+1]==="<"){do{U.push(d[e]);e=e+1}while(e<x&&d[e+1]==="<")}E=E+1;if(Z(1,false)==="/")S=true}else if(d[e]===">"&&m===false){if(d[e+1]===">"){do{U.push(d[e]);e=e+1}while(d[e+1]===">")}E=E-1;if(S===true){I=I-1}else if(d[e-1]!=="/"){I=I+1}if(E===0&&w===0&&I<1){T=Z(2,false);if(T.charAt(0)!=="<")return fe();if(T.charAt(0)==="<"&&ne.indexOf(T.charAt(1))<0&&/\s/.test(T.charAt(1))===false){h=e+1;do{h=h+1;if(d[h]===">"||/\s/.test(d[h-1])&&ne.indexOf(d[h])<0)break;if(ne.indexOf(d[h])>-1)return fe()}while(h<x)}else{return fe()}}S=false}e=e+1}while(e<x);return fe()}b="operator";l=W();X("")}function Z(h,m){let S=m===true?e:e+1;let E="";if(typeof h!=="number"||h<1)h=1;if(d[e]==="/"){if(d[e+1]==="/"){E="\n"}else if(d[e+1]==="*"){E="/"}}if(S<x){do{if(/\s/.test(d[S])===false){if(d[S]==="/"){if(E===""){if(d[S+1]==="/"){E="\n"}else if(d[S+1]==="*"){E="/"}}else if(E==="/"&&d[S-1]==="*"){E=""}}if(E===""&&d[S-1]+d[S]!=="*/")return d.slice(S,S+h).join("")}else if(E==="\n"&&d[S]==="\n"){E=""}S=S+1}while(S<x)}return""}function ae(){const h=x;const m=[d[e]];let S=0;let E=/zz/;let w=m[0]===".";if(e<x-2&&d[e]==="0"){if(d[e+1]==="x"){E=/[0-9a-fA-F]/}else if(d[e+1]==="o"){E=/[0-9]/}else if(d[e+1]==="b"){E=/0|1/}if(E.test(d[e+2])===true){m.push(d[e+1]);S=e+1;do{S=S+1;m.push(d[S])}while(E.test(d[S+1])===true);e=S;return m.join("")}}S=e+1;if(S<h){do{if(/[0-9]/.test(d[S])||d[S]==="."&&w===false){m.push(d[S]);if(d[S]===".")w=true}else{break}S=S+1}while(S<h)}if(S<h-1&&(/\d/.test(d[S-1])===true||/\d/.test(d[S-2])===true&&(d[S-1]==="-"||d[S-1]==="+"))&&(d[S]==="e"||d[S]==="E")){m.push(d[S]);if(d[S+1]==="-"||d[S+1]==="+"){m.push(d[S+1]);S=S+1}w=false;S=S+1;if(S<h){do{if(/[0-9]/.test(d[S])||d[S]==="."&&w===false){m.push(d[S]);if(d[S]===".")w=true}else{break}S=S+1}while(S<h)}}e=S-1;return m.join("")}function W(){let h=0;let m=0;let S=x;let E="";const w=["=","<",">","+","*","?","|","^",":","&","%","~"];const I=w.length;if(j>-1)y();if(d[e]==="/"&&(s.count>-1&&(b!=="word"&&b!=="reference"||l==="typeof"||l==="return"||l==="else")&&b!=="number"&&b!=="string"&&b!=="end")){if(l==="return"||l==="typeof"||l==="else"||b!=="word"){l=ye();b="regex"}else{l="/";b="operator"}X("");return"regex"}if(d[e]==="?"&&("+-*/.?".indexOf(d[e+1])>-1||d[e+1]===":"&&w.join("").indexOf(d[e+2])<0)){if(d[e+1]==="."&&/\d/.test(d[e+2])===false){E="?."}else if(d[e+1]==="?"){E="??"}if(E==="")return"?"}if(d[e]===":"&&"+-*/".indexOf(d[e+1])>-1)return":";if(e<x-1){if(d[e]!=="<"&&d[e+1]==="<")return d[e];if(d[e]==="!"&&d[e+1]==="/")return"!";if(d[e]==="-"){f[f.length-1]=false;if(d[e+1]==="-"){E="--"}else if(d[e+1]==="="){E="-="}else if(d[e+1]===">"){E="->"}if(E==="")return"-"}if(d[e]==="+"){f[f.length-1]=false;if(d[e+1]==="+"){E="++"}else if(d[e+1]==="="){E="+="}if(E==="")return"+"}if(d[e]==="="&&d[e+1]!=="="&&d[e+1]!=="!"&&d[e+1]!==">"){f[f.length-1]=false;return"="}}if(d[e]===":"){if(c.language==="typescript"){if(n.stack[s.count]==="arguments"){if(n.token[s.count]==="?"){s.pop(n);E="?:";e=e-1}f[f.length-1]=true}else if(l===")"&&(n.token[n.begin[s.count]-1]==="function"||n.token[n.begin[s.count]-2]==="function")){f[f.length-1]=true}else if(b==="reference"){h=s.count;let T=false;do{if(n.begin[h]===n.begin[s.count]){if(h<s.count&&n.token[h]===":"&&n.types[h+1]!=="type")T=true;if(n.token[h]==="?"&&T===false)break;if(n.token[h]===";"||n.token[h]==="x;")break;if(n.token[h]==="var"||n.token[h]==="let"||n.token[h]==="const"||n.types[h]==="type"){f[f.length-1]=true;break}}else{if(n.types[h]==="type_end"){f[f.length-1]=true;break}h=n.begin[h]}h=h-1}while(h>n.begin[s.count])}}else if(n.token[s.count-1]==="["&&(n.types[s.count]==="word"||n.types[s.count]==="reference")){s.structure[s.structure.length-1][0]="attribute";n.stack[s.count]="attribute"}}if(E===""){if(d[e+1]==="+"&&d[e+2]==="+"||d[e+1]==="-"&&d[e+2]==="-"){E=d[e]}else{const T=[d[e]];h=e+1;if(h<S){do{if(d[h]==="+"&&d[h+1]==="+"||d[h]==="-"&&d[h+1]==="-")break;m=0;if(m<I){do{if(d[h]===w[m]){T.push(w[m]);break}m=m+1}while(m<I)}if(m===I)break;h=h+1}while(h<S)}E=T.join("")}}e=e+(E.length-1);if(E==="=>"&&l===")"){h=s.count;S=n.begin[h];do{if(n.begin[h]===S)n.stack[h]="method";h=h-1}while(h>S-1)}return E}function se(){let h=true;let m="+";let S="";let E="";let w="";let I=0;let T=0;let V=0;let ee="";const U=[];function ce(){V=n.begin[V]-1;if(n.types[V]==="end"){ce()}else if(n.token[V-1]==="."){ne()}}function ne(){V=V-2;if(n.types[V]==="end"){ce()}else if(n.token[V-1]==="."){ne()}}function fe(){let re=0;const ge=U.length;if(re<ge){do{s.push(n,U[re],"");re=re+1}while(re<ge)}}function be(re){const ge=Se(null);ge.begin=n.begin[re];ge.ender=n.ender[re];ge.lexer=n.lexer[re];ge.lines=n.lines[re];ge.stack=n.stack[re];ge.token=n.token[re];ge.types=n.types[re];return ge}S=n.token[s.count];E=n.token[s.count-1];w=n.token[s.count-2];if(S!=="++"&&S!=="--"&&E!=="++"&&E!=="--"){V=s.count;if(n.types[V]==="end"){ce()}else if(n.token[V-1]==="."){ne()}}if(n.token[V-1]==="++"||n.token[V-1]==="--"){if("startendoperator".indexOf(n.types[V-2])>-1)return;I=V;if(I<s.count+1){do{U.push(be(I));I=I+1}while(I<s.count+1);s.splice({data:n,howmany:s.count-V,index:V})}}else{if(c.script.correct===false||S!=="++"&&S!=="--"&&E!=="++"&&E!=="--"){return}ee=Z(1,false);if((S==="++"||S==="--")&&(d[e]===";"||ee===";"||d[e]==="}"||ee==="}"||d[e]===")"||ee===")")){m=n.stack[s.count];if(m==="array"||m==="method"||m==="object"||m==="paren"||m==="notation"||n.token[n.begin[s.count]-1]==="while"&&m!=="while"){return}I=s.count;do{I=I-1;if(n.token[I]==="return")return;if(n.types[I]==="end"){do{I=n.begin[I]-1}while(n.types[I]==="end"&&I>0)}}while(I>0&&(n.token[I]==="."||n.types[I]==="word"||n.types[I]==="reference"||n.types[I]==="end"));if(n.token[I]===","&&d[e]!==";"&&ee!==";"&&d[e]!=="}"&&ee!=="}"&&d[e]!==")"&&ee!==")"){return}if(n.types[I]==="operator"){if(n.stack[I]==="switch"&&n.token[I]===":"){do{I=I-1;if(n.types[I]==="start"){T=T-1;if(T<0)break}else if(n.types[I]==="end"){T=T+1}if(n.token[I]==="?"&&T===0)return}while(I>0)}else{return}}h=false;m=S==="--"?"-":"+"}else if(w==="["||w===";"||w==="x;"||w==="}"||w==="{"||w==="("||w===")"||w===","||w==="return"){if(S==="++"||S==="--"){if(w==="["||w==="("||w===","||w==="return")return;if(S==="--")m="-";h=false}else if(E==="--"||S==="--"){m="-"}}else{return}if(h===false)r=s.pop(n);V=s.count;if(n.types[V]==="end"){ce()}else if(n.token[V-1]==="."){ne()}I=V;if(I<s.count+1){do{U.push(be(I));I=I+1}while(I<s.count+1)}}if(h===true){s.splice({data:n,howmany:1,index:V-1});l="=";b="operator";X("");fe();l=m;b="operator";X("");l="1";b="number";X("")}else{l="=";b="operator";X("");fe();l=m;b="operator";X("");l="1";b="number";X("")}l=n.token[s.count];b=n.types[s.count];if(ee==="}"&&d[e]!==";")O(false)}function X(h){const m=Se(null);m.begin=s.structure[s.structure.length-1][1];m.ender=-1;m.lexer="script";m.lines=s.linesSpace;m.stack=s.structure[s.structure.length-1][0];m.token=l;m.types=b;s.push(n,m,h)}function ye(){let h=e+1;let m=0;let S=0;let E="";let w=false;const I=x;const T=["/"];if(h<I){do{T.push(d[h]);if(d[h-1]!=="\\"||d[h-2]==="\\"){if(d[h]==="["){w=true}if(d[h]==="]"){w=false}}if(d[h]==="/"&&w===false){if(d[h-1]==="\\"){S=0;m=h-1;if(m>0){do{if(d[m]==="\\"){S=S+1}else{break}m=m-1}while(m>0)}if(S%2===0){break}}else{break}}h=h+1}while(h<I)}if(d[h+1]==="g"||d[h+1]==="i"||d[h+1]==="m"||d[h+1]==="y"||d[h+1]==="u"){T.push(d[h+1]);if(d[h+2]!==d[h+1]&&(d[h+2]==="g"||d[h+2]==="i"||d[h+2]==="m"||d[h+2]==="y"||d[h+2]==="u")){T.push(d[h+2]);if(d[h+3]!==d[h+1]&&d[h+3]!==d[h+2]&&(d[h+3]==="g"||d[h+3]==="i"||d[h+3]==="m"||d[h+3]==="y"||d[h+3]==="u")){T.push(d[h+3]);if(d[h+4]!==d[h+1]&&d[h+4]!==d[h+2]&&d[h+4]!==d[h+3]&&(d[h+4]==="g"||d[h+4]==="i"||d[h+4]==="m"||d[h+4]==="y"||d[h+4]==="u")){T.push(d[h+4]);if(d[h+5]!==d[h+1]&&d[h+5]!==d[h+2]&&d[h+5]!==d[h+3]&&d[h+5]!==d[h+4]&&(d[h+5]==="g"||d[h+5]==="i"||d[h+5]==="m"||d[h+5]==="y"||d[h+5]==="u")){T.push(d[h+4]);e=h+5}else{e=h+4}}else{e=h+3}}else{e=h+2}}else{e=h+1}}else{e=h}E=T.join("");return E}function te(h){const m=h;do{h=h-1}while(d[h]==="\\"&&h>0);return(m-h)%2===1}function J(h){let m=s.count;let S="";let E="";let w="";let I=false;u.push(h);if(h==="{"&&(n.types[s.count]==="type"||n.types[s.count]==="type_end"||n.types[s.count]==="generic")){let T=0;if(n.types[s.count]==="type_end")m=n.begin[s.count];T=m;do{m=m-1;if(n.begin[m]!==T&&n.begin[m]!==-1)break;if(n.token[m]===":")break}while(m>n.begin[m]);if(n.token[m]===":"&&n.stack[m-1]==="arguments"){f.push(false);I=true}else{f.push(f[f.length-1])}m=s.count}else if(h==="["&&n.types[s.count]==="type_end"){f.push(true)}else{f.push(f[f.length-1])}if(j>-1){y();m=s.count}if(k.len>-1)k.count[k.len]=k.count[k.len]+1;if(n.token[m-1]==="function"){F.push(["function",m+1])}else{F.push([l,m+1])}l=h;if(f[f.length-1]===true){b="type_start"}else{b="start"}if(h==="("||h==="x("){_()}else if(h==="{"){if(t>-1){if(n.begin[t-1]===n.begin[n.begin[m]-1]||n.token[n.begin[m]]==="x("){t=-1;if(c.script.correct===true){G(")")}else{G("x)")}_();l="{";b="start"}}else if(l===")"){_()}if(b==="comment"&&n.token[m-1]===")"){l=n.token[m];n.token[m]="{";b=n.types[m];n.types[m]="start"}}S=(()=>{let T=s.count;if(n.types[T]==="comment"){do{T=T-1}while(T>0&&n.types[T]==="comment")}return n.token[T]})();E=n.stack[m]===void 0?"":(()=>{let T=s.count;if(n.types[T]==="comment"){do{T=T-1}while(T>0&&n.types[T]==="comment")}return n.token[n.begin[T]-1]})();if(p(l,123)&&(n.types[m]==="word"||n.token[m]==="]")){let T=m;if(n.token[T]==="]"){do{T=n.begin[T]-1}while(n.token[T]==="]")}do{if(n.types[T]==="start"||n.types[T]==="end"||n.types[T]==="operator")break;T=T-1}while(T>0);if(n.token[T]===":"&&n.stack[T-1]==="arguments"){w="function";C.push(i);i=[]}}if(b==="type_start"){w="data_type"}else if(w===""&&(p(l,123)||l==="x{")){if(S==="else"||S==="do"||S==="try"||S==="finally"||S==="switch"){w=S}else if(B[B.length-1]===0&&S!=="return"){B.pop();w="class"}else if(n.token[m-1]==="class"){w="class"}else if(n.token[m]==="]"&&n.token[m-1]==="["){w="array"}else if((n.types[m]==="word"||n.types[m]==="reference")&&(n.types[m-1]==="word"||n.types[m-1]==="reference"||n.token[m-1]==="?"&&(n.types[m-2]==="word"||n.types[m-2]==="reference"))&&n.token[m]!=="in"&&n.token[m-1]!=="export"&&n.token[m-1]!=="import"){w="map"}else if(n.stack[m]==="method"&&n.types[m]==="end"&&(n.types[n.begin[m]-1]==="word"||n.types[n.begin[m]-1]==="reference")&&n.token[n.begin[m]-2]==="new"){w="initializer"}else if(p(l,123)&&(p(S,41)||S==="x)")&&(n.types[n.begin[m]-1]==="word"||n.types[n.begin[m]-1]==="reference"||n.token[n.begin[m]-1]==="]")){if(E==="if"){w="if"}else if(E==="for"){w="for"}else if(E==="while"){w="while"}else if(E==="class"){w="class"}else if(E==="switch"||n.token[n.begin[m]-1]==="switch"){w="switch"}else if(E==="catch"){w="catch"}else{w="function"}}else if(p(l,123)&&(S===";"||S==="x;")){w="block"}else if(p(l,123)&&n.token[m]===":"&&n.stack[m]==="switch"){w="block"}else if(n.token[m-1]==="import"||n.token[m-2]==="import"||n.token[m-1]==="export"||n.token[m-2]==="export"){w="object"}else if(p(S,41)&&(L[0]==="function"||L[0]==="if"||L[0]==="for"||L[0]==="class"||L[0]==="while"||L[0]==="switch"||L[0]==="catch")){w=L[0]}else if(n.stack[m]==="notation"){w="function"}else if((n.types[m]==="number"||n.types[m]==="string"||n.types[m]==="word"||n.types[m]==="reference")&&(n.types[m-1]==="word"||n.types[m-1]==="reference")&&n.token[n.begin[m]-1]!=="for"){w="function"}else if(s.structure.length>0&&n.token[m]!==":"&&s.structure[s.structure.length-1][0]==="object"&&(n.token[n.begin[m]-2]==="{"||n.token[n.begin[m]-2]===",")){w="function"}else if(n.types[L[1]-1]==="markup"&&n.token[L[1]-3]==="function"){w="function"}else if(S==="=>"){w="function"}else if(I===true||n.types[s.count]==="type_end"&&n.stack[n.begin[s.count]-2]==="arguments"){w="function"}else if(p(S,41)&&n.stack[m]==="method"&&(n.types[n.begin[m]-1]==="word"||n.types[n.begin[m]-1]==="property"||n.types[n.begin[m]-1]==="reference")){w="function"}else if(n.types[m]==="word"&&p(l,123)&&n.token[m]!=="return"&&n.token[m]!=="in"&&n.token[m]!=="import"&&n.token[m]!=="const"&&n.token[m]!=="let"&&n.token[m]!==""){w="block"}else if(p(l,123)&&"if|else|for|while|function|class|switch|catch|finally".indexOf(n.stack[m])>-1&&(n.token[m]==="x}"||n.token[m]==="}")){w="block"}else if(n.stack[m]==="arguments"){w="function"}else if(n.types[m]==="generic"){do{m=m-1;if(n.token[m]==="function"||n.stack[m]==="arguments"){w="function";break}if(n.token[m]==="interface"){w="map";break}if(n.token[m]===";"){w="object";break}}while(m>n.begin[s.count])}else{w="object"}if(w!=="object"&&w!=="class"){if(w==="function"){C.push(i);i=[]}else{C.push([])}}}else if(l==="["){w="array"}else if(l==="("||l==="x("){if(S==="function"||n.token[m-1]==="function"||n.token[m-1]==="function*"||n.token[m-2]==="function"){w="arguments"}else if(n.token[m-1]==="."||n.token[n.begin[m]-2]==="."){w="method"}else if(n.types[m]==="generic"){w="method"}else if(n.token[m]==="}"&&n.stack[m]==="function"){w="method"}else if(S==="if"||S==="for"||S==="class"||S==="while"||S==="catch"||S==="finally"||S==="switch"||S==="with"){w="expression"}else if(n.types[m]==="word"||n.types[m]==="property"||n.types[m]==="reference"){w="method"}else{w="paren"}}X(w);if(B.length>0)B[B.length-1]=B[B.length-1]+1}function Q(){const h=[d[e]];e=e+1;if(e<x){do{h.push(d[e]);if(d[e]==="`"&&(d[e-1]!=="\\"||te(e-1)===false))break;if(d[e-1]==="$"&&d[e]==="{"&&(d[e-2]!=="\\"||te(e-2)===false))break;e=e+1}while(e<x)}return h.join("")}function A(h){let m=2;let S=0;let E="";const w=h.slice(0,2);const I=h.length;if(h.charAt(2)==="-")m=m+1;if(/\s/.test(h.charAt(m))===true){do{m=m+1}while(/\s/.test(h.charAt(m))===true&&m<I)}S=m;do{S=S+1}while(/\s/.test(h.charAt(S))===false&&h.charAt(S)!=="("&&S<I);if(S===I)S=h.length-2;E=h.slice(m,S);if(E==="else"||w==="{%"&&(E==="elseif"||E==="when"||E==="elif"||E==="elsif")){return["template_else",`template_${E}`]}if(w==="{{"){if(E==="end")return["template_end",""];if(E==="block"&&/\{%\s*\w/.test(a)===false||E==="define"||E==="form"||E==="if"||E==="unless"||E==="range"||E==="with"){return["template_start",`template_${E}`]}return["template",""]}S=g.length-1;if(S>-1){do{if(E===g[S]&&(E!=="block"||/\{%\s*\w/.test(a)===false)){return["template_start",`template_${E}`]}if(E==="end"+g[S]){return["template_end",""]}S=S-1}while(S>-1)}return["template",""]}function N(){k.count.pop();k.index.pop();k.word.pop();k.len=k.len-1}function y(){let h=j;let m=1;let S="";let E="";let w=l;let I=b;const T=[];function V(){u.push("x{");s.splice({data:n,howmany:1,index:s.count-3})}function ee(U,ce,ne){const fe=n.begin[U];let be=0;do{if(n.token[U]===ce&&n.types[U]==="word"){if(ne===true){n.types[U]="reference"}else if(n.begin[U]>fe&&n.token[n.begin[U]]==="{"&&n.stack[U]!=="object"&&n.stack[U]!=="class"&&n.stack[U]!=="data_type"){if(n.stack[U]==="function"){n.types[U]="reference"}else{be=n.begin[U];do{if(n.stack[be]==="function"){n.types[U]="reference";break}be=n.begin[be]}while(be>fe)}}}U=U-1}while(U>fe)}do{T.push(d[h]);if(d[h]==="\\"){s.error=`Illegal escape in JavaScript on line number ${s.lineNumber}`}h=h+1}while(h<e);if(l.charAt(0)==="\u201C"){s.error=`Quote looking character (\u201C, \\u201c) used instead of actual quotes on line number ${s.lineNumber}`}else if(l.charAt(0)==="\u201D"){s.error=`Quote looking character (\u201D, \\u201d) used instead of actual quotes on line number ${s.lineNumber}`}S=T.join("");j=-1;if(s.count>0&&S==="function"&&n.token[s.count]==="("&&(n.token[s.count-1]==="{"||n.token[s.count-1]==="x{")){n.types[s.count]="start"}if(s.count>1&&S==="function"&&l==="("&&(n.token[s.count-1]==="}"||n.token[s.count-1]==="x}")){if(n.token[s.count-1]==="}"){h=s.count-2;if(h>-1){do{if(n.types[h]==="end"){m=m+1}else if(n.types[h]==="start"||n.types[h]==="end"){m=m-1}if(m===0)break;h=h-1}while(h>-1)}if(n.token[h]==="{"&&n.token[h-1]===")"){m=1;h=h-2;if(h>-1){do{if(n.types[h]==="end"){m=m+1}else if(n.types[h]==="start"||n.types[h]==="end"){m=m-1}if(m===0)break;h=h-1}while(h>-1)}if(n.token[h-1]!=="function"&&n.token[h-2]!=="function"){n.types[s.count]="start"}}}else{n.types[s.count]="start"}}if(c.script.correct===true&&(S==="Object"||S==="Array")&&d[e+1]==="("&&d[e+2]===")"&&n.token[s.count-1]==="="&&n.token[s.count]==="new"){if(S==="Object"){n.token[s.count]="{";l="}";n.stack[s.count]="object";s.structure[s.structure.length-1][0]="object"}else{n.token[s.count]="[";l="]";n.stack[s.count]="array";s.structure[s.structure.length-1][0]="array"}n.types[s.count]="start";b="end";d[e+1]="";d[e+2]="";e=e+2}else{m=s.count;h=m;if(c.script.variableList!=="none"&&(S==="var"||S==="let"||S==="const")){if(n.types[m]==="comment"){do{m=m-1}while(m>0&&n.types[m]==="comment")}if(c.script.variableList==="list"&&k.len>-1&&k.index[k.len]===m&&S===k.word[k.len]){l=",";b="separator";n.token[m]=l;n.types[m]=b;k.count[k.len]=0;k.index[k.len]=m;k.word[k.len]=S;return}k.len=k.len+1;k.count.push(0);k.index.push(m);k.word.push(S);m=h}else if(k.len>-1&&S!==k.word[k.len]&&s.count===k.index[k.len]&&n.token[k.index[k.len]]===";"&&l!==k.word[k.len]&&c.script.variableList==="list"){N()}if(S==="from"&&n.token[s.count]==="x;"&&n.token[s.count-1]==="}"){_()}if(S==="while"&&n.token[s.count]==="x;"&&n.token[s.count-1]==="}"){let U=0;let ce=s.count-2;if(ce>-1){do{if(n.types[ce]==="end"){U=U+1}else if(n.types[ce]==="start"){U=U-1}if(U<0){if(n.token[ce]==="{"&&n.token[ce-1]==="do")_();return}ce=ce-1}while(ce>-1)}}if(I==="comment"){let U=s.count;do{U=U-1}while(U>0&&n.types[U]==="comment");I=n.types[U];w=n.token[U]}E=Z(2,false);if(S==="void"){if(w===":"&&n.stack[s.count-1]==="arguments"){b="type"}else{b="word"}}else if((s.structure[s.structure.length-1][0]==="object"||s.structure[s.structure.length-1][0]==="class"||s.structure[s.structure.length-1][0]==="data_type")&&(n.token[s.count]==="{"||n.token[n.begin[s.count]]==="{"&&n.token[s.count]===","||n.types[s.count]==="template_end"&&(n.token[n.begin[s.count]-1]==="{"||n.token[n.begin[s.count]-1]===","))){if(S==="return"||S==="break"){b="word"}else{b="property"}}else if(f[f.length-1]===true||(c.language==="typescript"||c.language==="flow")&&w==="type"){b="type"}else if(C.length>0&&(w==="function"||w==="class"||w==="const"||w==="let"||w==="var"||w==="new"||w==="void")){b="reference";C[C.length-1].push(S);if(c.language==="javascript"||c.language==="jsx"||c.language==="typescript"||c.language==="tsx"){if(w==="var"||w==="function"&&n.types[s.count-1]!=="operator"&&n.types[s.count-1]!=="start"&&n.types[s.count-1]!=="end"){ee(s.count,S,true)}else{ee(s.count,S,false)}}else{ee(s.count,S,false)}}else if(s.structure[s.structure.length-1][0]==="arguments"&&b!=="operator"){b="reference";i.push(S)}else if(w===","&&n.stack[s.count]!=="method"&&(n.stack[s.count]!=="expression"||n.token[n.begin[s.count]-1]==="for")){let U=s.count;const ce=s.structure[s.structure.length-1][1];do{if(n.begin[U]===ce){if(n.token[U]===";")break;if(n.token[U]==="var"||n.token[U]==="let"||n.token[U]==="const"||n.token[U]==="type"){break}}else if(n.types[U]==="end"){U=n.begin[U]}U=U-1}while(U>ce);if(C.length>0&&n.token[U]==="var"){b="reference";C[C.length-1].push(S);if(c.language==="javascript"||c.language==="jsx"||c.language==="typescript"||c.language==="tsx"){ee(U,S,true)}else{ee(U,S,false)}}else if(C.length>0&&(n.token[U]==="let"||n.token[U]==="const"||n.token[U]==="type"&&(c.language==="typescript"||c.language==="tsx"))){b="reference";C[C.length-1].push(S);ee(U,S,false)}else{b="word"}}else if(s.structure[s.structure.length-1][0]!=="object"||s.structure[s.structure.length-1][0]==="object"&&l!==","&&l!=="{"){let U=C.length;let ce=0;if(U>0){do{U=U-1;ce=C[U].length;if(ce>0){do{ce=ce-1;if(S===C[U][ce])break}while(ce>0);if(S===C[U][ce])break}}while(U>0);if(C[U][ce]===S&&w!=="."){b="reference"}else{b="word"}}else{b="word"}}else{b="word"}l=S;if(S==="from"&&n.token[s.count]==="}")_()}X("");if(S==="class")B.push(0);if(S==="do"){E=Z(1,true);if(E!=="{"){l=c.script.correct===true?"{":"x{";b="start";u.push("x{");X("do")}}if(S==="else"){E=Z(2,true);let U=s.count-1;if(n.types[U]==="comment"){do{U=U-1}while(U>0&&n.types[U]==="comment")}if(n.token[U]==="x}"){if(n.token[s.count]==="else"){if(n.stack[s.count-1]!=="if"&&n.types[s.count-1]!=="comment"&&n.stack[s.count-1]!=="else"){u.pop();s.splice({data:n,howmany:0,index:s.count-1,record:{begin:n.begin[n.begin[n.begin[s.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:c.script.correct===true?"}":"x}",types:"end"}});if(s.structure.length>1){s.structure.splice(s.structure.length-2,1);s.structure[s.structure.length-1][1]=s.count}}else if(n.token[s.count-2]==="x}"&&P[0]!=="if"&&n.stack[s.count]==="else"){V()}else if(n.token[s.count-2]==="}"&&n.stack[s.count-2]==="if"&&P[0]==="if"&&n.token[P[1]-1]!=="if"&&n.token[n.begin[s.count-1]]==="x{"){V()}}else if(n.token[s.count]==="x}"&&n.stack[s.count]==="if"){V()}}if(E!=="if"&&E.charAt(0)!=="{"){l=c.script.correct===true?"{":"x{";b="start";u.push("x{");X("else")}}if((S==="for"||S==="if"||S==="switch"||S==="catch")&&n.token[s.count-1]!=="."){E=Z(1,true);if(E!=="("){t=s.count;if(c.script.correct===true){J("(")}else{J("x(")}}}}do{if(/\s/.test(d[e])){if(j>-1)y();e=s.spacer({array:d,end:x,index:e});if(s.linesSpace>1&&l!==";"&&q<s.count&&d[e+1]!=="}"){O(false);q=s.count}}else if(d[e]==="{"&&d[e+1]==="%"){Y("{%","%}","template")}else if(d[e]==="{"&&d[e+1]==="{"){Y("{{","}}","template")}else if(d[e]==="<"&&d[e+1]==="!"&&d[e+2]==="-"&&d[e+3]==="-"){Y("<!--","-->","comment")}else if(d[e]==="<"){le()}else if(d[e]==="/"&&(e===x-1||d[e+1]==="*")){z()}else if((s.count<0||n.lines[s.count]>0)&&d[e]==="#"&&d[e+1]==="!"&&(d[e+2]==="/"||d[e+2]==="[")){Y("#!"+d[e+2],"\n","string")}else if(d[e]==="/"&&(e===x-1||d[e+1]==="/")){K()}else if(p(d[e],96)||p(d[e],125)&&s.structure[s.structure.length-1][0]==="template_string"){if(j>-1)y();l=Q();if(p(l,125)&&l.slice(l.length-2)==="${"){b="template_string_else";X("template_string")}else if(l.slice(l.length-2)==="${"){b="template_string_start";X("template_string")}else if(p(l[0],125)){b="template_string_end";X("")}else{b="string";X("")}}else if(d[e]==='"'||d[e]==="'"){Y(d[e],d[e],"string")}else if(d[e]==="-"&&(e<x-1&&d[e+1]!=="="&&d[e+1]!=="-")&&(b==="number"||b==="word"||b==="reference")&&l!=="return"&&(l===")"||l==="]"||b==="word"||b==="reference"||b==="number")){if(j>-1)y();l="-";b="operator";X("")}else if(j===-1&&(d[e]!=="0"||d[e]==="0"&&d[e+1]!=="b")&&(/\d/.test(d[e])||e!==x-2&&d[e]==="-"&&d[e+1]==="."&&/\d/.test(d[e+2])||e!==x-1&&(d[e]==="-"||d[e]===".")&&/\d/.test(d[e+1]))){if(j>-1)y();if(b==="end"&&d[e]==="-"){l="-";b="operator"}else{l=ae();b="number"}X("")}else if(d[e]===":"&&d[e+1]===":"){if(j>-1)y();if(c.script.correct===true)se();_();e=e+1;l="::";b="separator";X("")}else if(d[e]===","){if(j>-1)y();if(c.script.correct===true)se();if(f[f.length-1]===true&&n.stack[s.count].indexOf("type")<0){f[f.length-1]=false}if(b==="comment"){oe()}else if(k.len>-1&&k.count[k.len]===0&&c.script.variableList==="each"){_();l=";";b="separator";X("");l=k.word[k.len];b="word";X("");k.index[k.len]=s.count}else{l=",";b="separator";_();X("")}}else if(d[e]==="."){if(j>-1)y();f[f.length-1]=false;if(d[e+1]==="."&&d[e+2]==="."){l="...";b="operator";e=e+2}else{_();l=".";b="separator"}if(/\s/.test(d[e-1])===true)s.linesSpace=1;X("")}else if(d[e]===";"){if(j>-1)y();if(f[f.length-1]===true&&n.stack[s.count].indexOf("type")<0){f[f.length-1]=false}if(B[B.length-1]===0)B.pop();if(k.len>-1&&k.count[k.len]===0){if(c.script.variableList==="each"){N()}else{k.index[k.len]=s.count+1}}if(c.script.correct===true)se();l=";";b="separator";if(n.token[s.count]==="x}"){R()}else{X("")}$()}else if(d[e]==="("||d[e]==="["||d[e]==="{"){J(d[e])}else if(d[e]===")"||d[e]==="]"||d[e]==="}"){G(d[e])}else if(d[e]==="*"&&n.stack[s.count]==="object"&&j<0&&/\s/.test(d[e+1])===false&&d[e+1]!=="="&&/\d/.test(d[e+1])===false){j=e}else if(d[e]==="="||d[e]==="&"||d[e]==="<"||d[e]===">"||d[e]==="+"||d[e]==="-"||d[e]==="*"||d[e]==="/"||d[e]==="!"||d[e]==="?"||d[e]==="|"||d[e]==="^"||d[e]===":"||d[e]==="%"||d[e]==="~"){l=W();if(l==="regex"){l=n.token[s.count]}else if(l==="*"&&n.token[s.count]==="function"){n.token[s.count]="function*"}else{b="operator";if(l!=="!"&&l!=="++"&&l!=="--")_();X("")}}else if(j<0&&d[e]!==""){j=e}if(k.len>-1&&s.count===k.index[k.len]+1&&n.token[k.index[k.len]]===";"&&l!==k.word[k.len]&&b!=="comment"&&c.script.variableList==="list"){N()}e=e+1}while(e<x);if(j>-1)y();if((n.token[s.count]!=="}"&&n.token[0]==="{"||n.token[0]!=="{")&&(n.token[s.count]!=="]"&&n.token[0]==="["||n.token[0]!=="[")){O(false)}if(D[0]===s.count){l="\n"+D[1];b="string";X("")}if(n.token[s.count]==="x;"&&(n.token[s.count-1]==="}"||n.token[s.count-1]==="]")&&n.begin[s.count-1]===0){s.pop(n)}return n};var Xe={markup:"markup",html:"markup",liquid:"markup",xml:"markup",javascript:"script",typescript:"script",jsx:"script",tsx:"script",json:"script",less:"style",scss:"style",sass:"style",css:"style",text:"text"};var Ve={html:"HTML",xhtml:"XHTML",liquid:"Liquid",xml:"XML",jsx:"JSX",tsx:"TSX",json:"JSON",yaml:"YAML",css:"CSS",scss:"SCSS",sass:"SASS",less:"LESS",text:"Plain Text",javascript:"JavaScript",typescript:"TypeScript"};function nt(o){return typeof o!=="string"||o.indexOf("html")>-1||Xe[o]===void 0?"markup":Xe[o]}function yt(o){if(typeof o!=="string"||Ve[o]===void 0)return o.toUpperCase();return Ve[o]}function ke(o){const a={};if(o==="unknown"){a.language=o;a.languageName="Unknown";a.lexer="markup"}else if(o==="xhtml"||o==="markup"){a.language="xml";a.languageName="XHTML";a.lexer="markup"}else{a.language=o;a.languageName=yt(o);a.lexer=nt(o)}if(H.hooks.language.length>0){for(const c of H.hooks.language){const e=c(a);if(typeof e==="object")Le(a,e)}}return a}Ze.reference=ke;Ze.listen=function(o){H.hooks.language.push(o)};function Ze(o){let a=[];let c=0;const e=/(((var)|(let)|(const)|(function)|(import))\s+(\w|\$)+[a-zA-Z0-9]*)/.test(o)&&/@import/.test(o)===false;const l=/((((final)|(public)|(private))\s+static)|(static\s+void))/.test(o);function b(){if(/\n\s*#+\s+/.test(o)||/^#+\s+/.test(o))return ke("markdown");if(/\$[a-zA-Z]/.test(o)||/\{\s*(\w|\.|\$|#)+\s*\{/.test(o)||/^[.#]?[\w][\w-]+\s+\{(?:\s+[a-z][a-z-]+:\s*\S+;)+\s+[&>+]?\s+[.#:]?[\w][\w-]\s+\{/.test(o)&&/:\s*@[a-zA-Z];/.test(o)===false)return ke("scss");if(/@[a-zA-Z]:/.test(o)||/\.[a-zA-Z]\(\);/.test(o))return ke("less");return ke("css")}function L(){let j=1;let t=v;let i=false;let r=false;const P=/((public)|(private))\s+(static\s+)?(((v|V)oid)|(class)|(final))/.test(o);function M(){if(o.indexOf("(")>-1||o.indexOf("=")>-1||o.indexOf(";")>-1&&o.indexOf("{")>-1){if(l===true||/\w<\w+(,\s+\w+)*>/.test(o))return ke("typescript");if(/(?:var|let|const)\s+\w+\s*:/.test(o)||/=\s*<\w+/.test(o))return ke("typescript");return ke("javascript")}return ke("unknown")}function n(){if(/:\s*(?:number|string|boolean|any|unknown)(?:\[\])?/.test(o)||/(?:public|private)\s+/.test(o)||/(?:export|declare)\s+type\s+\w+\s*=/.test(o)||/(?:namespace|interface|enum|implements|declare)\s+\w+/.test(o)||/(?:typeof|keyof|as)\s+\w+/.test(o)||/\w+\s+as\s+\w+/.test(o)||/\[\w+(?:(?::\s*\w+)|(?:\s+in\s+\w+))\]:/.test(o)||/\):\s*\w+(?:\[\])?\s*(?:=>|\{)\s+/.test(o)||/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/.test(o))return ke("typescript");if(/\s(class|var|const|let)\s+\w/.test(o)===false&&/<[a-zA-Z](?:-[a-zA-Z])?/.test(o)&&/<\/[a-zA-Z-](?:-[a-zA-Z])?/.test(o)&&(/\s?\{%/.test(o)||/{{/.test(o)))return ke("liquid");if(/^(\s*[$@])/.test(o)===false&&/([}\]];?\s*)$/.test(o)){if(/^\s*import\s+\*\s+as\s+\w+\s+from\s+['"]/.test(o)||/module\.export\s+=\s+/.test(o)||/export\s+default\s+\{/.test(o)||/[?:]\s*[{[]/.test(o)||/^(?:\s*return;?(?:\s+[{[])?)/.test(o)){return ke("javascript")}}if(/{%/.test(o)&&/{{/.test(o)&&/<\w/.test(o))return ke("liquid");if(/{\s*(?:\w|\.|@|#)+\s*\{/.test(o))return ke("less");if(/\$(\w|-)/.test(o))return ke("scss");if(/[;{:]\s*@\w/.test(o)===true)return ke("less");return ke("css")}if(j<c){do{if(i===false){if(p(a[j],42)&&p(a[j-1],47)){a[j-1]=v;i=true}else if(r===false&&j<c-6&&a[j].charCodeAt(0)===102&&a[j+1].charCodeAt(0)===105&&a[j+2].charCodeAt(0)===108&&a[j+3].charCodeAt(0)===116&&a[j+4].charCodeAt(0)===101&&a[j+5].charCodeAt(0)===114&&p(a[j+6],58)){r=true}}else if(i===true&&p(a[j],42)&&j!==c-1&&p(a[j+1],47)){i=false;a[j]=v;a[j+1]=v}else if(r===true&&p(a[j],59)){r=false;a[j]=v}if(i===true||r===true)a[j]=v;j=j+1}while(j<c)}t=a.join(v);if(/\s\/\//.test(o)===false&&/\/\/\s/.test(o)===false&&/^(\s*(\{|\[)(?!%))/.test(o)===true&&/((\]|\})\s*)$/.test(o)&&o.indexOf(",")!==-1)return ke("json");if(/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(o)===true&&(e===true||P===true||/console\.log\(/.test(o)===true||/export\s+default\s+class\s+/.test(o)===true||/export\s+(const|var|let|class)s+/.test(o)===true||/document\.get/.test(o)===true||/((=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(o)===true||o.indexOf("{")===-1||/^(\s*if\s+\()/.test(o)===true))return M();if(o.indexOf("{")>-1&&(/^(\s*[\u007b\u0024\u002e#@a-z0-9])/i.test(o)||/^(\s*\/(\*|\/))/.test(o)||/^(\s*\*\s*\{)/.test(o))&&/^(\s*if\s*\()/.test(o)===false&&/=\s*(\{|\[|\()/.test(t)===false&&(/(\+|-|=|\?)=/.test(t)===false||/\/\/\s*=+/.test(t)||/=+('|")?\)/.test(o)&&/;\s*base64/.test(o))&&/function(\s+\w+)*\s*\(/.test(t)===false)return n();return o.indexOf("{%")>-1?ke("liquid"):ke("unknown")}function q(){function j(){return/{%-?\s*(schema|for|if|unless|render|include)/.test(o)||/{%-?\s*end\w+/.test(o)||/{{-?\s*content_for/.test(o)||/{{-?\s*[a-zA-Z0-9_'".[\]]+\s*-?}}/.test(o)||/{%/.test(o)&&/%}/.test(o)&&/{{/.test(o)&&/}}/.test(o)?ke("liquid"):ke("html")}return/^(\s*<!doctype\s+html>)/i.test(o)||/^(\s*<html)/i.test(o)||/<form\s/i.test(o)&&/<label\s/i.test(o)&&/<input\s/i.test(o)||(/<img(\s+\w+=['"]?\S+['"]?)*\s+src\s*=/.test(o)||/<a(\s+\w+=['"]?\S+['"]?)*\s+href\s*=/.test(o))||/<ul\s/i.test(o)&&/<li\s/i.test(o)&&/<\/li>/i.test(o)&&/<\/ul>/i.test(o)||/<head\s*>/.test(o)&&/<\/head>/.test(o)||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(o)&&/XHTML\s+1\.1/.test(o)===false&&/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(o)===false?j():/\s?{[{%]-?/.test(o)?ke("liquid"):ke("xml")}if(o===null||o.replace(/\s+/g,v)===v)return ke("unknown");if((/\n\s*#{1,6}\s+/.test(o)||/\n\s*(?:\*|-|(?:\d+\.))\s/.test(o))&&(/\[( |x|X)\]/.test(o)||/\s[*_~]{1,2}\w+[*_~]{1,2}/.test(o)||/\n\s*```[a-zA-Z]*?\s+/.test(o)||/-+\|(-+\|)+/.test(o)))return ke("markdown");if(/^(\s*<!DOCTYPE\s+html>)/i.test(o))return q();if(/^\s*@(?:charset|import|include|keyframes|media|namespace|page)\b/.test(o))return b();if(l===false&&/=(>|=|-|\+|\*)/.test(o)===false&&/^(?:\s*((if)|(for)|(function))\s*\()/.test(o)===false&&/(?:\s|;|\})((if)|(for)|(function\s*\w*))\s*\(/.test(o)===false&&e===false&&/return\s*\w*\s*(;|\})/.test(o)===false&&(o===void 0||/^(?:\s*#(?!(!\/)))/.test(o)||/\n\s*(\.|@)\w+(\(|(\s*:))/.test(o)&&/>\s*<\w/.test(o)===false||(/^\s*:root\s*\{/.test(o)||/-{2}\w+\s*\{/.test(o)||/^\s*(?:body|button|hr|section|h[1-6]|p|strong|\*)\s+\{\s+/.test(o))))return b();a=o.replace(/\[[a-zA-Z][\w-]*=['"]?[a-zA-Z][\w-]*['"]?\]/g,v).split(v);c=a.length;if(/^(\s*({{|{%|<))/.test(o))return q();if(l===true||/^(?:[\s\w-]*<)/.test(o)===false&&/(?:>[\s\w-]*)$/.test(o)===false)return L();return(/^(?:\s*<\?xml)/.test(o)||/(?:>[\w\s:]*)?<(?:\/|!|#)?[\w\s:\-[]+/.test(o)||/^\s*</.test(o)&&/<\/\w+(\w|\d)+>\s*$/.test(o))&&(/^(?:[\s\w]*<)/.test(o)||/(?:>[\s\w]*)$/.test(o))||/^(?:\s*<s((cript)|(tyle)))/i.test(o)&&/(?:<\/s((cript)|(tyle))>\s*)$/i.test(o)?/^(?:[\s\w]*<)/.test(o)===false||/(?:>[\s\w]*)$/.test(o)===false?L():q():ke("unknown")}H.lexers.markup=function o(a){const{options:c}=H;const{data:e}=s;const l=c.language==="jsx"||c.language==="tsx";const b=c.language==="html"||c.language==="liquid";const L=c.markup;const q=L.attributeSortList.length;const j={end:0,index:-1,start:0,line:1};const t=a.split(v);const i=t.length;let r=0;let P=false;let M="javascript";let n=b?c.language:"html";let C=0;function x(f){if(b===true&&l===false){if(/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(f))return f;if(L.delimiterSpacing===true){f=f.replace(/{[{%]-?\s*/g,g=>g.replace(/\s*$/," "));f=f.replace(/\s*-?[%}]}/g,g=>g.replace(/^\s*/," "))}return f}return f}function d(f,g,k){if(f===e){if(g.types.indexOf("end")>-1){j.end=j.end+1}else if(g.types.indexOf("start")>-1){j.start=j.start+1}}j.index=s.count;j.line=s.lineNumber;s.push(f,g,k)}function F(f){let g=0;let k=v;const O=/^(?:<|{%-?|{{-?)=?\s*/;if(typeof f!=="string")return v;g=f.replace(O,"%").replace(/\s+/," ").indexOf(" ");k=f.replace(O," ");k=g<0?k.slice(1,f.length-1):k.slice(1,g);if(n==="html")k=k.toLowerCase();k=k.replace(/-?[%}]}$/,v);if(k.indexOf("(")>0)k=k.slice(0,k.indexOf("("));if(k==="?xml?")return"xml";return k}function u(f,g){const k=F(f);const O=gt({begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"markup",lines:e.lines[s.count]>0?1:0,stack:s.structure[s.structure.length-1][0],token:`</${s.structure[s.structure.length-1][0]}>`,types:"end"});d(e,O,v);if(pe.html.tags.has(s.structure[s.structure.length-1][0])&&(g===true&&s.structure.length>1||g===false&&`/${s.structure[s.structure.length-1][0]}`!==k)){do{O.begin=s.structure[s.structure.length-1][1];O.stack=s.structure[s.structure.length-1][0];O.token=`</${s.structure[s.structure.length-1][0]}>`;d(e,O,v)}while(pe.html.tags.has(s.structure[s.structure.length-1][0])&&(g===true&&s.structure.length>1||g===false&&`/${s.structure[s.structure.length-1][0]}`!==k))}}function B(f){const g={begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"markup",lines:s.linesSpace,stack:s.structure[s.structure.length-1][0],token:v,types:v};let k=0;let O=v;let R=v;let _=v;let z=v;let $=v;let oe=false;let G=false;let Y=false;let K=false;let le=false;let Z=false;let ae=false;let W=[];let se=[v,0];function X(te){const J=te.indexOf("=");if(J>0&&(J<te.indexOf('"')&&te.indexOf('"')>0||J<te.indexOf("'")&&te.indexOf("'")>0)){return[te.slice(0,J),te.slice(J+1)]}return[te,v]}function ye(){const te=s.count;const J=z.replace(/(\/)$/,v);const Q=L.quoteConvert;let A=0;let N=0;let y=0;let h=v;let m=v;let S=[];let E=W.length;function w(){let I=Ce(g.token,5);if(Y===true||Q==="none"||g.types.indexOf("attribute")<0||I===false&&Q==="single"&&g.token.indexOf('"')<0||I===false&&Q==="double"&&g.token.indexOf("'")<0){d(e,g,v)}else{let T=0;let V=false;const ee=g.token.split(v);const U=g.token.indexOf("=");const ce=ee.length-1;if(ie(ee[U+1],34)&&ie(ee[ee.length-1],34)&&Q==="single"&&I===false){d(e,g,v)}else if(ie(ee[U+1],39)&&ie(ee[ee.length-1],39)&&Q==="double"&&I===false){d(e,g,v)}else{T=U+2;if(Q==="double"){if(g.token.slice(U+2,ce).indexOf('"')>-1)V=true;ee[U+1]='"';ee[ee.length-1]='"'}else if(Q==="single"){if(g.token.slice(U+2,ce).indexOf("'")>-1)V=true;ee[U+1]="'";ee[ee.length-1]="'"}if(V===true||I===true){I=false;do{if(p(ee[T-1],123)&&(p(ee[T],37)||p(ee[T],123))){I=true}else if(p(ee[T],125)&&(p(ee[T-1],37)||p(ee[T-1],125))){I=false}if(I===true){if(p(ee[T],34)&&Q==="double"){ee[T]="'"}else if(p(ee[T],39)&&Q==="single"){ee[T]='"'}}else{if(p(ee[T],39)&&Q==="double"){ee[T]='"'}else if(p(ee[T],34)&&Q==="single"){ee[T]="'"}}T=T+1}while(T<ce)}g.token=ee.join(v);d(e,g,v)}}}if(W.length<1)return;if(p(W[W.length-1][0],47)){W.pop();O=O.replace(/>$/,"/>")}N=W.length;y=1;if(y<N){do{h=W[y-1][0];if(h.charCodeAt(h.length-1)===61&&W[y][0].indexOf("=")<0){W[y-1][0]=h+W[y][0];W.splice(y,1);N=N-1;y=y-1}y=y+1}while(y<N)}if(L.attributeSort===true&&l===false&&K===false&&le===false){if(q>0){const I=[];y=0;N=0;E=W.length;do{N=0;do{h=W[N][0].split("=")[0];if(L.attributeSortList[y]===h){I.push(W[N]);W.splice(N,1);E=E-1;break}N=N+1}while(N<E);y=y+1}while(y<q);W=s.safeSort(W,v,false);W=I.concat(W);E=W.length}else{W=s.safeSort(W,v,false)}}g.begin=te;g.stack=J;g.types="attribute";S=[];if(A<E){do{if(W[A]===void 0)break;g.lines=W[A][1];W[A][0]=W[A][0].replace(/\s+$/,v);if(l===true&&/^\/(\/|\*)/.test(W[A][0])){g.types="comment_attribute";g.token=W[A][0];w();A=A+1;continue}if(p(W[A][0][0],123)&&p(W[A][0][1],37)||p(W[A][0][W[A][0].length-1],125)&&p(W[A][0][W[A][0].length-2],37)){if(Ee(W[A][0])){g.token=W[A][0];g.types="template_attribute_end";g.ender=g.begin}else{const I=Ue(W[A][0]);if(pe.liquid.tags.has(I)){g.types="template_attribute_start";g.begin=s.count;g.token=W[A][0]}else if(pe.liquid.else.has(I)){g.types="template_attribute_else";g.token=W[A][0]}else{g.types="template_attribute";g.token=W[A][0]}}w();A=A+1;continue}if(p(W[A][0][0],123)&&p(W[A][0][1],123)||p(W[A][0][W[A][0].length-1],125)&&p(W[A][0][W[A][0].length-2],125)){if(Ee(W[A][0])){g.token=W[A][0];g.types="template_attribute_end";g.ender=g.begin}else{const I=Ue(W[A][0]);if(pe.liquid.tags.has(I)){g.types="template_attribute_start";g.begin=s.count;g.token=W[A][0]}else if(pe.liquid.else.has(I)){g.types="template_attribute_else";g.token=W[A][0]}else{g.types="template_attribute";g.token=W[A][0]}}w();A=A+1;continue}N=W[A][0].indexOf("=");y=W[A][0].indexOf('"');W[A][0].indexOf("'");if(N<0){g.types="attribute";if(p(W[A][0],35)||p(W[A][0],91)||p(W[A][0],123)||p(W[A][0],40)||l===true){g.token=W[A][0]}else{g.token=W[A][0].toLowerCase()}w()}else{h=W[A][0].slice(0,N);m=W[A][0].slice(N+1);if(L.correct&&(ie(m[0],60)||ie(m[0],123)||ie(m[0],61)||ie(m[0],34)||ie(m[0],39))){m='"'+m+'"'}if(l===true&&/^\s*{/.test(m)){g.token=h+"={";g.types="jsx_attribute_start";d(e,g,"jsx_attribute");H.lexers.script(m.slice(1,m.length-1));g.begin=s.count;if(/\s\}$/.test(m)){m=m.slice(0,m.length-1);m=/\s+$/.exec(m)[0];g.lines=m.indexOf("\n")<0?1:m.split("\n").length}else{g.lines=0}g.begin=s.structure[s.structure.length-1][1];g.stack=s.structure[s.structure.length-1][0];g.token="}";g.types="jsx_attribute_end";w();g.types="attribute";g.begin=te;g.stack=J}else{if(Ee(h)||(ie(m,39)||ie(m,34))&&Ee(m)){g.token=W[A][0];g.types="template_attribute_end";g.ender=g.begin}else if(Ce(h,5)&&(ie(m,39)||ie(m,34))&&Ce(h,5)){const I=Ue(W[A][0]);if(pe.liquid.tags.has(I)){g.types="template_attribute_start";g.begin=s.count;g.token=W[A][0]}else if(pe.liquid.else.has(I)){g.types="template_attribute_else";g.token=W[A][0]}else{g.types="template_attribute";g.token=W[A][0]}}else{g.types="attribute";if(p(W[A][0],35)||p(W[A][0],91)||p(W[A][0],123)||p(W[A][0],40)||l===true){g.token=W[A][0]}else{g.token=W[A][0].toLowerCase()}}w()}}A=A+1}while(A<E)}if(S.length>0){g.token=S.join(" ");w()}}P=false;if(f==="---"){$="---";_="comment"}else if(p(t[r],60)){if(p(t[r+1],47)){f=">";_="end"}else if(p(t[r+1],33)){if((t[r+2].charCodeAt(0)===100||t[r+2].charCodeAt(0)===68)&&(t[r+3].charCodeAt(0)===111||t[r+3].charCodeAt(0)===79)&&(t[r+4].charCodeAt(0)===99||t[r+4].charCodeAt(0)===67)&&(t[r+5].charCodeAt(0)===116||t[r+5].charCodeAt(0)===84)&&(t[r+6].charCodeAt(0)===121||t[r+6].charCodeAt(0)===89)&&(t[r+7].charCodeAt(0)===112||t[r+7].charCodeAt(0)===80)&&(t[r+8].charCodeAt(0)===101||t[r+8].charCodeAt(0)===69)){f=">";_="doctype";Z=true}else if(p(t[r+2],45)&&p(t[r+3],45)){f="-->";_="comment";$="<!--"}else if(p(t[r+2],91)&&t[r+3].charCodeAt(0)===67&&t[r+4].charCodeAt(0)===68&&t[r+5].charCodeAt(0)===65&&t[r+6].charCodeAt(0)===84&&t[r+7].charCodeAt(0)===65&&p(t[r+8],91)){f="]]>";_="cdata";Z=true}}else if(t[r+1]==="?"){f="?>";if(t[r+2].charCodeAt(0)===120&&t[r+3].charCodeAt(0)===109&&t[r+4].charCodeAt(0)===109){_="xml";ae=true}else{Z=true;_="template"}}else if(p(t[r+1],37)){Z=true}else if((t[r+1].charCodeAt(0)===112||t[r+1].charCodeAt(0)===80)&&(t[r+2].charCodeAt(0)===114||t[r+2].charCodeAt(0)===82)&&(t[r+3].charCodeAt(0)===101||t[r+3].charCodeAt(0)===69)&&(p(t[r+4],62)||ue(t[r+4]))){f="</pre>";_="ignore";Z=true}else{ae=true;f=">"}}else if(p(t[r],123)){if(l){P=true;G=true;g.token="{";g.types="script_start";s.structure.push(["script",s.count]);d(e,g,v);return}if(p(t[r+1],123)){Z=true;f="}}";_="template"}else if(p(t[r+1],37)){Z=true;f="%}";_="template";const te=t.indexOf("}",r+2);if(t[te-1].charCodeAt(0)===37){let J=t.slice(r+2,te-1).join(v);if(J.charCodeAt(0)===45){$="{%-";J=J.slice(1).trimStart()}else{$="{%";J=J.trimStart()}if(J.charCodeAt(J.length-1)===45){f="-%}";J=J.slice(0,J.length-1).trimEnd()}else{f="%}";J=J.trimEnd()}if(J==="comment"){const Q=a.indexOf("{%",te);let A=Q;if(t[Q+1].charCodeAt(0)===45)A=Q+1;A=a.indexOf("endcomment",A);if(A>0){A=t.indexOf("}",A);if(A>0&&t[A-1].charCodeAt(0)===37){_="comment";$=t.slice(r,te+1).join(v);f=t.slice(Q,A+1).join(v)}}}}else{Z=true;f="%}";_="template"}}else{Z=true;f=t[r+1]+"}";_="template"}}if(L.preserveAttributes===true)Z=true;if(G)return;R=f.charAt(f.length-1);if(_==="comment"&&(p(t[r],60)||p(t[r],123)&&p(t[r+1],37))){se=s.wrapCommentBlock({chars:t,end:i,lexer:"markup",opening:$,start:r,terminator:f});O=se[0];r=se[1];if(O.replace($,v).trimStart().startsWith("@prettify-ignore-start")){g.token=O;g.types="ignore";d(e,g,v);return}}else if(r<i){let te=function(){if(V===false&&p(t[r-1],123)&&(p(t[r],123)||p(t[r],37))){return true}else if(V===true&&p(t[r],125)&&(p(t[r-1],125)||p(t[r-1],37))){return false}return V},J=function(){let fe=r;do{fe=fe-1}while(t[fe]==="\\");fe=r-fe;return fe%2===1},Q=function(fe){let be;let re=v;let ge=0;let Pe=0;const he="data-prettify-ignore";if(fe===true){re=ne.join(v);be=X(re);w=v;if(be[0]===he)Y=true}else{re=ne.join(v);if(l===false||l&&ie(re[re.length-1],125)){re=re.replace(/\s+/g," ")}be=X(re);if(be[0]===he)Y=true;if(l&&p(ne[0],123)&&p(ne[ne.length-1],125))T=0}if(p(re[0],123)&&p(re[1],37))le=true;if(fe===false){if(mt(re)){C=C+1}else if(Ee(re)){C=C-1}}re=re.replace(/^\u0020/,v).replace(/\u0020$/,v);ne=re.replace(/\r\n/g,"\n").split("\n");Pe=ne.length;if(ge<Pe){do{ne[ge]=ne[ge].replace(/(\s+)$/,v);ge=ge+1}while(ge<Pe)}re=ne.join(c.crlf===true?"\r\n":"\n");re=x(re);if(C>=1||Ce(re,1)){if(Ce(re,5)===false){E=p(t[r+1],10)||p(t[r],10)?2:p(t[r],32)&&ie(t[r+1],32)?1:0}else{E=p(t[r+1],10)?2:ie(t[r+1],32)?0:E}}if(re==="="){W[W.length-1][0]=`${W[W.length-1][0]}=`}else if(p(re[0],61)&&W.length>0&&W[W.length-1][0].indexOf("=")<0){W[W.length-1][0]=W[W.length-1][0]+re;if(C>=1||Ce(re,5))W[W.length-1][1]=E}else if(ie(re[0],61)&&W.length>0&&W[W.length-1][0].indexOf("=")===W[W.length-1][0].length-1){W[W.length-1][0]=W[W.length-1][0]+re}else if(re!==v&&re!==" "){W.push([re,E])}if(W.length>0){const[me]=W[W.length-1];if(me.indexOf("=\u201C")>0){s.error=`Invalid quote character (\u201C, &#x201c) used on line number ${s.lineNumber}`}else if(me.indexOf("=\u201D")>0){s.error=`Invalid quote character (\u201D, &#x201d) used on line number ${s.lineNumber}`}}ne=[];E=t[r]==="\n"?2:1};const A=[];let N=0;let y=0;let h=0;let m=0;let S=0;let E=0;let w=v;let I=v;let T=0;let V=false;let ee=false;let U=false;let ce=false;let ne=[];do{if(p(t[r],10)){E=E+1;s.lineNumber=s.lineNumber+1}if(Z===true||(ue(t[r])===false&&ie(w,125)||p(w,125))){V=te();A.push(t[r]);if(p(A[0],60)&&p(A[1],62)&&p(f,62)){g.token="<>";g.types="start";d(e,g,"(empty)");return}if(p(A[0],60)&&p(A[1],47)&&p(A[2],62)&&p(f,62)){g.token="</>";g.types="end";d(e,g,v);return}}if(_==="cdata"&&p(t[r],62)&&p(t[r-1],93)&&ie(t[r-2],93)){s.error=`CDATA tag (${A.join(v)}) not properly terminated with "]]>"`;break}if(_==="comment"){w=v;if(t[r]===R&&A.length>f.length+1){y=A.length;N=f.length-1;if(N>-1){do{y=y-1;if(A[y]!==f.charAt(N))break;N=N-1}while(N>-1)}if(N<0)break}}else{if(w===v){if(p(A[0],60)&&p(A[1],33)&&_!=="cdata"){if(_==="doctype"&&p(t[r],62))break;if(p(t[r],91)){if(p(t[r+1],60)){_="start";break}if(ue(t[r+1])){do{r=r+1;if(p(t[r],10))E=E+1}while(r<i-1&&ue(t[r+1]))}if(p(t[r+1],60)){_="start";break}}}if(l){if(p(t[r],123)){T=T+1}else if(p(t[r],125)){T=T-1}}if(p(t[r],60)&&Z===false&&A.length>1&&/>{2,3}/.test(f)===false&&ae){s.error=`Parse error (line ${s.lineNumber}) on: ${A.join(v)}`}if(ee===true&&ue(t[r])===false&&t[r]!==R){ee=false;k=0;w=I;A.pop();if(r<i){do{if(p(t[r],10))s.lineNumber=s.lineNumber+1;if(L.preserveAttributes===true){A.push(t[r])}else{ne.push(t[r])}if(ie(w,34)||ie(w,39)){if(p(t[r-1],123)&&(p(t[r],37)||p(t[r],123))){V=true}else if((p(t[r-1],125)||p(t[r-1],37))&&p(t[r],125)){V=false}}if(l===false&&U===false&&V===true&&L.preserveAttributes===false){const fe=p(ne[0],61);do{r=r+1;if(p(t[r],10)){s.lineNumber=s.lineNumber+1;if(fe){V=false;w=v;Q(false);break}}ne.push(t[r]);if(fe&&p(t[r+1],62)){V=false;w=v;W[W.length-1][0]+=ne.join(v);ne=[];break}if(fe===false&&(p(t[r-1],125)||p(t[r-1],37))&&p(t[r],125)){V=false;w=v;Q(false);break}}while(r<i)}if(l===false&&(p(t[r],60)||p(t[r],62))&&(w===v||p(w,62))){if(w===v&&p(t[r],60)){w=">";h=1}else if(p(w,62)){if(p(t[r],60)){h=h+1}else if(p(t[r],62)){h=h-1;if(h===0){w=v;k=0;Q(false);break}}}}else if(w===v){if(t[r+1]===R){if(p(ne[ne.length-1],47)||p(ne[ne.length-1],63)&&_==="xml"){ne.pop();if(Z===true)A.pop();r=r-1}if(ne.length>0)Q(false);break}if(l===false&&p(t[r],123)&&p(t[r-1],61)){w="}"}else if(p(t[r],34)||p(t[r],39)){w=t[r];if(U===false&&V===false)U=true;if(p(t[r-1],61)&&(p(t[r+1],60)||p(t[r+1],123)&&p(t[r+2],37)||ue(t[r+1])&&ie(t[r-1],61))){k=r}}else if(p(t[r],40)){w=")";S=1}else if(l){if((p(t[r-1],61)||ue(t[r-1]))&&p(t[r],123)){w="}";m=1}else if(p(t[r],47)){if(p(t[r+1],42)){w="*/"}else if(t[r+1]==="/"){w="\n"}}}else if(p(A[0],123)&&p(t[r],123)&&(p(t[r+1],123)||p(t[r+1],37))){w=p(t[r+1],123)?"}}":t[r+1]+"}"}if(ue(t[r])&&w===v){if(p(ne[ne.length-2],61)){N=r+1;if(N<i){do{if(ue(t[N])===false){if(p(t[N],34)||p(t[N],39)){r=N-1;ce=true;ne.pop()}break}N=N+1}while(N<i)}}if(ce===true){ce=false}else if(T===0||T===1&&p(ne[0],123)){ne.pop();if(ne.length>0)Q(false);ee=true;break}}}else if(p(t[r],40)&&p(w,41)){S=S+1}else if(p(t[r],41)&&p(w,41)){S=S-1;if(S===0){w=v;if(t[r+1]===f.charAt(0)){Q(false);break}}}else if(l&&(p(w,125)||p(w,10)&&p(t[r],10)||w==="*/"&&p(t[r-1],42)&&p(t[r],47))){if(p(t[r],96)){r=r+1;do{ne.push(t[r]);if(p(t[r],96))break;r=r+1}while(r<t.length)}if(p(w,125)){if(p(t[r],125)&&t[r]!==w){m=m+1}else if(t[r]===w){m=m-1;if(m===0){T=0;w=v;O=ne.join(v);if(L.preserveAttributes===false){if(l){if(!/^\s*$/.test(O))W.push([O,E])}else{O=O.replace(/\s+/g," ");if(O!==" ")W.push([O,E])}}ne=[];E=1;break}}}else{I=v;K=true;O=ne.join(v);if(O!==" ")W.push([O,E]);ne=[];E=p(w,10)?2:1;w=v;break}}else if(p(t[r],123)&&p(t[r+1],37)&&p(t[k-1],61)&&(p(w,34)||p(w,39))){w=w+"{%";k=0}else if(p(t[r-1],37)&&p(t[r],125)&&(w==='"{%'||w==="'{%")){w=w.charAt(0);k=0}else if(p(t[r],60)&&p(f,62)&&p(t[k-1],61)&&(p(w,34)||p(w,39))){w=w+"<";k=0}else if(p(t[r],62)&&(w==='"<'||w==="'<")){w=w.charAt(0);k=0}else if(k===0&&ie(w,62)&&(w.length<2||ie(w,34)&&ie(w,39))){y=0;N=w.length-1;if(N>-1){do{if(t[r-y].charCodeAt(0)!==w.charCodeAt(N))break;y=y+1;N=N-1}while(N>-1)}if(N<0&&V===false&&U===true){U=false;Q(true);if(t[r+1]===R)break}}else if(k>0&&ue(t[r])===false){k=0}r=r+1}while(r<i)}}else if(p(f,10)===false&&(p(t[r],34)||p(t[r],39))){w=t[r]}else if(_!=="comment"&&ie(f,10)&&p(t[r],60)&&p(t[r+1],33)&&p(t[r+2],45)&&p(t[r+3],45)&&e.types[s.count]!=="conditional"){w="-->"}else if(p(t[r],123)&&ie(A[0],123)&&ie(f,10)&&(p(t[r+1],123)||p(t[r+1],37))){if(p(t[r+1],123)){w="}}"}else{w=t[r+1]+"}";if(ne.length<1&&(W.length<1||ue(t[r-1]))){A.pop();do{if(p(t[r],10))E=E+1;ne.push(t[r]);r=r+1}while(r<i&&t[r-1]+t[r]!==w);ne.push("}");W.push([ne.join(v),E]);ne=[];E=1;w=v}}if(w===f)w=v}else if(ae&&ie(f,10)&&ue(t[r])&&ie(t[r-1],60)){ee=true}else if(ae&&l&&p(t[r],47)&&(p(t[r+1],42)||p(t[r+1],47))){ee=true;A[A.length-1]=" ";I=p(t[r+1],42)?"*/":"\n";ne.push(t[r])}else if(V===false&&(t[r]===R||p(f,10)&&p(t[r+1],60))&&(A.length>f.length+1||p(A[0],93))&&(l===false||T===0)){if(p(f,10)){if(ue(A[A.length-1])){do{A.pop();r=r-1}while(ue(A[A.length-1]))}break}y=A.length;N=f.length-1;if(N>-1){do{y=y-1;if(A[y]!==f.charAt(N))break;N=N-1}while(N>-1)}if(N<0){if(p(A[y],62)&&p(t[r],62)&&W.length>0){if(W[W.length-1][1]===0&&p(t[r-1],125)&&ue(t[r+1])){W[W.length-1][1]=p(t[r+1],32)?1:2}}break}}}else if(t[r].charCodeAt(0)===w.charCodeAt(w.length-1)&&(l&&p(f,125)&&(t[r-1]!=="\\"||J()===false)||(l===false||ie(f,125)))){y=0;N=w.length-1;if(N>-1){do{if(t[r-y]!==w.charAt(N))break;y=y+1;N=N-1}while(N>-1)}if(N<0)w=v}}r=r+1}while(r<i);if(L.correct===true){if(p(t[r+1],62)&&p(A[0],60)&&ie(A[0],60)){do{r=r+1}while(p(t[r+1],62))}else if(p(A[0],60)&&p(A[1],60)&&ie(t[r+1],62)&&ie(A[A.length-2],62)){do{A.splice(1,1)}while(p(A[1],60))}}k=0;O=A.join(v);z=F(O);O=x(O);if(z==="xml"){n="xml"}else if(n===v&&z==="html"){n="html"}}g.token=O;g.types=_;z=F(O);if(Z===false&&l===false)O=O.replace(/\s+/g," ");if(z==="comment"&&Ce(O,2)){const te=O.slice(0,O.indexOf("%}")+2);const J=O.slice(O.indexOf("%}")+2,O.lastIndexOf("{%"));const Q=O.slice(O.lastIndexOf("{%"));let A=0;let N=0;const y=m=>{A=m===v?0:m.split("\n").length;return v};const h=m=>{N=m===v?0:m.split("\n").length;return v};g.begin=s.structure[s.structure.length-1][1];g.ender=s.count+3;g.stack=s.structure[s.structure.length-1][0];g.types="template_start";g.token=te;d(e,g,"comment");O=J.replace(/^\s*/,y);O=O.replace(/\s*$/,h);g.begin=s.count;g.lines=A;g.stack="comment";g.token=O;g.types="comment";d(e,g,v);g.types="template_end";g.stack="comment";g.lines=N;g.token=Q;d(e,g,v);return}g.types=_;oe=(()=>{const te=/(\/>)$/;const J=(A,N)=>{if(!pe.html.tags.has(A))return false;if(A===N)return true;if(A==="dd"&&N==="dt")return true;if(A==="dt"&&N==="dd")return true;if(A==="td"&&N==="th")return true;if(A==="th"&&N==="td")return true;if(A==="colgroup"&&(N==="tbody"||N==="tfoot"||N==="thead"||N==="tr"))return true;if(A==="tbody"&&(N==="colgroup"||N==="tfoot"||N==="thead"))return true;if(A==="tfoot"&&(N==="colgroup"||N==="tbody"||N==="thead"))return true;if(A==="thead"&&(N==="colgroup"||N==="tbody"||N==="tfoot"))return true;if(A==="tr"&&N==="colgroup")return true;return false};const Q=A=>{g.lines=e.lines[s.count]>0?1:0;g.token=`</${s.structure[s.structure.length-1][0]}>`;g.types="end";d(e,g,v);if(A>0){do{g.begin=s.structure[s.structure.length-1][1];g.stack=s.structure[s.structure.length-1][0];g.token=`</${s.structure[s.structure.length-1][0]}>`;d(e,g,v);A=A-1}while(A>0)}g.begin=s.structure[s.structure.length-1][1];g.lines=s.linesSpace;g.stack=s.structure[s.structure.length-1][0];g.token=O;g.types="end";e.lines[s.count-1]=0};if(_==="end"){const A=e.token[s.count];if(e.types[s.count-1]==="singleton"&&A.charCodeAt(A.length-2)!==47&&`/${F(A)}`===z){e.types[s.count-1]="start"}}if(n==="html"){if(p(O[0],60)&&ie(O[1],33)&&ie(O[1],63)&&(s.count<0||e.types[s.count].indexOf("template")<0))O=O.toLowerCase();if(pe.html.tags.has(s.structure[s.structure.length-1][0])&&J(z.slice(1),s.structure[s.structure.length-2][0])){Q(0)}else if(s.structure.length>3&&pe.html.tags.has(s.structure[s.structure.length-1][0])&&pe.html.tags.has(s.structure[s.structure.length-2][0])&&pe.html.tags.has(s.structure[s.structure.length-3][0])&&J(z,s.structure[s.structure.length-4][0])){Q(3)}else if(s.structure.length>2&&pe.html.tags.has(s.structure[s.structure.length-1][0])&&pe.html.tags.has(s.structure[s.structure.length-2][0])&&J(z,s.structure[s.structure.length-3][0])){Q(2)}else if(s.structure.length>1&&pe.html.tags.has(s.structure[s.structure.length-1][0])&&J(z,s.structure[s.structure.length-2][0])){Q(1)}else if(J(z,s.structure[s.structure.length-1][0])){Q(0)}else if(p(z[0],47)&&pe.html.tags.has(s.structure[s.structure.length-1][0])&&s.structure[s.structure.length-1][0]!==z.slice(1)){u(O,false);g.begin=s.structure[s.structure.length-1][1];g.lines=s.linesSpace;g.stack=s.structure[s.structure.length-1][0];g.token=O;g.types="end";e.lines[s.count-1]=0}if(l===false&&pe.html.voids.has(z)){if(L.correct===true&&te.test(O)===false)O=O.slice(0,O.length-1)+" />";return true}}return false})();if(pe.embed("html",z)&&O.slice(O.length-2)!=="/>"||pe.embed("liquid",z)&&O.slice(O.length-2)==="%}"){const te=Ce(O,3);let J=W.length-1;let Q=v;let A=[];if(J>-1){do{A=X(W[J][0]);if(A[0]==="type"){Q=A[1];if(Q.charCodeAt(0)===34||Q.charCodeAt(0)===39){Q=Q.slice(1,Q.length-1)}break}J=J-1}while(J>-1)}if(te===false&&pe.embed("html",z)){P=true;if(Q===v){M=pe.html.embed[z].language}else if(pe.html.embed[z].value(Q)){M=pe.html.embed[z].language}}else if(te===true&&pe.embed("liquid",z)){P=true;if(Q===v){M=pe.liquid.embed[z].language}else{M=pe.liquid.embed[z].language}}if(P===true){J=r+1;if(J<i){do{if(ue(t[J])===false){if(p(t[J],60)){if(t.slice(J+1,J+4).join(v)==="!--"){J=J+4;if(J<i){do{if(ue(t[J])===false){P=false;break}if(t[J]==="\n"||t[J]==="\r")break;J=J+1}while(J<i)}}else{P=false}}break}J=J+1}while(J<i)}}}if(ae&&Y===false&&_!=="xml"){if(oe===true||O.slice(O.length-2)==="/>"){_="singleton"}else{_="start"}g.types=_}if(ae&&Z===false&&Y&&p(f,62)&&O.slice(O.length-2)!=="/>"){const te=[];const J=[];if(oe===true){_="singleton"}else{W.forEach(Q=>J.push(Q[0]));Z=true;_="ignore";r=r+1;if(r<i){let Q=v;let A=0;let N=0;let y=false;do{if(p(t[r],10))s.lineNumber=s.lineNumber+1;te.push(t[r]);if(Q===v){if(p(t[r],34)){Q='"'}else if(p(t[r],39)){Q="'"}else if(ie(te[0],123)&&p(t[r],123)&&(p(t[r+1],123)||p(t[r+1],37))){if(p(t[r+1],123)){Q="}}"}else{Q=t[r+1]+"}"}}else if(p(t[r],60)&&ae===true){if(p(t[r+1],47)){y=true}else{y=false}}else if(t[r]===R&&ie(t[r-1],47)){if(y===true){k=k-1;if(k<0)break}else{k=k+1}}}else if(p(t[r],Q.charCodeAt(Q.length-1))){N=0;A=Q.length-1;if(A>-1){do{if(ie(t[r-N],Q.charCodeAt(A)))break;N=N+1;A=A-1}while(A>-1)}if(A<0)Q=v}r=r+1}while(r<i)}}O=O+te.join(v);O=O.replace(">",` ${J.join(" ")}>`);g.token=O;g.types="content-ignore";W=[]}if(g.types.indexOf("template")>-1){if(p(O[0],123)&&p(O[1],37)){if((z==="case"||z==="default")&&(s.structure[s.structure.length-1][0]==="switch"||s.structure[s.structure.length-1][0]==="case")){g.types="template_else"}else if(pe.liquid.else.has(z)){g.types="template_else"}else{if(pe.liquid.tags.has(z)){g.types="template_start"}else if(z.charCodeAt(0)===101&&z.charCodeAt(1)===110&&z.charCodeAt(2)===100&&pe.liquid.tags.has(z.slice(3))){g.types="template_end"}else if(z.charCodeAt(0)===101&&z.charCodeAt(1)===110&&z.charCodeAt(2)===100){g.types="template_end";g.stack=z.slice(3);let te=0;do{if(e.types[te]==="template"&&e.stack[te]===g.stack){e.types[te]="template_start";j.start=j.start+1;break}else{te=e.stack.indexOf(g.stack,te+1)}}while(te>-1)}else{g.stack=z}}}else if(g.types==="template"){if(O.indexOf("else")>2)g.types="template_else"}if(g.types==="template_start"||g.types==="template_else"){if(z===v||p(z,37)){z=z+O.slice(1).replace(z,v).replace(/^\s+/,v);z=z.slice(0,z.indexOf("(")).replace(/\s+/,v)}}if(L.quoteConvert==="double"){g.token=g.token.replace(/'/g,'"')}else if(L.quoteConvert==="single"){g.token=g.token.replace(/"/g,"'")}}if(_==="cdata"&&(g.stack==="script"||g.stack==="style")){let te=s.count;let J=s.count;const Q=g.stack;if(e.types[J]==="attribute"){do{te=te-1;J=J-1}while(e.types[J]==="attribute"&&J>-1)}g.begin=te;g.token="<![CDATA[";g.types="cdata_start";O=O.replace(/^(\s*<!\[cdata\[)/i,v).replace(/(\]\]>\s*)$/,v);d(e,g,v);s.structure.push(["cdata",s.count]);if(Q==="script"){H.lexers.script(O)}else{H.lexers.style(O)}g.begin=s.structure[s.structure.length-1][1];g.token="]]>";g.types="cdata_end";d(e,g,v);s.structure.pop()}else{d(e,g,z)}ye();if(c.wrap>0&&l===true){let te=0;let J=s.count;let Q=0;if(e.types[J].indexOf("attribute")>-1){do{te=te+e.token[J].length+1;J=J-1}while(e.lexer[J]!=="markup"||e.types[J].indexOf("attribute")>-1);if(e.lines[J]===1)te=te+e.token[J].length+1}else if(e.lines[J]===1){te=e.token[J].length+1}Q=J-1;if(te>0&&e.types[Q]!=="script_end"){if(e.types[Q].indexOf("attribute")>-1){do{te=te+e.token[Q].length+1;Q=Q-1}while(e.lexer[Q]!=="markup"||e.types[Q].indexOf("attribute")>-1);if(e.lines[Q]===1)te=te+e.token[Q].length+1}else if(e.lines[Q]===1){te=e.token[Q].length+1}}}s.linesSpace=0}function D(){const f=[];const g=r;const k=p(e.token[s.count],123)&&l===true;let O=v;let R=s.linesSpace;let _=v;if(P===true){if(k===true){_="script"}else if(s.structure[s.structure.length-1][1]>-1){_=F(e.token[s.structure[s.structure.length-1][1]].toLowerCase())}else if(e.begin[s.count]>1){_=F(e.token[e.begin[s.count]].toLowerCase())}else{_=F(e.token[e.begin[s.count]].toLowerCase())}}const z=e.types[s.count]==="template_start"&&e.token[s.count].indexOf("<!")===0&&e.token[s.count].indexOf("<![")<0&&e.token[s.count].charCodeAt(e.token[s.count].length-1)===91;const $={begin:s.structure[s.structure.length-1][1],ender:-1,lexer:"markup",lines:R,stack:s.structure[s.structure.length-1][0],token:v,types:"content"};function oe(){let G=r-1;let Y=0;if(t[r-1]!=="\\")return false;if(G>-1){do{if(t[G]!=="\\")break;Y=Y+1;G=G-1}while(G>-1)}return Y%2===1}if(r<i){let G=v;let Y=v;let K=v;let le=0;do{if(p(t[r],10))s.lineNumber=s.lineNumber+1;if(P===true){if(Y===v){if(p(t[r],47)){if(p(t[r+1],42)){Y="*"}else if(p(t[r+1],47)){Y="/"}else if(_==="script"&&"([{!=,;.?:&<>".indexOf(t[r-1])>-1){if(l===false||ie(t[r-1],60))Y="reg"}}else if((p(t[r],34)||p(t[r],39)||p(t[r],96))&&oe()===false){Y=t[r]}else if(p(t[r],123)&&k===true){le=le+1}else if(p(t[r],125)&&k===true){if(le===0){K=f.join(v).replace(/^\s+/,v).replace(/\s+$/,v);H.lexers.script(K);s.structure[s.structure.length-1][1]+=1;if(e.types[s.count]==="end"&&e.lexer[e.begin[s.count]-1]==="script"){$.lexer="script";$.token=L.correct===true?";":"x;";$.types="separator";d(e,$,v);$.lexer="markup"}$.token="}";$.types="script_end";d(e,$,v);s.structure.pop();break}le=le-1}if(Ce(e.token[s.count],3)===false){G=t.slice(r,r+10).join(v).toLowerCase();if(_==="script"){G=r===i-9?G.slice(0,G.length-1):G.slice(0,G.length-2);if(G==="<\/script"){K=f.join(v).replace(/^\s+/,v).replace(/\s+$/,v);r=r-1;if(f.length<1)break;if(/^<!--+/.test(K)&&/--+>$/.test(K)){$.token="<!--";$.types="comment";d(e,$,v);K=K.replace(/^<!--+/,v).replace(/--+>$/,v);H.lexers.script(K);$.token="-->";d(e,$,v)}else{H.options.language=M;H.lexers.script(K);if(M==="json"&&c.json.objectSort===true||M!=="json"&&c.script.objectSort===true)s.sortCorrection(0,s.count+1);H.options.language="html"}break}}if(_==="style"){if(r===i-8){G=G.slice(0,G.length-1)}else if(r===i-9){G=G.slice(0,G.length-2)}else{G=G.slice(0,G.length-3)}if(G==="</style"){let Z=f.join(v).replace(/^\s+/,v).replace(/\s+$/,v);r=r-1;if(f.length<1)break;if(/^<!--+/.test(Z)&&/--+>$/.test(Z)){$.token="<!--";$.types="comment";d(e,$,v);Z=Z.replace(/^<!--+/,v).replace(/--+>$/,v);H.lexers.style(Z);$.token="-->";d(e,$,v)}else{H.options.language=M;H.lexers.style(Z);if(c.style.sortProperties===true)s.sortCorrection(0,s.count+1);H.options.language="html"}break}}}else{if(pe.embed("liquid",_)){G=t.slice(r).join(v).toLowerCase();if(pe.liquid.embed[_].end(G)){G=G.slice(0,G.indexOf("%}")+2);K=f.join(v).replace(/^\s+/,v).replace(/\s+$/,v);r=r+G.length-1;if(f.length<1)break;const Z=Xe[pe.liquid.embed[_].language];if(/^<!--+/.test(K)&&/--+>$/.test(K)){$.token="<!--";$.types="comment";d(e,$,v);K=K.replace(/^<!--+/,v).replace(/--+>$/,v);H.lexers[Z](K);$.token="-->";d(e,$,v)}else{H.options.language=pe.liquid.embed[_].language;H.lexers[Z](K);if(M==="json"&&c.json.objectSort===true||M==="javascript"&&c.script.objectSort===true||(M==="css"||M==="scss")&&c.style.sortProperties===true)s.sortCorrection(0,s.count+1);H.options.language="liquid";$.token=G;$.types="template_end";d(e,$,v)}break}}}}else if(Y===t[r]&&(p(Y,34)||p(Y,39)||p(Y,96)||p(Y,42)&&p(t[r+1],47))&&oe()===false){Y=v}else if(p(Y,96)&&t[r]==="$"&&p(t[r+1],123)&&oe()===false){Y="}"}else if(p(Y,125)&&p(t[r],125)&&oe()===false){Y="`"}else if(p(Y,47)&&(p(t[r],10)||t[r]==="\r")){Y=v}else if(Y==="reg"&&p(t[r],47)&&oe()===false){Y=v}else if(p(Y,47)&&p(t[r],60)&&p(t[r-1],45)&&p(t[r-2],45)){G=t.slice(r+1,r+11).join(v).toLowerCase();G=G.slice(0,G.length-2);if(_==="script"&&G==="<\/script")Y=v;G=G.slice(0,G.length-1);if(_==="style"&&G==="</style")Y=v}}if(z===true&&p(t[r],93)){r=r-1;R=0;O=f.join(v);O=O.replace(/\s+$/,v);$.token=O;d(e,$,v);break}if(P===false&&f.length>0&&(p(t[r],60)&&ie(t[r+1],61)&&!/\s|\d/.test(t[r+1])||p(t[r],91)&&p(t[r+1],37)||p(t[r],123)&&(l===true||p(t[r+1],123)||p(t[r+1],37)))){r=r-1;if(s.structure[s.structure.length-1][0]==="comment"){O=f.join(v)}else{O=f.join(v).replace(/\s+$/,v)}O=x(O);R=0;$.token=O;if(c.wrap>0&&L.preserveText===false){const{wrap:Z}=c;const ae=v;const W=v;const se=[];let X=Z;let ye=O.length;const te=()=>{if(O.charCodeAt(X)===32){se.push(O.slice(0,X));O=O.slice(X+1);ye=O.length;X=Z;return}do{X=X-1}while(X>0&&O.charCodeAt(X)!==32);if(X>0){se.push(O.slice(0,X));O=O.slice(X+1);ye=O.length;X=Z}else{X=Z;do{X=X+1}while(X<ye&&O.charCodeAt(X)!==32);se.push(O.slice(0,X));O=O.slice(X+1);ye=O.length;X=Z}};if(e.token[e.begin[s.count]]==="<a>"&&e.token[e.begin[e.begin[s.count]]]==="<li>"&&e.lines[e.begin[s.count]]===0&&s.linesSpace===0&&O.length<c.wrap){d(e,$,v);break}if(ye<Z){d(e,$,v);break}if(s.linesSpace<1){let J=s.count;do{X=X-e.token[J].length;if(e.types[J].indexOf("attribute")>-1)X=X-1;if(e.lines[J]>0&&e.types[J].indexOf("attribute")<0)break;J=J-1}while(J>0&&X>0);if(X<1)X=O.indexOf(" ")}O=f.join(v);O=O.replace(/^\s+/,v).replace(/\s+$/,v).replace(/\s+/g," ");do{te()}while(X<ye);if(O!==v&&ie(O,32))se.push(O);O=c.crlf===true?se.join("\r\n"):se.join("\n");O=ae+O+W}R=0;$.token=O;d(e,$,v);break}f.push(t[r]);r=r+1}while(r<i)}if(r>g&&r<i){if(ue(t[r])){let G=r;s.linesSpace=1;do{if(t[G]==="\n")s.linesSpace=s.linesSpace+1;G=G-1}while(G>g&&ue(t[G]))}else{s.linesSpace=0}}else if(r!==g||r===g&&P===false){O=f.join(v).replace(/\s+$/,v);R=0;if($.token!==O){$.token=O;d(e,$,v);s.linesSpace=0}}P=false}if(q>0){do{L.attributeSortList[r]=L.attributeSortList[r].replace(/^\s+/,v).replace(/\s+$/,v);r=r+1}while(r<q);r=0}if(c.language==="html"||c.language==="liquid")n="html";do{if(ue(t[r])){if(e.types[s.count]==="template_start"&&s.structure[s.structure.length-1][0]==="comment"){D()}else{r=s.spacer({array:t,end:i,index:r})}}else if(P){D()}else if(p(t[r],60)){B(v)}else if(p(t[r],91)&&p(t[r+1],37)){B("%]")}else if(p(t[r],123)&&(l||p(t[r+1],123)||p(t[r+1],37))){B(v)}else if(p(t[r],45)&&p(t[r+1],45)&&p(t[r+2],45)){B("---")}else{D()}r=r+1}while(r<i);if(ie(e.token[s.count][0],47)&&pe.html.tags.has(s.structure[s.structure.length-1][0]))u(e.token[s.count],true);if(j.end!==j.start&&s.error===v){if(j.end>j.start){const f=j.end-j.start;const g=f===1?v:"s";s.error=["Prettify Error:","",`${f} more end type${g} than start types`].join("\n")}else{const f=j.start-j.end;const g=f===1?v:"s";s.error=["Prettify Error:","",`${f} more start type${g} than end types`].join("\n")}}return e};H.beautify.markup=o=>{const a={};const c="markup";const{data:e}=s;const l=o.language==="jsx"||o.language==="tsx";const b=o.crlf===true?String.fromCharCode(13,10):String.fromCharCode(10);const L=o.markup;const q=H.end<1||H.end>e.token.length?e.token.length:H.end+1;const j={is:(x,d)=>e.types[x]===d,not:(x,d)=>e.types[x]!==d,idx:(x,d)=>x>-1&&(e.types[x]||v).indexOf(d)};const t={is:(x,d)=>e.token[x]===d,not:(x,d)=>e.token[x]!==d};let i=H.start;let r=-1;let P=0;let M=0;let n=isNaN(o.indentLevel)?0:Number(o.indentLevel);const C=(()=>{const x=H.start>0?Array(H.start).fill(0,0,H.start):[];function d(){let g=i+1;let k=0;if(j.is(g,void 0))return g-1;if(j.is(g,"comment")||i<q-1&&j.idx(g,"attribute")>-1){do{if(j.is(g,"jsx_attribute_start")){k=g;do{if(j.is(g,"jsx_attribute_end")&&e.begin[g]===k)break;g=g+1}while(g<q)}else if(j.not(g,"comment")&&j.idx(g,"attribute")<0)return g;g=g+1}while(g<q)}return g}function F(){const g=e.begin[i];let k=i;do{k=k-1;if(t.is(k,"</li>")&&t.is(k-1,"</a>")&&e.begin[e.begin[k]]===g&&e.begin[k-1]===e.begin[k]+1){k=e.begin[k]}else{return}}while(k>g+1);k=i;do{k=k-1;if(j.is(k+1,"attribute")){x[k]=-10}else if(t.not(k,"</li>")){x[k]=-20}}while(k>g+1)}function u(){let g=i;let k=false;if(e.lines[i+1]===0&&L.forceIndent===false){do{if(e.lines[g]>0){k=true;break}g=g-1}while(g>r);g=i}else{k=true}if(k===true){const O=j.is(P,"comment")||j.is(P,"end")||j.is(P,"template_end")?n+1:n;do{x.push(O);g=g-1}while(g>r);if(O===n+1)x[i]=n;if(j.is(g,"attribute")||j.is(g,"template_attribute")||j.is(g,"jsx_attribute_start")){x[e.begin[g]]=O}else{x[g]=O}}else{do{x.push(-20);g=g-1}while(g>r);x[g]=-20}r=-1}function B(){let g=n;if(L.forceIndent===true||L.forceAttribute===true){x.push(n);return}if(P<q&&(j.idx(P,"end")>-1||j.idx(P,"start")>-1)&&e.lines[P]>0){x.push(n);g=g+1;if(j.is(i,"singleton")&&i>0&&j.idx(i-1,"attribute")>-1&&j.is(e.begin[i-1],"singleton")){if(e.begin[i]<0||j.is(e.begin[i-1],"singleton")&&e.begin[e.ender[i]-1]!==i){x[i-1]=n}else{x[i-1]=n+1}}}else if(i>0&&j.is(i,"singleton")&&j.idx(i-1,"attribute")>-1){x[i-1]=n;M=e.token[i].length;x.push(-10)}else if(e.lines[P]===0){x.push(-20)}else if((o.wrap===0||i<q-2&&e.token[i]!==void 0&&e.token[i+1]!==void 0&&e.token[i+2]!==void 0&&e.token[i].length+e.token[i+1].length+e.token[i+2].length+1>o.wrap&&j.idx(i+2,"attribute")>-1||e.token[i]!==void 0&&e.token[i+1]!==void 0&&e.token[i].length+e.token[i+1].length>o.wrap)&&(j.is(i+1,"singleton")||j.is(i+1,"template"))){x.push(n)}else{M=M+1;x.push(-10)}if(i>0&&j.idx(i-1,"attribute")>-1&&e.lines[i]<1){x[i-1]=-20}if(M>o.wrap){let k=i;let O=Math.max(e.begin[i],0);if(j.is(i,"content")&&L.preserveText===false){let R=0;const _=e.token[i].replace(/\s+/g," ").split(" ");do{k=k-1;if(x[k]<0){R=R+e.token[k].length;if(x[k]===-10)R=R+1}else{break}}while(k>0);k=0;O=_.length;do{if(_[k].length+R>o.wrap){_[k]=b+_[k];R=_[k].length}else{_[k]=` ${_[k]}`;R=R+_[k].length}k=k+1}while(k<O);if(p(_[0],32)){e.token[i]=_.join(v).slice(1)}else{x[i-1]=g;e.token[i]=_.join(v).replace(b,v)}if(e.token[i].indexOf(b)>0){M=e.token[i].length-e.token[i].lastIndexOf(b)}}else{do{k=k-1;if(x[k]>-1){M=e.token[i].length;if(e.lines[i+1]>0)M=M+1;return}if(j.idx(k,"start")>-1){M=0;return}if(e.lines[k+1]>0&&(j.not(k,"attribute")||j.is(k,"attribute")&&j.is(k+1,"attribute"))){if(j.not(k,"singleton")||j.is(k,"attribute")&&j.is(k+1,"attribute")){M=e.token[i].length;if(e.lines[i+1]>0)M=M+1;break}}}while(k>O);x[k]=g}}}function D(){const g=i;if(e.types[g-1]==="script_start"&&p(e.token[g-1],123)){x[g-1]=-20}do{if(e.lexer[i+1]===c&&e.begin[i+1]<g&&j.not(i+1,"start")&&j.not(i+1,"singleton"))break;x.push(0);i=i+1}while(i<q);a[g]=i;if(e.types[i+1]==="script_end"&&e.token[i+1]==="}"){x.push(-20)}else{x.push(n-1)}P=d();if(e.lexer[P]===c&&e.stack[i].indexOf("attribute")<0&&(e.types[P]==="end"||e.types[P]==="template_end")){n=n-1}}function f(){function g(K){const le=K.indexOf("=");if(le>0&&(le<K.indexOf('"')&&K.indexOf('"')>0||le<K.indexOf("'")&&K.indexOf("'")>0)){return[K.slice(0,le),K.slice(le+1)]}return[K,v]}function k(K){const le=g(K);if(le[1]===v||le[0]==="href"||le[0].charCodeAt(0)===111&&le[0].charCodeAt(1)===110){return K}else if(L.attributeValues==="preserve"){return le[0]+"="+le[1]}else if(L.attributeValues==="strip"){return`${le[0].trimStart()}=${le[1].replace(/\s+/g," ").replace(/^["']\s+/,'"')}`}const Z=L.attributeValues;const ae=[];const W=o.wrap>0?le[1].length>o.wrap:false;let se;let X=false;let ye=v;let te=v;let J=0;let Q=0;if(Z==="collapse"){se=le[1].replace(/\s+/g," ")}else if(Z==="wrap"){se=le[1].replace(/\s+/g,A=>/\n/.test(A)?"\n":A.replace(/\s+/," "))}do{if(p(se[J],123)&&(p(se[J+1],123)||p(se[J+1],37))){if(Z==="collapse"){if(ue(se[J-1])===true&&ae[ae.length-1]!=="\n"){ae.push("\n")}}if(p(se[J+1],37)){Q=se.indexOf("%}",J+1);ye=se.slice(J,Q+2);te=p(ye[2],45)?ye.slice(3).trimStart():ye.slice(2).trimStart();J=Q+2;if(te.startsWith("end")){X=false;if(Z==="collapse"&&ae[ae.length-1]!=="\n"){ae.push("\n")}}else if(pe.liquid.tags.has(te.slice(0,te.search(/\s/)))){X=true;if(Z==="collapse"&&ae[ae.length-1]!=="\n"){ae.push("\n")}}ae.push(ye)}else{if(X&&Z==="collapse"&&ae[ae.length-1]!=="\n"){ae.push("\n")}Q=se.indexOf("}}",J+1);ye=se.slice(J,Q+2);J=Q+2;ae.push(ye)}if(Z==="collapse"){if(ue(se[J])===true&&ae[ae.length-1]!=="\n"&&J<se.length-1){ae.push("\n")}}}else{if(se[J]===" "){if(Z==="collapse"){if(ae[ae.length-1]!=="\n"){ae.push("\n")}}else if(W&&Z==="wrap"){if(X===false){ae.push("\n")}}}else{ae.push(se[J])}J=J+1}}while(J<se.length);return le[0]+"="+ae.join(v)}function O(K){if(j.is(K,"attribute")||j.idx(K,"template_attribute")>-1){e.token[K]=k(e.token[K])}else{const le=e.token[K].replace(/\s+/g," ").split(" ");const Z=le.length;let ae=1;let W=le[0].length;do{if(W+le[ae].length>o.wrap){W=le[ae].length;le[ae]=b+le[ae]}else{le[ae]=` ${le[ae]}`;W=W+le[ae].length}ae=ae+1}while(ae<Z);e.token[K]=le.join(v)}}let R=i;const _=i-1;let z=false;let $=false;let oe=0;let G=e.token[_].length+1;let Y=(()=>{if(j.idx(i,"start")>0){let K=i;do{if(e.types[K].indexOf("end")>0&&e.begin[K]===i){if(K<q-1&&j.idx(K+1,"attribute")>-1){z=true;break}}K=K+1}while(K<q)}else if(i<q-1&&j.idx(i+1,"attribute")>-1){z=true}if(j.is(P,"end")||j.is(P,"template_end")){return n+(j.is(_,"singleton")?2:1)}if(j.is(_,"singleton"))return n+1;return n})();if(z===false&&j.is(i,"comment_attribute")){x.push(n);x[_]=e.types[_]==="singleton"?n+1:n;return}if(Y<1)Y=1;do{M=M+e.token[i].length+1;if(e.types[i].indexOf("attribute")>0){if(e.types[i]==="template_attribute_start"){if(L.preserveAttributes===true){x.push(-10)}else{let K=1;do{if(e.lines[i]===0){x.push(-20)}else if(e.lines[i]===1){if(L.forceAttribute===true){x.push(Y)}else{x.push(-10)}}else{x.push(Y)}if(K===0)break;i=i+1;if(j.is(i,"template_attribute_start")){K=K+1}else if(j.is(i,"template_attribute_end")){K=K-1}oe=oe+1;if(e.token[i]!==void 0){M=M+e.token[i].length+1;G=G+e.token[i].length+1}}while(i<q)}}else if(e.types[i]==="template_attribute"){if(L.forceAttribute===true){x.push(Y)}else{x.push(-10)}}else if(e.types[i]==="comment_attribute"){x.push(Y)}else if(e.types[i].indexOf("start")>0){$=true;if(i<q-2&&e.types[i+2].indexOf("attribute")>0){x.push(-20);i=i+1;a[i]=i}else{if(_===i-1&&z===false){if(l){x.push(-20)}else{x.push(Y)}}else{if(l){x.push(-20)}else{x.push(Y+1)}}if(e.lexer[i+1]!==c){i=i+1;D()}}}else if(e.types[i].indexOf("end")>0&&e.types[i].indexOf("template")<0){if(x[i-1]!==-20)x[i-1]=x[e.begin[i]]-1;if(e.lexer[i+1]!==c){x.push(-20)}else{x.push(Y)}}else{x.push(Y)}}else if(j.is(i,"attribute")){G=G+e.token[i].length+1;if(L.preserveAttributes===true){x.push(-10)}else if(L.forceAttribute===true||L.forceAttribute>=1||$===true||i<q-1&&(j.idx(i+1,"template_attribute_")>-1&&e.lines[i+1]!==-20||j.idx(i+1,"attribute")>0)){e.token[i]=k(e.token[i]);if(L.forceAttribute===false&&e.lines[i]===1){if(j.is(i+1,"template_attribute_start")&&e.lines[i+1]>1){x.push(Y)}else{x.push(-10)}}else{x.push(Y)}}else{x.push(-10)}}else if(e.begin[i]<_+1){break}i=i+1;oe=oe+1}while(i<q);i=i-1;if(j.idx(i,"template")<0&&j.idx(i,"end")>0&&j.idx(i,"attribute")>0&&j.not(_,"singleton")&&x[i-1]>0&&z===true){x[i-1]=x[i-1]-1}if(x[i]!==-20){if(l===true&&j.idx(_,"start")>-1&&j.is(i+1,"script_start")){x[i]=Y}else{if(t.is(i,"/")&&x[i-1]!==10){x[i-1]=-10}else{x[i]=x[_]}}}if(L.forceAttribute===true){M=0;x[_]=Y}else if(L.forceAttribute>=1){if(oe>=L.forceAttribute){x[_]=Y}else{x[_]=-10}}else{x[_]=-10}if(L.preserveAttributes===true||t.is(_,"<%xml%>")||t.is(_,"<?xml?>")){M=0;return}R=i;if(R>_+1){if(L.selfCloseSpace===false)G=G-1;if(G>o.wrap&&o.wrap>0&&L.forceAttribute===false){if(L.forceLeadAttribute===true){x[_]=Y;R=R-1}M=e.token[i].length;do{if(e.token[R].length>o.wrap&&ue(e.token[R]))O(R);if(j.idx(R,"template")>-1&&x[R]===-10){x[R]=Y}else if(j.is(R,"attribute")&&x[R]===-10){x[R]=Y}R=R-1}while(R>_)}}else if(o.wrap>0&&j.is(i,"attribute")&&e.token[i].length>o.wrap&&ue(e.token[i])){O(i)}}do{if(e.lexer[i]===c){if(e.token[i].toLowerCase().indexOf("<!doctype")===0)x[i-1]=n;if(e.types[i].indexOf("attribute")>-1){f()}else if(j.is(i,"comment")){if(r<0)r=i;if(j.not(i+1,"comment")||i>0&&j.idx(i-1,"end")>-1)u()}else if(j.not(i,"comment")){P=d();if(j.is(P,"end")||j.is(P,"template_end")){n=n-1;if(j.is(P,"template_end")&&j.is(e.begin[P]+1,"template_else"))n=n-1;if(t.is(i,"</ol>")||t.is(i,"</ul>")||t.is(i,"</dl>"))F()}if(j.is(i,"script_end")&&j.is(i+1,"end")){if(e.lines[P]<1){x.push(-20)}else if(e.lines[P]>1){x.push(n)}else{x.push(-10)}}else if((L.forceIndent===false||L.forceIndent===true&&j.is(P,"script_start"))&&(j.is(i,"content")||j.is(i,"singleton")||j.is(i,"template"))){M=M+e.token[i].length;if(j.is(i,"template")){x.push(n);const g=e.token[i].indexOf(b);if(g>0){const k=[];const O=x[i-1]*o.indentSize+e.token[i].charCodeAt(2)===45?o.indentSize:o.indentSize-1;let R=0;do{k.push(" ");R=R+1}while(R<O);e.token[i]=e.token[i].replace(/^\s+/gm,v).replace(/\n/g,_=>`${_}${k.join(v)}`)}}else if(e.lines[P]>0&&j.is(P,"script_start")){x.push(-10)}else if(o.wrap>0&&(j.idx(i,"template")<0||P<q&&j.idx(i,"template")>-1&&j.idx(i,"template")<0)){B()}else if(P<q&&(j.idx(P,"end")>-1||j.idx(P,"start")>-1)&&(e.lines[P]>0||j.idx(i,"template_")>-1)){x.push(n)}else if(e.lines[P]===0){x.push(-20)}else{x.push(n)}}else if(j.is(i,"start")||j.is(i,"template_start")){n=n+1;if(j.is(i,"template_start")&&j.is(i+1,"template_else")){n=n+1}if(l===true&&t.is(i+1,"{")){if(e.lines[P]===0){x.push(-20)}else if(e.lines[P]>1){x.push(n)}else{x.push(-10)}}else if(j.is(i,"start")&&j.is(P,"end")){x.push(-20)}else if(j.is(i,"start")&&j.is(P,"script_start")){x.push(-10)}else if(L.forceIndent===true){x.push(n)}else if(j.is(i,"template_start")&&j.is(P,"template_end")){x.push(-20)}else if(e.lines[P]===0&&(j.is(P,"content")||j.is(P,"singleton")||j.is(P,"start")&&j.is(P,"template"))){x.push(-20)}else{x.push(n)}}else if(L.forceIndent===false&&e.lines[P]===0&&(j.is(P,"content")||j.is(P,"singleton"))){x.push(-20)}else if(j.is(i+2,"script_end")){x.push(-20)}else if(j.is(i,"template_else")){if(j.is(P,"template_end")){x[i-1]=n+1}else{x[i-1]=n-1}x.push(n)}else{x.push(n)}}if(j.not(i,"content")&&j.not(i,"singleton")&&j.not(i,"template")&&j.not(i,"attribute")){M=0}}else{M=0;D()}i=i+1}while(i<q);return x})();return(()=>{const x=[];const d=(()=>{const f=[o.indentChar];const g=o.indentSize-1;let k=0;if(k<g){do{f.push(o.indentChar);k=k+1}while(k<g)}return f.join(v)})();function F(f){const g=[];const k=o.preserveLine+1;const O=Math.min(e.lines[i+1]-1,k);let R=0;if(f<0)f=0;do{g.push(b);R=R+1}while(R<O);if(f>0){R=0;do{g.push(d);R=R+1}while(R<f)}return g.join(v)}function u(){let f=e.token[i].split(b);const g=e.lines[i+1];if(j.is(i,"comment"))f=f.map(_=>_.trimStart());const k=C[i-1]>-1?j.is(i,"attribute")?C[i-1]+1:C[i-1]:(()=>{let _=i-1;let z=_>-1&&j.idx(_,"start")>-1;if(C[i]>-1&&j.is(i,"attribute")){return C[i]+1}do{_=_-1;if(C[_]>-1){return j.is(i,"content")&&z===false?C[_]:C[_]+1}if(j.idx(_,"start")>-1)z=true}while(_>0);return _===-2?0:1})();let O=0;e.lines[i+1]=0;const R=f.length-1;do{if(j.is(i,"comment")){if(f[O]!==v){if(f[O+1].trimStart()!==v){x.push(f[O],F(k))}else{x.push(f[O],"\n")}}else{if(f[O+1].trimStart()===v){x.push("\n")}else{x.push(F(k))}}}else{x.push(f[O]);x.push(F(k))}O=O+1}while(O<R);e.lines[i+1]=g;x.push(f[R]);if(C[i]===-10){x.push(" ")}else if(C[i]>1){x.push(F(C[i]))}}function B(){const f=/\/?>$/;const g=e.token[i];const k=f.exec(g);if(k===null)return;let O=i+1;let R=false;let _=L.selfCloseSpace===true&&k!==null&&k[0]==="/>"?" ":v;e.token[i]=g.replace(f,v);do{if(j.is(O,"jsx_attribute_end")&&e.begin[e.begin[O]]===i){R=false}else if(e.begin[O]===i){if(j.is(O,"jsx_attribute_start")){R=true}else if(j.idx(O,"attribute")<0&&R===false){break}}else if(R===false&&(e.begin[O]<i||j.idx(O,"attribute")<0)){break}O=O+1}while(O<q);if(j.is(O-1,"comment_attribute"))_=F(C[O-2]-1);e.token[O-1]=`${e.token[O-1]}${_}${k[0]}`;if(j.is(O,"comment")&&e.lines[i+1]<2)C[i]=-10}i=H.start;let D=o.indentLevel;do{if(e.lexer[i]===c){if((j.is(i,"start")||j.is(i,"singleton")||j.is(i,"xml"))&&j.idx(i,"attribute")<0&&i<q-1&&e.types[i+1]!==void 0&&j.idx(i+1,"attribute")>-1){B()}if(t.not(i,void 0)&&e.token[i].indexOf(b)>0&&(j.is(i,"content")&&L.preserveText===false||j.is(i,"comment")||j.is(i,"attribute"))){u()}else{x.push(e.token[i]);if(C[i]===-10&&i<q-1){x.push(" ")}else if(C[i]>-1){D=C[i];x.push(F(C[i]))}}}else{if(a[i]===i&&j.not(i,"reference")){x.push(e.token[i])}else{H.end=a[i];o.indentLevel=D;H.start=i;x.push(H.beautify[e.lexer[i]](o).replace(/\s+$/,v));if(C[H.iterator]>-1&&a[i]>i){x.push(F(C[H.iterator]))}i=H.iterator;o.indentLevel=0}}i=i+1}while(i<q);H.iterator=q-1;if(x[0]===b||p(x[0],32))x[0]=v;return x.join(v)})()};H.beautify.style=o=>{const a=[];const c=H.data;const e=o.crlf===true?"\r\n":"\n";const l=H.end>0?H.end+1:c.token.length;const b=o.preserveLine+1;const L=Ie(o.indentSize);const q=(()=>{let n=0;const C=[];do{C.push(o.indentChar);n=n+1}while(n<o.indentSize);return C.join(v)})();let j=o.indentLevel;let t=o.style.forceValue==="wrap"&&o.wrap>0?o.wrap:0;let i=H.start;let r=[v,v];function P(n){const C=[];const x=(()=>{if(i===l-1)return 1;if(c.lines[i+1]-1>b)return b;if(c.lines[i+1]>1)return c.lines[i+1]-1;return 1})();let d=0;if(n<0)n=0;do{C.push(e);d=d+1;t=j}while(d<x);if(n>0){d=0;do{C.push(q);d=d+1}while(d<n)}a.push(C.join(v))}function M(){const n=c.begin[i];const C=c.token[n];const x=c.token[i];const d=[];let F=i;let u=0;let B;let D=0;if(n<0||F<=n)return;do{F=F-1;if(c.begin[F]===n){if(p(c.token[F],58)){B=[F-1,0];do{F=F-1;if((p(c.token[F],59)&&C==="{"||p(c.token[F],44)&&C==="(")&&c.begin[F]===n||c.token[F]===x&&c.begin[c.begin[F]]===n){break}if(c.types[F]!=="comment"&&c.types[F]!=="selector"&&c.token[F]!==C&&c.begin[F]===n){B[1]=c.token[F].length+B[1]}}while(F>n+1);if(B[1]>D)D=B[1];d.push(B)}}else if(c.types[F]==="end"){if(F<c.begin[F])break;F=c.begin[F]}}while(F>n);F=d.length;if(F<2)return;do{F=F-1;if(d[F][1]<D){u=d[F][1];do{c.token[d[F][0]]=c.token[d[F][0]]+" ";u=u+1}while(u<D)}}while(F>0)}if(o.script.vertical===true&&o.style.compressCSS===false){i=l;do{i=i-1;if(p(c.token[i],125)||p(c.token[i],41))M()}while(i>0);i=H.start}do{if(c.types[i]==="property")t=j+c.token[i].length;if(c.types[i+1]==="end"||c.types[i+1]==="template_end"||c.types[i+1]==="template_else"){j=j-1}if(c.types[i]==="template"&&c.lines[i]===0){a.push(c.token[i]);if(c.types[i+1]==="template"&&c.lines[i+1]>0)P(j)}else if(c.types[i]==="template"&&c.lines[i]>0){if(c.types[i-2]!=="property"&&c.types[i-1]!=="colon"){t=j;a.push(c.token[i]);P(j)}else if(c.types[i-2]==="property"&&c.types[i-1]==="colon"&&c.types[i+1]==="separator"&&p(c.token[i+1],44)){t=t+c.token[i].length;if(t>o.wrap)P(j);a.push(c.token[i]);do{i=i+1;a.push(c.token[i]);if(c.lines[i+1]>0)P(j)}while(c.types[i]!=="separator"&&ie(c.token[i],59));if(p(c.token[i],59)&&c.types[i]==="separator"){a.push(c.token[i]);if(c.lines[i+1]>0)P(j);i=i+1;continue}}else{t=t+c.token[i].length;if(t>o.wrap||o.style.forceValue==="collapse"){P(j);if(ie(c.token[i][2],45)){a.push(L,c.token[i].replace("{{","{{-"))}else{a.push(L,c.token[i])}}else{a.push(c.token[i])}}}else if(c.types[i]==="template_else"){a.push(c.token[i]);j=j+1;P(j)}else if(c.types[i]==="start"||c.types[i]==="template_start"){j=j+1;a.push(c.token[i]);if(c.types[i+1]!=="end"&&c.types[i+1]!=="template_end"&&(o.style.compressCSS===false||o.style.compressCSS===true&&c.types[i+1]==="selector")){P(j)}}else if(p(c.token[i],59)&&(o.style.compressCSS===false||o.style.compressCSS===true&&c.types[i+1]==="selector")||(c.types[i]==="end"||c.types[i]==="template_end"||c.types[i]==="comment")){a.push(c.token[i]);if(c.types[i+1]==="value"){if(c.lines[i+1]===1){a.push(" ")}else if(c.lines[i+1]>1){P(j)}}else if(c.types[i+1]!=="separator"){if(c.types[i+1]!=="comment"||c.types[i+1]==="comment"&&c.lines[i+1]>1){P(j)}else{a.push(" ")}}}else if(p(c.token[i],58)){a.push(c.token[i]);if(o.style.compressCSS===false)a.push(" ")}else if(c.types[i]==="selector"){if(o.style.classPadding===true&&c.types[i-1]==="end"&&c.lines[i]<3){a.push(e)}if(c.token[i].indexOf("and(")>0){c.token[i]=c.token[i].replace(/and\(/,"and (");a.push(c.token[i])}else if(c.token[i].indexOf("when(")>0){r=c.token[i].split("when(");a.push(r[0].replace(/\s+$/,v));P(j+1);a.push(`when (${r[1]}`)}else{a.push(c.token[i])}if(c.types[i+1]==="start"){if(o.script.braceAllman===true){P(j)}else if(o.style.compressCSS===false){a.push(" ")}}}else if(p(c.token[i],44)){a.push(c.token[i]);if(c.types[i+1]==="selector"||c.types[i+1]==="property"){P(j)}else if(o.style.compressCSS===false){a.push(" ")}}else if(c.stack[i]==="map"&&p(c.token[i+1],41)&&i-c.begin[i]>5){a.push(c.token[i]);P(j)}else if(c.token[i]==="x;"){P(j)}else if((c.types[i]==="variable"||c.types[i]==="function")&&o.style.classPadding===true&&c.types[i-1]==="end"&&c.lines[i]<3){a.push(e);a.push(c.token[i])}else if(ie(c.token[i],59)||p(c.token[i],59)&&(o.style.compressCSS===false||o.style.compressCSS===true&&ie(c.token[i+1],125))){a.push(c.token[i])}i=i+1}while(i<l);H.iterator=l-1;return a.join(v)};H.beautify.script=o=>{const a=new Set(["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]);const c=Se(null);const e=H.data;const l="script";const b=H.scopes;const L=H.end<1||H.end>e.token.length?e.token.length:H.end+1;const q=(()=>{let t=H.start;let i=isNaN(o.indentLevel)?0:Number(o.indentLevel);let r=false;let P=false;let M="";let n="";let C=e.types[0];let x=e.token[0];const d=[-1];const F=[];const u=H.start>0?Array(H.start).fill(0,0,H.start):[];const B=[];const D=[[]];const f=[];const g=[];const k=[];const O=[false];const R=[];const _=[];function z(){$(false,false);const A=o.commentIndent===true?i:0;if(r===false&&/\/\u002a\s*global\s/.test(e.token[t])){const N=e.token[t].replace(/\/\u002a\s*global\s+/,"").replace(/\s*\u002a\/$/,"").split(",");let y=N.length;do{y=y-1;N[y]=N[y].replace(/\s+/g,"");if(N[y]!=="")b.push([N[y],-1])}while(y>0)}if(e.types[t-1]==="comment"||e.types[t+1]==="comment"){u[t-1]=A}else if(e.lines[t]<2){let N=t+1;if(e.types[N]==="comment"){do{N=N+1}while(N<L&&e.types[N]==="comment")}if(t<L-1&&e.stack[N]!=="block"&&(e.token[N]==="{"||e.token[N]==="x{")){let y=b.length;e.begin.splice(t,0,e.begin[N]);e.ender.splice(t,0,e.ender[N]);e.lexer.splice(t,0,e.lexer[N]);e.lines.splice(t,0,e.lines[N]);e.stack.splice(t,0,e.stack[N]);e.token.splice(t,0,e.token[N]);e.types.splice(t,0,e.types[N]);if(y>0){do{y=y-1;if(b[y][1]===N){b[y][1]=t}else if(b[y][1]<t){break}}while(y>0)}N=N+1;e.begin.splice(N,1);e.ender.splice(N,1);e.lexer.splice(N,1);e.lines.splice(N,1);e.stack.splice(N,1);e.token.splice(N,1);e.types.splice(N,1);y=t+1;do{e.begin[y]=t;e.stack[y]=e.stack[N];y=y+1}while(y<N);y=y+1;do{if(e.begin[y]===e.begin[N]){e.begin[y]=t;if(e.types[y]==="end"){break}}y=y+1}while(y<L-1);e.begin[N]=t;t=t-1}else{u[t-1]=-10;if(e.stack[t]==="paren"||e.stack[t]==="method"){u.push(i+2)}else{u.push(i)}if(o.commentIndent===true&&u[t]>-1&&e.lines[t]<3){e.lines[t]=3}}if(e.types[t+1]!=="comment")r=true;return}else if(e.token[t-1]===","){u[t-1]=A}else if(x==="="&&e.types[t-1]!=="comment"&&/^(\/\*\*\s*@[a-z_]+\s)/.test(n)===true){u[t-1]=-10}else if(x==="{"&&e.types[t-1]!=="comment"&&e.lines[0]<2){if(e.stack[t]==="function"){u[t-1]=A}else{u[t-1]=/\n/.test(n)?A:-10}}else{u[t-1]=A}if(e.types[t+1]!=="comment")r=true;if(e.token[e.begin[t]]==="("){u.push(i+1)}else{u.push(i)}if(u[t]>-1&&e.lines[t]<3){if(e.types[t-1]==="comment"&&n.startsWith("//")){e.lines[t]=2}else{e.lines[t]=3}}if(o.script.commentNewline===true&&n.startsWith("//")===false&&e.lines[t]>=3){e.lines[t]=2}}function $(A,N){let y=t-1;let h=A===true?0:1;const m=D[D.length-1]===void 0?[]:D[D.length-1];const S=N===false&&e.stack[t]==="array"&&A===true&&n!=="[";if(g[g.length-1]===false||e.stack[t]==="array"&&o.script.arrayFormat==="inline"||e.stack[t]==="object"&&o.script.objectIndent==="inline"){return}g[g.length-1]=false;do{if(e.types[y]==="end"){h=h+1}else if(e.types[y]==="start"){h=h-1}if(e.stack[y]==="global")break;if(h===0){if(e.stack[t]==="class"||e.stack[t]==="map"||S===false&&(A===false&&e.token[y]!=="("&&e.token[y]!=="x("||A===true&&e.token[y]===",")){if(e.types[y+1]==="template_start"){if(e.lines[y]<1){u[y]=-20}else{u[y]=i-1}}else if(m.length>0&&m[m.length-1]>-1){u[y]=i-1}else{u[y]=i}}else if(e.stack[t]==="array"&&e.types[t]==="operator"){if(e.token[y]===",")u[y]=i;if(y===e.begin[t])break}if(A===false)break}if(h<0){if(e.types[y+1]==="template_start"||e.types[y+1]==="template_string_start"){if(e.lines[y]<1){u[y]=-20}else{u[y]=i-1}}else if(m.length>0&&m[m.length-1]>-1){u[y]=i-1}else{u[y]=i}break}y=y-1}while(y>-1)}function oe(){const A=D[D.length-1]===void 0?[]:D[D.length-1];const N=()=>{let y=t;let h=false;const m=e.begin[y];do{y=y-1;if(e.lexer[y]==="markup"){h=true;break}if(e.begin[y]!==m)y=e.begin[y]}while(y>m);if(h===true){y=t;do{y=y-1;if(e.begin[y]!==m){y=e.begin[y]}else if(e.token[y]===","){u[y]=i+1}}while(y>m);u[m]=i+1;u[t-1]=i}else{u[t-1]=-20}};if(n===")"&&e.token[t+1]==="."&&A[A.length-1]>-1&&e.token[A[0]]!==":"){let y=e.begin[t];let h=false;let m=false;do{y=y-1}while(y>0&&u[y]<-9);h=u[y]===i;y=t+1;do{y=y+1;if(e.token[y]==="{"){m=true;break}if(e.begin[y]===e.begin[t+1]&&(e.types[y]==="separator"||e.types[y]==="end")){break}}while(y<L);if(h===false&&m===true&&D.length>1){D[D.length-2].push(e.begin[t]);i=i+1}}if(C!=="separator")K();if(e.token[t+1]===","&&(e.stack[t]==="object"||e.stack[t]==="array")){$(true,false)}if(e.token[e.begin[t]-1]===","&&(e.token[t+1]==="}"||e.token[t+1]==="]")&&(e.stack[t]==="object"||e.stack[t]==="array")){$(true,false)}if(e.stack[t]!=="attribute"){if(n!==")"&&n!=="x)"&&(e.lexer[t-1]!=="markup"||e.lexer[t-1]==="markup"&&e.token[t-2]!=="return")){i=i-1}if(n==="}"&&e.stack[t]==="switch"&&o.script.noCaseIndent===false){i=i-1}}if(n==="}"||n==="x}"){if(e.types[t-1]!=="comment"&&x!=="{"&&x!=="x{"&&C!=="end"&&C!=="string"&&C!=="number"&&C!=="separator"&&x!=="++"&&x!=="--"&&(t<2||e.token[t-2]!==";"||e.token[t-2]!=="x;"||x==="break"||x==="return")){let y=t-1;let h=false;const m=e.begin[t];const S=F.length;do{if(e.begin[y]===m){if(e.token[y]==="="||e.token[y]===";"||e.token[y]==="x;"){h=true}if(e.token[y]==="."&&u[y-1]>-1){g[g.length-1]=false;u[m]=i+1;u[t-1]=i;break}if(y>0&&e.token[y]==="return"&&(e.token[y-1]===")"||e.token[y-1]==="x)"||e.token[y-1]==="{"||e.token[y-1]==="x{"||e.token[y-1]==="}"||e.token[y-1]==="x}"||e.token[y-1]===";"||e.token[y-1]==="x;")){i=i-1;u[t-1]=i;break}if(e.token[y]===":"&&B.length===0||e.token[y]===","&&h===false){break}if(y===0||e.token[y-1]==="{"||e.token[y-1]==="x{"||e.token[y]==="for"||e.token[y]==="if"||e.token[y]==="do"||e.token[y]==="function"||e.token[y]==="while"||e.token[y]==="var"||e.token[y]==="let"||e.token[y]==="const"||e.token[y]==="with"){if(F[S-1]===false&&S>1&&(t===L-1||e.token[t+1]!==")"&&e.token[t+1]!=="x)")&&e.stack[t]!=="object"){i=i-1}break}}else{y=e.begin[y]}y=y-1}while(y>m)}d.pop()}if(o.script.bracePadding===false&&n!=="}"&&C!=="markup"){u[t-1]=-20}if(o.script.bracePadding===true&&C!=="start"&&x!==";"&&(u[e.begin[t]]<-9||g[g.length-1]===true)){u[e.begin[t]]=-10;u[t-1]=-10;u.push(-20)}else if(e.stack[t]==="attribute"){u[t-1]=-20;u.push(i)}else if(e.stack[t]==="array"&&(A.length>0||f[f.length-1]===true)){G();g[g.length-1]=false;u[e.begin[t]]=i+1;u[t-1]=i;u.push(-20)}else if((e.stack[t]==="object"||e.begin[t]===0&&n==="}")&&A.length>0){G();g[g.length-1]=false;u[e.begin[t]]=i+1;u[t-1]=i;u.push(-20)}else if(n===")"||n==="x)"){const y=n===")"&&x!=="("&&_.length>0?_.pop()+1:0;const h=e.token[e.begin[t]-1]==="if"?(()=>{let m=t;do{m=m-1;if(e.token[m]===")"&&u[m-1]>-1)return y}while(m>e.begin[t]);return y+5})():y;if(y>0&&(o.language!=="jsx"||o.language==="jsx"&&e.token[e.begin[t]-1]!=="render")){const m=o.wrap;const S=e.begin[t];const E=_.length;let w=t-2;if(h>m){u[e.begin[t]]=i+1;u[t-1]=i;do{if(e.begin[w]===S){if(e.token[w]==="&&"||e.token[w]==="||"){u[w]=i+1}else if(u[w]>-1&&e.types[w]!=="comment"&&e.token[w+1]!=="."){u[w]=u[w]+1}}else if(u[w]>-1&&e.token[w+1]!=="."){u[w]=u[w]+1}w=w-1}while(w>S)}else if(E>0){_[E-1]=_[E-1]+y}}else if(n===")"&&t>e.begin[t]+2&&e.lexer[e.begin[t]+1]===l&&e.token[e.begin[t]+1]!=="function"){const m=e.begin[t]<0?0:e.begin[t];const S=o.wrap;const E=A.length;let w=0;let I=0;let T=0;let V=0;let ee=0;let U=false;let ce=false;let ne=i+1;let fe=false;let be=false;let re=false;if(u[m]<-9){I=m;do{I=I+1}while(I<t&&u[I]<-9);V=I;do{w=w+e.token[I].length;if(u[I]===-10)w=w+1;if(e.token[I]==="("&&T>0&&T<S-1&&V===t){T=-1}if(e.token[I]===")"){ee=ee-1}else if(e.token[I]==="("){ee=ee+1}if(I===m&&ee>0)T=w;I=I-1}while(I>m&&u[I]<-9);if(e.token[I+1]===".")ne=u[I]+1;if(w>S-1&&S>0&&x!=="("&&T!==-1&&g[g.length-2]===false){if(e.token[m-1]==="if"&&F[F.length-1]===true||e.token[m-1]!=="if"){u[m]=ne;if(e.token[m-1]==="for"){I=m;do{I=I+1;if(e.token[I]===";"&&e.begin[I]===m){u[I]=ne}}while(I<t)}}}}I=t;w=0;do{I=I-1;if(e.stack[I]==="function"){I=e.begin[I]}else if(e.begin[I]===m){if(e.token[I]==="?"){re=true}else if(e.token[I]===","&&U===false){U=true;if(w>=S&&S>0)fe=true}else if(e.types[I]==="markup"&&be===false){be=true}if(u[I]>-9&&e.token[I]!==","&&e.types[I]!=="markup"){w=0}else{if(u[I]===-10)w=w+1;w=w+e.token[I].length;if(w>=S&&S>0&&(U===true||be===true)){fe=true}}}else{if(u[I]>-9){w=0}else{w=w+e.token[I].length;if(w>=S&&S>0&&(U===true||be===true)){fe=true}}}}while(I>m&&fe===false);if(U===false&&e.token[e.begin[t]+1].charAt(0)==="`"){u[e.begin[t]]=-20;u[t-1]=-20}else if((U===true||be===true)&&w>=S&&S>0||u[m]>-9){if(re===true){ne=u[m];if(e.token[m-1]==="["){I=t;do{I=I+1;if(e.types[I]==="end"||e.token[I]===","||e.token[I]===";"){break}}while(I<L);if(e.token[I]==="]"){ne=ne-1;ce=true}}}else if(E>0&&A[E-1]>I){ne=ne-E}g[g.length-1]=false;I=t;do{I=I-1;if(e.begin[I]===m){if(e.token[I].indexOf("=")>-1&&e.types[I]==="operator"&&e.token[I].indexOf("!")<0&&e.token[I].indexOf("==")<0&&e.token[I]!=="<="&&e.token[I].indexOf(">")<0){w=I;do{w=w-1;if(e.begin[w]===m&&(e.token[w]===";"||e.token[w]===","||w===m)){break}}while(w>m)}else if(e.token[I]===","){u[I]=ne}else if(u[I]>-9&&ce===false&&(e.token[m-1]!=="for"||e.token[I+1]==="?"||e.token[I+1]===":")&&(e.token[e.begin[t]]!=="("||e.token[I]!=="+")){u[I]=u[I]+1}}else if(u[I]>-9&&ce===false){u[I]=u[I]+1}}while(I>m);u[m]=ne;u[t-1]=ne-1}else{u[t-1]=-20}if(e.token[e.begin[t]-1]==="+"&&u[e.begin[t]]>-9){u[e.begin[t]-1]=-10}}else if(o.language==="jsx"){N()}else{u[t-1]=-20}u.push(-20)}else if(g[g.length-1]===true){if(n==="]"&&e.begin[t]-1>0&&e.token[e.begin[e.begin[t]-1]]==="["){g[g.length-2]=false}if(e.begin[t]<u.length)u[e.begin[t]]=-20;if(o.language==="jsx"){N()}else if(n==="]"&&u[e.begin[t]]>-1){u[t-1]=u[e.begin[t]]-1}else{u[t-1]=-20}u.push(-20)}else if(e.types[t-1]==="comment"&&e.token[t-1].substring(0,2)==="//"){if(e.token[t-2]==="x}")u[t-3]=i+1;u[t-1]=i;u.push(-20)}else if(e.types[t-1]!=="comment"&&(x==="{"&&n==="}"||x==="["&&n==="]")){u[t-1]=-20;u.push(-20)}else if(n==="]"){if(F[F.length-1]===true&&g[g.length-1]===false&&o.script.arrayFormat!=="inline"||x==="]"&&u[t-2]===i+1){u[t-1]=i;u[e.begin[t]]=i+1}else if(u[t-1]===-10){u[t-1]=-20}if(e.token[e.begin[t]+1]==="function"){u[t-1]=i}else if(F[F.length-1]===false){if(x==="}"||x==="x}")u[t-1]=i;let y=t-1;let h=1;do{if(e.token[y]==="]")h=h+1;if(e.token[y]==="["){h=h-1;if(h===0){if(y>0&&(e.token[y+1]==="{"||e.token[y+1]==="x{"||e.token[y+1]==="[")){u[y]=i+1;break}if(e.token[y+1]!=="["||P===false){u[y]=-20;break}break}}if(h===1&&e.token[y]==="+"&&u[y]>1){u[y]=u[y]-1}y=y-1}while(y>-1)}else if(o.language==="jsx"){N()}if(o.script.arrayFormat==="inline"){let y=t;const h=e.begin[t];do{y=y-1;if(e.types[y]==="end")break}while(y>h);if(y>h){u[e.begin[t]]=i+1;u[t-1]=i}else{u[e.begin[t]]=-20;u[t-1]=-20}}else if(u[e.begin[t]]>-1){u[t-1]=u[e.begin[t]]-1}u.push(-20)}else if(n==="}"||n==="x}"||F[F.length-1]===true){if(n==="}"&&x==="x}"&&e.token[t+1]==="else"){u[t-2]=i+2;u.push(-20)}else{u.push(i)}u[t-1]=i}else{u.push(-20)}if(e.types[t-1]==="comment")u[t-1]=i;if(o.script.inlineReturn&&o.script.correct===false&&n==="x}"&&(e.stack[t]==="if"||e.stack[t]==="else")&&e.token[e.begin[e.begin[t-1]-1]-2]!=="else"){u[t-1]=-20}G();P=F[F.length-1];F.pop();D.pop();f.pop();k.pop();R.pop();g.pop();O.pop()}function G(){let A=0;const N=D[D.length-1];if(N===void 0)return;A=N.length-1;if(A<1&&N[A]<0&&(n===";"||n==="x;"||n===")"||n==="x)"||n==="}"||n==="x}")){N.pop();return}if(A<0||N[A]<0)return;if(n===":"){if(e.token[N[A]]!=="?"){do{N.pop();A=A-1;i=i-1}while(A>-1&&N[A]>-1&&e.token[N[A]]!=="?")}N[A]=t;u[t-1]=i}else{do{N.pop();A=A-1;i=i-1}while(A>-1&&N[A]>-1)}if((e.stack[t]==="array"||n===",")&&N.length<1)N.push(-1)}function Y(){const A=t;do{if(e.lexer[t+1]===l&&e.begin[t+1]<A)break;if(e.token[A-1]==="return"&&e.types[t]==="end"&&e.begin[t]===A)break;u.push(0);t=t+1}while(t<L);c[A]=t;u.push(i-1)}function K(){let A=t-1;const N=e.begin[t];if(i<1)return;do{if(N!==e.begin[A]){A=e.begin[A]}else{if(e.types[A]==="separator"||e.types[A]==="operator"){if(e.token[A]==="."&&u[A-1]>0){if(e.token[N-1]==="if"){i=i-2}else{i=i-1}}break}}A=A-1}while(A>0&&A>N)}function le(){if(e.token[t+1]!==","&&n.indexOf("/>")!==n.length-2||e.token[t+1]===","&&e.token[e.begin[t]-3]!=="React"){$(false,false)}if(x==="return"||x==="?"||x===":"){u[t-1]=-10;u.push(-20)}else if(C==="start"||e.token[t-2]==="return"&&e.stack[t-1]==="method"){u.push(i)}else{u.push(-20)}}function Z(){const A=D[D.length-1]===void 0?[]:D[D.length-1];function N(){const y=e.token[t+1];let h=0;let m=0;let S=t;let E=n==="+"?i+2:i;let w=0;if(o.wrap<1){u.push(-10);return}do{S=S-1;if(e.token[e.begin[t]]==="("){if(S===e.begin[t]){w=h}if(e.token[S]===","&&e.begin[S]===e.begin[t]&&F[F.length-1]===true){break}}if(h>o.wrap-1)break;if(u[S]>-9)break;if(e.types[S]==="operator"&&e.token[S]!=="="&&e.token[S]!=="+"&&e.begin[S]===e.begin[t]){break}h=h+e.token[S].length;if(S===e.begin[t]&&e.token[S]==="["&&h<o.wrap-1){break}if(e.token[S]==="."&&u[S]>-9)break;if(u[S]===-10)h=h+1}while(S>0);if(w>0)w=w+y.length;h=h+y.length;m=S;if(h>o.wrap-1&&u[S]<-9){do{m=m-1}while(m>0&&u[m]<-9)}if(e.token[m+1]==="."&&e.begin[t]<=e.begin[m]){E=E+1}else if(e.types[m]==="operator"){E=u[m]}m=y.length;if(h+m<o.wrap){u.push(-10);return}if(e.token[e.begin[t]]==="("&&(e.token[A[0]]===":"||e.token[A[0]]==="?")){E=i+3}else if(e.stack[t]==="method"){u[e.begin[t]]=i;if(F[F.length-1]===true){E=i+3}else{E=i+1}}else if(e.stack[t]==="object"||e.stack[t]==="array"){$(true,false)}if(e.token[S]==="var"||e.token[S]==="let"||e.token[S]==="const"){h=h-o.indentSize*o.indentChar.length*2}if(w>0){S=o.wrap-w}else{S=o.wrap-h}if(S>0&&S<5){u.push(E);if(e.token[t].charAt(0)==='"'||e.token[t].charAt(0)==="'"){t=t+1;u.push(-10)}return}if(e.token[e.begin[t]]!=="("||w>o.wrap-1||w===0){if(w>0)h=w;if(h-y.length<o.wrap-1&&(y.charAt(0)==='"'||y.charAt(0)==="'")){t=t+1;h=h+3;if(h-y.length>o.wrap-4){u.push(E);return}u.push(-10);return}u.push(E);return}u.push(-10)}K();if(A.length>0&&A[A.length-1]>-1&&e.stack[t]==="array"){f[f.length-1]=true}if(n!==":"){if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&g.length>0){$(true,false)}if(n!=="?"&&e.token[A[A.length-1]]==="."){let y=0;let h=t;const m=e.begin[h];do{if(e.begin[h]===m){if(e.token[h+1]==="{"||e.token[h+1]==="["||e.token[h]==="function"){break}if(e.token[h]===","||e.token[h]===";"||e.types[h]==="end"||e.token[h]===":"){A.pop();i=i-1;break}if(e.token[h]==="?"||e.token[h]===":"){if(e.token[A[A.length-1]]==="."&&y<2)A[A.length-1]=m+1;break}if(e.token[h]===".")y=y+1}h=h+1}while(h<L)}}if(n==="!"||n==="..."){if(x==="}"||x==="x}")u[t-1]=i;u.push(-20);return}if(x===";"||x==="x;"){if(e.token[e.begin[t]-1]!=="for")u[t-1]=i;u.push(-20);return}if(n==="*"){if(x==="function"||x==="yield"){u[t-1]=-20}else{u[t-1]=-10}u.push(-10);return}if(n==="?"){if(e.lines[t]===0&&e.types[t-2]==="word"&&e.token[t-2]!=="return"&&e.token[t-2]!=="in"&&e.token[t-2]!=="instanceof"&&e.token[t-2]!=="typeof"&&(C==="reference"||C==="word")){if(e.types[t+1]==="word"||e.types[t+1]==="reference"||(e.token[t+1]==="("||e.token[t+1]==="x(")&&e.token[t-2]==="new"){u[t-1]=-20;if(e.types[t+1]==="word"||e.types[t+1]==="reference"){u.push(-10);return}u.push(-20);return}}if(e.token[t+1]===":"){u[t-1]=-20;u.push(-20);return}B.push(t);if(o.script.ternaryLine===true){u[t-1]=-10}else{let y=t-1;do{y=y-1}while(y>-1&&u[y]<-9);A.push(t);i=i+1;if(u[y]===i&&e.token[y+1]!==":"){i=i+1;A.push(t)}u[t-1]=i;if(e.token[e.begin[t]]==="("&&(A.length<2||A[0]===A[1])){g[g.length-1]=false;if(t-2===e.begin[t]){u[e.begin[t]]=i-1}else{u[e.begin[t]]=i}y=t-2;do{if(e.types[y]==="end"&&u[y-1]>-1)break;if(u[y]>-1)u[y]=u[y]+1;y=y-1}while(y>e.begin[t])}}u.push(-10);return}if(n===":"){if(e.stack[t]==="map"||e.types[t+1]==="type"||e.types[t+1]==="type_start"){u[t-1]=-20;u.push(-10);return}if(B.length>0&&e.begin[B[B.length-1]]===e.begin[t]){let y=t;const h=e.begin[t];do{y=y-1;if(e.begin[y]===h){if(e.token[y]===","||e.token[y]===";"){u[t-1]=-20;break}if(e.token[y]==="?"){B.pop();G();if(o.script.ternaryLine===true)u[t-1]=-10;u.push(-10);return}}else if(e.types[y]==="end"){y=e.begin[y]}}while(y>h)}if(e.token[t-2]==="where"&&e.stack[t-2]===e.stack[t]){u[t-1]=-10;u.push(-10);return}if(C==="reference"&&e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("){u[t-1]=-20;u.push(-10);return}if((x===")"||x==="x)")&&e.token[e.begin[t-1]-2]==="function"){u[t-1]=-20;u.push(-10);return}if(e.stack[t]==="attribute"){u[t-1]=-20;u.push(-10);return}if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&(C==="reference"||x===")"||x==="]"||x==="?")&&(e.stack[t]==="map"||e.stack[t]==="class"||e.types[t+1]==="reference")&&(B.length===0||B[B.length-1]<e.begin[t])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[t])>-1||e.types[t-2]==="word"&&e.stack[t]!=="switch")){u[t-1]=-20;u.push(-10);return}if(e.stack[t]==="switch"&&(B.length<1||B[B.length-1]<e.begin[t])){u[t-1]=-20;if(o.script.caseSpace===true){u.push(-10)}else{u.push(i)}return}if(e.stack[t]==="object"){u[t-1]=-20}else if(B.length>0){u[t-1]=i}else{u[t-1]=-10}u.push(-10);return}if(n==="++"||n==="--"){if(C==="number"||C==="reference"){u[t-1]=-20;u.push(-10)}else if(t<L-1&&(e.types[t+1]==="number"||e.types[t+1]==="reference")){u.push(-20)}else{u.push(-10)}return}if(n==="+"){if(C==="start"){u[t-1]=-20}else{u[t-1]=-10}if(o.wrap<1||e.token[e.begin[t]]==="x("){u.push(-10);return}const y=e.token[t+1];if(y===void 0){u.push(-10);return}if(e.types[t-1]==="operator"||e.types[t-1]==="start"){if(e.types[t+1]==="reference"||y==="("||y==="["){u.push(-20);return}if(Number(y.slice(1,-1))>-1&&(/\d/.test(y.charAt(1))===true||y.charAt(1)==="."||y.charAt(1)==="-"||y.charAt(1)==="+")){u.push(-20);return}}return N()}if(e.types[t-1]!=="comment"){if(x==="("){u[t-1]=-20}else if(n==="*"&&e.stack[t]==="object"&&e.types[t+1]==="reference"&&(x==="{"||x===",")){u[t-1]=i}else if(n!=="?"||B.length===0){u[t-1]=-10}}if(n.indexOf("=")>-1&&n!=="=="&&n!=="==="&&n!=="!="&&n!=="!=="&&n!==">="&&n!=="<="&&n!=="=>"&&e.stack[t]!=="method"&&e.stack[t]!=="object"){let y=t+1;let h=0;let m=false;let S="";if((e.token[e.begin[t]]==="("||e.token[e.begin[t]]==="x(")&&e.token[t+1]!=="function"){return}do{if(e.types[y]==="start"){if(m===true&&e.token[y]!=="["){if(O[O.length-1]===true){O[O.length-1]=false}break}h=h+1}if(e.types[y]==="end")h=h-1;if(h<0){if(O[O.length-1]===true){O[O.length-1]=false}break}if(h===0){S=e.token[y];if(m===true){if(e.types[y]==="operator"||e.token[y]===";"||e.token[y]==="x;"||e.token[y]==="?"||e.token[y]==="var"||e.token[y]==="let"||e.token[y]==="const"){if(S!==void 0&&(S==="?"||S.indexOf("=")>-1&&S!=="=="&&S!=="==="&&S!=="!="&&S!=="!=="&&S!==">="&&S!=="<=")){if(O[O.length-1]===false){O[O.length-1]=true}}if((S===";"||S==="x;"||S==="var"||S==="let"||S==="const")&&O[O.length-1]===true){O[O.length-1]=false}break}if(O[O.length-1]===true&&(S==="return"||S==="break"||S==="continue"||S==="throw")){O[O.length-1]=false}}if(S===";"||S==="x;"||S===",")m=true}y=y+1}while(y<L);u.push(-10);return}if(n==="-"&&x==="return"||x==="="){u.push(-20);return}if(C==="operator"&&e.types[t+1]==="reference"&&x!=="--"&&x!=="++"&&n!=="&&"&&n!=="||"){u.push(-20);return}return N()}function ae(){const A=()=>{let N=e.begin[t];if(N<0){b.push([e.token[t],-1])}else{if(e.stack[N+1]!=="function"){do{N=e.begin[N]}while(N>-1&&e.stack[N+1]!=="function")}b.push([e.token[t],N])}};if(e.types[t-1]==="comment"){u[t-1]=i}else if(C==="end"&&x!==")"&&e.token[e.begin[t-1]-1]!==")"){u[t-1]=-10}else if(C!=="separator"&&C!=="start"&&C!=="end"&&C.indexOf("template_string")<0){if(C==="word"||C==="operator"||C==="property"||C==="type"||C==="reference"){u[t-1]=-10}else{u[t-1]=-20}}if(x==="var"&&e.lexer[t-1]===l){A()}else if(x==="function"){b.push([e.token[t],t])}else if(x==="let"||x==="const"){b.push([e.token[t],t])}else if(e.stack[t]==="arguments"){b.push([e.token[t],t])}else if(x===","){let N=t;do{N=N-1}while(N>e.begin[t]&&e.token[N]!=="var"&&e.token[N]!=="let"&&e.token[N]!=="const");if(e.token[N]==="var"){A()}else if(e.token[N]==="let"||e.token[N]==="const"){b.push([e.token[t],t])}}u.push(-10)}function W(){const A=D[D.length-1]===void 0?[]:D[D.length-1];const N=()=>{if(o.script.methodChain>0){let y=t;let h=e.begin[t];const m=[t];const S=e.token[h-1]==="if";do{y=y-1;if(e.types[y]==="end")y=e.begin[y];if(e.begin[y]===h){if(e.types[y]==="string"&&e.token[y].indexOf("${")===e.token[y].length-2){break}if(e.token[y]==="."){if(u[y-1]>0){u[t-1]=S===true?i+1:i;return}m.push(y)}else if(e.token[y]===";"||e.token[y]===","||e.types[y]==="operator"||(e.types[y]==="word"||e.types[y]==="reference")&&(e.types[y-1]==="word"||e.types[y-1]==="reference")){break}}}while(y>h);if(m.length<o.script.methodChain){u[t-1]=-20;return}y=0;h=m.length;do{u[m[y]-1]=S===true?i+1:i;y=y+1}while(y<h);y=m[m.length-1]-1;do{if(u[y]>-1)u[y]=u[y]+1;y=y+1}while(y<t);i=S===true?i+2:i+1}u[t-1]=i};if(n==="::"){u[t-1]=-20;u.push(-20);return}if(n==="."){if(e.token[e.begin[t]]!=="("&&e.token[e.begin[t]]!=="x("&&A.length>0){if(e.stack[t]==="object"||e.stack[t]==="array"){$(true,false)}else{$(false,false)}}if(o.script.methodChain===0){u[t-1]=-20}else if(o.script.methodChain<0){if(e.lines[t]>0){N()}else{u[t-1]=-20}}else{N()}u.push(-20);return}if(n===","){K();if(F[F.length-1]===false&&(e.stack[t]==="object"||e.stack[t]==="array"||e.stack[t]==="paren"||e.stack[t]==="expression"||e.stack[t]==="method")){F[F.length-1]=true;if(e.token[e.begin[t]]==="("){let y=t;do{y=y-1;if(e.begin[y]===e.begin[t]&&e.token[y]==="+"&&u[y]>-9){u[y]=u[y]+2}}while(y>e.begin[t])}}if(e.stack[t]==="array"&&o.script.arrayFormat==="indent"){u[t-1]=-20;u.push(i);return}if(e.stack[t]==="array"&&o.script.arrayFormat==="inline"){u[t-1]=-20;u.push(-10);return}if(e.stack[t]==="object"&&o.script.objectIndent==="indent"){u[t-1]=-20;u.push(i);return}if(e.stack[t]==="object"&&o.script.objectIndent==="inline"){u[t-1]=-20;u.push(-10);return}if(A.length>0){if(A[A.length-1]>-1)G();u[t-1]=-20;u.push(i);return}if(e.token[t-2]===":"&&e.token[t-4]==="where"){u[t-1]=-20;u.push(-10);return}u[t-1]=-20;if(e.types[t+1]!=="end"){k[k.length-1]=k[k.length-1]+1}if((e.token[e.begin[t]]==="("||e.token[e.begin[t]]==="x(")&&o.language!=="jsx"&&e.stack[t]!=="global"&&(e.types[t-1]!=="string"&&e.types[t-1]!=="number"||e.token[t-2]!=="+"||e.types[t-1]==="string"&&e.types[t-1]!=="number"&&e.token[t-2]==="+"&&e.types[t-3]!=="string"&&e.types[t-3]!=="number")){u.push(-10);return}if(C==="reference"&&e.types[t-2]==="word"&&"var-let-const-from".indexOf(e.token[t-2])<0&&(e.types[t-3]==="end"||e.token[t-3]===";")){R[R.length-1]=true;u.push(-10);return}if(R[R.length-1]===true||e.stack[t]==="notation"){u.push(-10);return}if(k[k.length-1]>3&&(e.stack[t]==="array"||e.stack[t]==="object")){if(g[g.length-1]===true)$(true,true);u[t-1]=-20;if(f[f.length-1]===true){u.push(i);return}const y=e.begin[t];let h=t;do{if(e.types[h]==="end"){h=e.begin[h]}else{if(e.token[h]===","&&e.types[h+1]!=="comment"){u[h]=i}}h=h-1}while(h>y);u[y]=i;f[f.length-1]=true;return}if(e.stack[t]==="object"){if(g[g.length-1]===true&&e.types[e.begin[t]-1]!=="word"&&e.types[e.begin[t]-1]!=="reference"&&e.token[e.begin[t]-1]!=="("&&e.token[e.begin[t]-1]!=="x("){const y=e.begin[t];let h=t-1;do{if(e.begin[h]===y){if(e.token[h]===",")break;if(e.token[h]===":"){$(true,false);break}}h=h-1}while(h>y)}}if(g[g.length-1]===false||e.token[t-2]==="+"&&(C==="string"||C==="number")&&u[t-2]>0&&(x.charAt(0)==='"'||x.charAt(0)==="'")){if(e.stack[t]==="method"){if(e.token[t-2]==="+"&&(x.charAt(0)==='"'||x.charAt(0)==="'")&&(e.token[t-3].charAt(0)==='"'||e.token[t-3].charAt(0)==="'")){u.push(i+2);return}if(e.token[t-2]!=="+"){u.push(-10);return}}u.push(i);return}if(g[g.length-1]===true&&e.stack[t]!=="object"){u.push(-10);return}if(k[k.length-1]<4&&(e.stack[t]==="array"||e.stack[t]==="object")){u.push(-10);return}u.push(i);return}if(n===";"||n==="x;"){K();if(e.token[t+1]!==void 0&&e.types[t+1].indexOf("attribute")>0&&e.types[t+1].indexOf("end")>0){u[t-1]=-20;u.push(i-1);return}if(d[d.length-1]>-1&&e.stack[d[d.length-1]]!=="expression"){let y=t;do{y=y-1;if(e.token[y]===";")break;if(e.token[y]===","){i=i-1;break}if(e.types[y]==="end")y=e.begin[y]}while(y>0&&y>e.begin[t])}d[d.length-1]=-1;G();if(e.token[e.begin[t]-1]!=="for")$(false,false);R[R.length-1]=false;u[t-1]=-20;if(e.begin[t]>0&&e.token[e.begin[t]-1]==="for"&&e.stack[t]!=="for"){u.push(-10);return}u.push(i);return}u.push(-20)}function se(){const A=e.stack[t+1];const N=t===0?e.stack[t]:e.stack[t-1];if(x===")"||(N==="object"||N==="array")&&x!=="]"){if(A!=="method"||A==="method"&&e.token[t+1]!==")"&&e.token[t+2]!==")"){if(x===")"&&(A!=="function"||e.token[e.begin[e.begin[t-1]-1]]==="("||e.token[e.begin[e.begin[t-1]-1]]==="x(")){$(false,false)}else if(e.types[t+1]!=="end"&&e.types[t+2]!=="end"){$(true,false)}}}F.push(false);D.push([]);O.push(false);f.push(false);R.push(false);k.push(0);if(o.script.neverFlatten===true||A==="array"&&o.script.arrayFormat==="indent"||A==="attribute"||C==="generic"||A==="class"&&x!=="("&&x!=="x("||n==="["&&e.token[t+1]==="function"){g.push(false)}else{if(A==="expression"||A==="method"){g.push(true)}else if((A==="object"||A==="class")&&(x==="("||x==="x("||C==="word"||C==="reference")){g.push(true)}else if(A==="array"||n==="("||n==="x("){g.push(true)}else if(n==="{"&&A==="object"&&C!=="operator"&&C!=="start"&&C!=="string"&&C!=="number"&&N!=="object"&&N!=="array"&&t>0){g.push(true)}else{g.push(false)}}if(n!=="("&&n!=="x("&&e.stack[t+1]!=="attribute"){i=i+1}if(n==="{"||n==="x{"){d.push(-1);if(e.types[t-1]!=="comment"){if(C==="markup"){u[t-1]=i}else if(o.script.braceAllman===true&&C!=="operator"&&x!=="return"){u[t-1]=i-1}else if(e.stack[t+1]!=="block"&&(A==="function"||x===")"||x==="x)"||x===","||x==="}"||C==="markup")){u[t-1]=-10}else if(x==="{"||x==="x{"||x==="["||x==="}"||x==="x}"){u[t-1]=i-1}}if(A==="object"){if(o.script.objectIndent==="indent"){g[g.length-1]=false;u.push(i);return}if(o.script.objectIndent==="inline"){g[g.length-1]=true;u.push(-20);return}}if(A==="switch"){if(o.script.noCaseIndent===true){u.push(i-1);return}i=i+1;u.push(i);return}if(g[g.length-1]===true){if(C!=="word"&&C!=="reference"){u.push(-20);return}}u.push(i);return}if(n==="("||n==="x("){if(o.wrap>0&&n==="("&&e.token[t+1]!==")"){_.push(1)}if(x==="-"&&(e.token[t-2]==="("||e.token[t-2]==="x(")){u[t-2]=-20}if(C==="end"&&N!=="if"&&N!=="for"&&N!=="catch"&&N!=="else"&&N!=="do"&&N!=="try"&&N!=="finally"&&N!=="catch"){if(e.types[t-1]==="comment"){u[t-1]=i}else{u[t-1]=-20}}if(x==="async"){u[t-1]=-10}else if(A==="method"||e.token[t-2]==="function"&&C==="reference"){if(x==="import"||x==="in"||o.script.functionNameSpace===true){u[t-1]=-10}else if(x==="}"&&e.stack[t-1]==="function"||C==="word"||C==="reference"||C==="property"){u[t-1]=-20}else if(N!=="method"&&A!=="method"){u[t-1]=i}}if(x==="+"&&(e.token[t-2].charAt(0)==='"'||e.token[t-2].charAt(0)==="'")){u.push(i);return}if(x==="}"||x==="x}"){u.push(-20);return}if(x==="-"&&(t<2||e.token[t-2]!==")"&&e.token[t-2]!=="x)"&&e.token[t-2]!=="]"&&e.types[t-2]!=="reference"&&e.types[t-2]!=="string"&&e.types[t-2]!=="number")||o.script.functionSpace===false&&x==="function"){u[t-1]=-20}u.push(-20);return}if(n==="["){if(x==="[")F[F.length-2]=true;if(x==="return"||x==="var"||x==="let"||x==="const"){u[t-1]=-10}else if(e.types[t-1]!=="comment"&&e.stack[t-1]!=="attribute"&&(C==="end"||C==="word"||C==="reference")){u[t-1]=-20}else if(x==="["||x==="{"||x==="x{"){u[t-1]=i-1}if(e.stack[t]==="attribute"){u.push(-20);return}if(o.script.arrayFormat==="indent"){g[g.length-1]=false;u.push(i);return}if(o.script.arrayFormat==="inline"){g[g.length-1]=true;u.push(-20);return}if(A==="method"||g[g.length-1]===true){u.push(-20);return}let y=t+1;do{if(e.token[y]==="]"){u.push(-20);return}if(e.token[y]===","){u.push(i);return}y=y+1}while(y<L);u.push(-20)}}function X(){if(n.length===1){u.push(-20);if(e.lines[t]===0)u[t-1]=-20}else if(n.indexOf("#!/")===0){u.push(i)}else{u.push(-10)}if((x===","||C==="start")&&(e.stack[t]==="object"||e.stack[t]==="array")&&g[g.length-1]===false&&t>0){u[t-1]=i}}function ye(){if(M==="template_else"){u[t-1]=i-1;u.push(i)}else if(M==="template_start"){i=i+1;if(e.lines[t-1]<1)u[t-1]=-20;if(e.lines[t]>0||x.length===1&&C==="string"){u.push(i)}else{u.push(-20)}}else if(M==="template_end"){i=i-1;if(C==="template_start"||e.lines[t-1]<1){u[t-1]=-20}else{u[t-1]=i}if(e.lines[t]>0){u.push(i)}else{u.push(-20)}}else if(M==="template"){if(e.lines[t]>0){u.push(i)}else{u.push(-20)}}}function te(){if(M==="template_string_start"){i=i+1;u.push(i)}else if(M==="template_string_else"){K();u[t-1]=i-1;u.push(i)}else{K();i=i-1;u[t-1]=i;u.push(-10)}if(t>2&&(e.types[t-2]==="template_string_else"||e.types[t-2]==="template_string_start")){if(o.script.bracePadding===true){u[t-2]=-10;u[t-1]=-10}else{u[t-2]=-20;u[t-1]=-20}}}function J(){if(e.token[t-1]===","||e.token[t-1]===":"&&e.stack[t-1]!=="data_type"){u[t-1]=-10}else{u[t-1]=-20}if(e.types[t]==="type"||e.types[t]==="type_end"){u.push(-10)}if(e.types[t]==="type_start"){u.push(-20)}}function Q(){if((x===")"||x==="x)")&&e.stack[t]==="class"&&(e.token[e.begin[t-1]-1]==="static"||e.token[e.begin[t-1]-1]==="final"||e.token[e.begin[t-1]-1]==="void")){u[t-1]=-10;u[e.begin[t-1]-1]=-10}if(x==="]")u[t-1]=-10;if(n==="else"&&x==="}"){if(e.token[t-2]==="x}")u[t-3]=u[t-3]-1;if(o.script.braceAllman===true||o.script.elseNewline===true){u[t-1]=i}}if(n==="new"&&a.has(e.token[t+1]));if(n==="from"&&C==="end"&&t>0&&(e.token[e.begin[t-1]-1]==="import"||e.token[e.begin[t-1]-1]===",")){u[t-1]=-10}if(n==="function"){if(o.script.functionSpace===false&&t<L-1&&(e.token[t+1]==="("||e.token[t+1]==="x(")){u.push(-20);return}u.push(-10);return}if(x==="-"&&t>1){if(e.types[t-2]==="operator"||e.token[t-2]===","){u[t-1]=-20}else if(e.types[t-2]==="start"){u[t-2]=-20;u[t-1]=-20}}else if(n==="while"&&(x==="}"||x==="x}")){let A=t-1;let N=0;do{if(e.token[A]==="}"||e.token[A]==="x}")N=N+1;if(e.token[A]==="{"||e.token[A]==="x{")N=N-1;if(N===0){if(e.token[A-1]==="do"){u[t-1]=-10;break}u[t-1]=i;break}A=A-1}while(A>-1)}else if(n==="in"||(n==="else"&&o.script.elseNewline===false&&o.script.braceAllman===false||n==="catch")&&(x==="}"||x==="x}")){u[t-1]=-10}else if(n==="var"||n==="let"||n==="const"){d[d.length-1]=t;if(C==="end")u[t-1]=i;if(e.token[e.begin[t]-1]!=="for"){let A=t+1;let N=0;do{if(e.types[A]==="end")N=N-1;if(e.types[A]==="start")N=N+1;if(N<0||N===0&&(e.token[A]===";"||e.token[A]===",")){break}A=A+1}while(A<L);if(e.token[A]===",")i=i+1}u.push(-10);return}if((n==="default"||n==="case")&&C!=="word"&&e.stack[t]==="switch"){u[t-1]=i-1;u.push(-10);return}if(n==="catch"&&x==="."){u[t-1]=-20;u.push(-20);return}if(n==="catch"||n==="finally"){u[t-1]=-10;u.push(-10);return}if(o.script.bracePadding===false&&t<L-1&&e.token[t+1].charAt(0)==="}"){u.push(-20);return}if(e.stack[t]==="object"&&(x==="{"||x===",")&&(e.token[t+1]==="("||e.token[t+1]==="x(")){u.push(-20);return}if(e.types[t-1]==="comment"&&e.token[e.begin[t]]==="("){u[t-1]=i+1}if(o.script.inlineReturn){if(e.stack[t]==="if"&&n==="return"&&(x==="x{"||x==="{")){const A=e.begin.lastIndexOf(e.begin[t-1],t-3);if(e.token[A-2]==="else"){if(x==="x{")e.token[t-1]="{";if(e.token[e.ender[t]]==="x}")e.token[e.ender[t]]="}";e.lines[e.ender[t]]=e.lines[e.ender[t]]-1}else{if(e.token[e.ender[t-1]+2]!=="if"&&e.token[e.ender[t-1]+1]!=="else"){u[t-1]=-20;if(x==="{")e.token[t-1]="x{";if(e.token[e.ender[t]]==="}")e.token[e.ender[t]]="x}"}else if(e.token[e.ender[t-1]+2]!=="if"&&e.token[e.ender[t-1]+1]!=="x{"){u[t-1]=-20;e.lines[e.ender[t-1]+2]=e.lines[e.ender[t-1]+2]-1;if(e.token[t-1]==="{")e.token[t-1]="x{";if(e.token[e.ender[t]]==="}")e.token[e.ender[t]]="x}";if(e.token[e.ender[t-1]+2]==="{")e.token[e.ender[t-1]+2]="x{"}}}if((x==="x}"||x==="}")&&(e.stack[t-1]==="if"&&n==="else"&&(e.token[t+1]==="{"||e.token[t+1]==="x{")&&e.token[t+2]==="return")){if(e.token[t-2]==="x;")e.token[t-2]=";"}if(x==="x{"&&n==="return"&&e.stack[t]==="else"){u[t-1]=-20;if(e.token[e.ender[t-1]-1]==="x;")e.token[e.ender[t-1]-1]=";";e.lines[e.ender[t-1]]=e.lines[e.ender[t-1]]-1;e.lines[e.ender[t]+1]=e.lines[e.ender[t]+1]-1}if(x==="x}"&&n==="else"&&e.token[t+1]==="x{"&&e.token[t+2]==="return"&&e.token[e.ender[t]-1]==="}"){e.token[e.ender[t]-1]="x}"}}u.push(-10)}do{if(e.lexer[t]===l){M=e.types[t];n=e.token[t];if(M==="comment"){z()}else if(M==="regex"){u.push(-20)}else if(M==="string"){X()}else if(M.indexOf("template_string")===0){te()}else if(M==="separator"){W()}else if(M==="start"){se()}else if(M==="end"){oe()}else if(M==="type"||M==="type_start"||M==="type_end"){J()}else if(M==="operator"){Z()}else if(M==="word"){Q()}else if(M==="reference"){ae()}else if(M==="markup"){le()}else if(M.indexOf("template")===0){ye()}else if(M==="generic"){if(x!=="return"&&x.charAt(0)!=="#"&&C!=="operator"&&x!=="public"&&x!=="private"&&x!=="static"&&x!=="final"&&x!=="implements"&&x!=="class"&&x!=="void"){u[t-1]=-20}if(e.token[t+1]==="("||e.token[t+1]==="x("){u.push(-20)}else{u.push(-10)}}else{u.push(-10)}if(M!=="comment"){C=M;x=n}if(_.length>0&&e.token[t]!==")"){if(e.types[t]==="comment"&&_[_.length-1]>-1){_[_.length-1]=o.wrap+1}else if(u[t]>-1||e.token[t].charAt(0)==="`"&&e.token[t].indexOf("\n")>0){_[_.length-1]=-1}else if(_[_.length-1]>-1){_[_.length-1]=_[_.length-1]+e.token[t].length;if(u[t]===-10)_[_.length-1]=_[_.length-1]+1}}}else{Y()}t=t+1}while(t<L);return u})();const j=(()=>{const t=[];const i=(()=>{const F=[];const u=o.indentChar;let B=o.indentSize;if(typeof B!=="number"||B<1)return"";do{F.push(u);B=B-1}while(B>0);return F.join("")})();const r=o.crlf===true?"\r\n":"\n";const P=o.preserveLine+1;const M=["x;","x}","x{","x(","x)"];let n=H.start;let C="";let x=o.indentLevel;function d(F){const u=[];const B=(()=>{if(n===L-1)return 1;if(e.lines[n+1]-1>P)return P;if(e.lines[n+1]>1)return e.lines[n+1]-1;return 1})();let D=0;if(F<0)F=0;do{u.push(r);D=D+1}while(D<B);if(F>0){D=0;do{u.push(i);D=D+1}while(D<F)}return u.join("")}if(o.script.vertical===true){let F=function(u){let B=0;let D=0;let f=u-1;let g=0;let k=0;const O=e.begin[n];const R=[];do{if((e.begin[f]===O||e.token[f]==="]"||e.token[f]===")")&&(e.token[f+1]===":"&&e.stack[f]==="object"||e.token[f+1]==="=")){g=f;D=0;do{if(e.begin[g]===O){if(e.token[g]===","||e.token[g]===";"||e.token[g]==="x;"||q[g]>-1&&e.types[g]!=="comment"){if(e.token[g+1]==="."){D=D+o.indentSize*o.indentChar.length}break}}else if(q[g]>-1){break}if(e.types[g]!=="comment"){if(q[g-1]===-10)D=D+1;D=e.token[g].length+D}g=g-1}while(g>O);k=g;if(e.token[k]===","&&e.token[f+1]==="="){do{if(e.types[k]==="end")k=e.begin[k];if(e.begin[k]===O){if(e.token[k]===";"||e.token[k]==="x;")break;if(e.token[k]==="var"||e.token[k]==="const"||e.token[k]==="let"){D=D+o.indentSize*o.indentChar.length;break}}k=k-1}while(k>O)}if(D>B)B=D;R.push([f,D]);f=g}else if(e.types[f]==="end"){f=e.begin[f]}f=f-1}while(f>O);f=R.length;if(f>0){do{f=f-1;g=R[f][1];if(g<B){do{e.token[R[f][0]]=e.token[R[f][0]]+" ";g=g+1}while(g<B)}}while(f>0)}};n=L;do{n=n-1;if(e.lexer[n]==="script"){if(e.token[n]==="}"&&e.token[n-1]!=="{"&&q[e.begin[n]]>0){F(n)}}else{n=e.begin[n]}}while(n>0)}n=H.start;do{if(e.lexer[n]===l||H.beautify[e.lexer[n]]===void 0){if(e.types[n]==="comment"&&o.commentIndent===true){if(/\n/.test(e.token[n])){const F=e.begin[n]>-1?e.token[n].charAt(2)==="*"?Ie(q[n],i)+o.indentChar:Ie(q[n],i):o.indentChar;const u=e.token[n].split(/\n/);let B=1;do{u[B]=F+u[B].trimStart();B=B+1}while(B<u.length);e.token.splice(n,1,u.join("\n"))}}if(M.indexOf(e.token[n])<0){if(e.token[n]!==";"||o.script.noSemicolon===false){t.push(e.token[n])}else if(q[n]<0&&e.types[n+1]!=="comment"){t.push(";")}}if(n<L-1&&e.lexer[n+1]!==l&&e.begin[n]===e.begin[n+1]&&e.types[n+1].indexOf("end")<0&&e.token[n]!==","){t.push(" ")}else if(q[n]>-1){if((q[n]>-1&&e.token[n]==="{"||q[n]>-1&&e.token[n+1]==="}")&&e.lines[n]<3&&o.script.braceNewline===true){if(e.lines[n+1]<3)t.push(d(0))}t.push(d(q[n]));x=q[n]}else if(q[n]===-10){t.push(" ");if(e.lexer[n+1]!==l)x=x+1}}else{if(c[n]===n){t.push(e.token[n])}else{H.end=c[n];H.start=n;o.indentLevel=x;C=H.beautify[e.lexer[n]](o);t.push(C.replace(/\s+$/,""));n=H.iterator;if(q[n]===-10){t.push(" ")}else if(q[n]>-1){t.push(d(q[n]))}o.indentLevel=0}}n=n+1}while(n<L);H.iterator=L-1;return t.join("")})();return j};var Ae={language:{description:"The language name",lexer:"all",type:"select",default:"auto",values:[{rule:"auto",description:"Prettify will automatically detect the language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",lexer:"all",type:"number"},indentSize:{default:2,description:'The number of "indentChar" values to comprise a single indentation.',lexer:"all",type:"number"},indentChar:{default:" ",description:"The string characters to comprise a single indentation. Any string combination is accepted.",lexer:"all",type:"string"},crlf:{default:false,description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",lexer:"all",type:"boolean"},endNewline:{default:false,description:"Insert an empty line at the end of output.",lexer:"all",type:"boolean"},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",lexer:"all",type:"number"},preserveComment:{default:false,description:"Prevent comment reformatting due to option wrap.",lexer:"all",type:"boolean"},commentNewline:{default:false,description:"If a blank new line should be forced above comments.",lexer:"all",type:"boolean"},commentIndent:{default:false,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",lexer:"all",type:"boolean"},correct:{default:false,description:"Automatically correct some sloppiness in code.",lexer:"all",type:"boolean"},quoteConvert:{lexer:"all",description:"If the quotes should be converted to single quotes or double quotes.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},attributeSort:{default:false,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",lexer:"markup",type:"boolean"},attributeSortList:{default:[],description:"A comma separated list of attribute names. Attributes will be sorted according to this list and then alphanumerically. This option requires 'attributeSort' have a value of true.",lexer:"markup",type:"array"},attributeValues:{default:false,description:"Controls how attribute values should be formatter",type:"select",lexer:"markup",values:[{rule:"preserve",description:"Preserves attribute values, leaving them intact."},{rule:"collapse",description:"Collapsed all space separated attributes values onto newlines"},{rule:"wrap",description:"Collapase attribute values when then exceed wrap limit"},{rule:"strip",description:"Strips newlines and extraneous whitespaces from attribute values"}]},delimiterSpacing:{default:true,description:"Whether or not delimiter characters should apply a single space at the start and end point",lexer:"markup",type:"boolean"},forceAttribute:{default:false,description:"If all markup attributes should be indented each onto their own line. This option accepts either a boolean or number value, depending on your preferences you can either force attributes based a count limit, disable forcing or always enable enforcing.",lexer:"markup",type:["number","boolean"],multi:{number:{default:1,description:"Optionally define an attribute force threshold. When the number of attributes exceeds this limit then they will be forced, otherwise they will be left intact."},boolean:{default:false,description:"Whether or not to enforce the rule. A value of true will always force attributes, whereas a value of false will never force attributes."}}},forceLeadAttribute:{default:false,description:"Forces leading attribute onto a newline when using wrap based indentation.",lexer:"markup",type:"boolean"},forceIndent:{default:false,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",lexer:"markup",type:"boolean"},preserveAttributes:{default:false,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",lexer:"markup",type:"boolean"},preserveText:{default:false,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",lexer:"markup",type:"boolean"},selfCloseSpace:{default:false,description:'Markup self-closing tags end will end with " />" instead of "/>".',lexer:"markup",type:"boolean"},classPadding:{description:"Inserts new line characters between every CSS code block.",default:false,type:"boolean",lexer:"style"},sortSelectors:{default:false,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code.",lexer:"style"},sortProperties:{lexer:"style",description:"This option will alphabetically sort CSS properties contained within classes.",default:false,type:"boolean"},noLeadZero:{lexer:"style",description:"This will eliminate leading zeros from numbers expressed within values.",default:false,type:"boolean"},compressCSS:{lexer:"style",description:"If CSS should be beautified in a style where the properties and values are minifed for faster reading of selectors.",default:false,type:"boolean"},forceValue:{lexer:"style",description:"If CSS selector property values should be indented onto newlines",default:"preserve",type:"select",values:[{rule:"preserve",description:"Preserves property values, output does not augment provided structures"},{rule:"collapse",description:"Collapsed all selector property values onto newlines"},{rule:"wrap",description:"Collapase only selector property values which exceed wrap limit"}]},braceAllman:{lexer:"script",default:false,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:false,description:"This will create a newline before and after objects values",type:"boolean",lexer:"script"},braceNewline:{default:false,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean",lexer:"script"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"select",lexer:"script",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},arrayFormat:{lexer:"script",description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"select",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},objectSort:{default:false,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean",lexer:"script"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"select",lexer:"script",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{lexer:"script",default:true,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{lexer:"script",default:true,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{lexer:"script",default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},caseSpace:{default:false,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code.",lexer:"script"},inlineReturn:{lexer:"script",default:true,type:"boolean",description:"Inlines return statements contained within `if` and `else` conditions. This rules also augments code and will reason about your structure to output the best and most readable results."},elseNewline:{lexer:"script",default:false,type:"boolean",description:'If keyword "else" is forced onto a new line.'},ternaryLine:{lexer:"script",description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:false},neverFlatten:{lexer:"script",default:true,description:"If destructured lists in script should never be flattend.",type:"boolean"},variableList:{lexer:"script",description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each \u2014 Ensure each reference is a single declaration statement.",type:"select",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{lexer:"script",description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:false},noCaseIndent:{lexer:"script",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation, thereby keeping the case on a single line of code.",default:false,type:"boolean"},noSemicolon:{lexer:"script",description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:false,type:"boolean"},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"select",lexer:"script",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]}};var je={};dt(je,{format:()=>He,language:()=>Ze,options:()=>ze,parse:()=>rt});function xt(o){const a=o.source.search(/((\/(\*|\/))|{%-?\s*comment\s*-?%}|<!--)\s*@prettify\s+(\w+)?\s*{\s+/);const c=o.source.search(/((\/(\*|\/))|{%-?\s*comment\s*-?%}|<!--)\s*@prettify-ignore\b/);const e=Ne(Ae);const l=e.length;let b=0;if(c>-1&&o.source.slice(0,c).trimStart()==="")return false;if(a>-1&&(a===0||`"':`.indexOf(o.source.charAt(a-1))<0)){let L=function(){if(t.charAt(r-1)!=="\\")return false;let D=r;do{D=D-1}while(D>0&&t.charAt(D)==="\\");return(r-D)%2===0};const q=[];const j=a;const t=o.source;const i=t.length;let r=j;let P=0;let M="";let n="";let C="";let x="";let d=[];let F=[];let u;let B;if(t.charAt(r)==="<"){B="<!--"}else if(t.charAt(r+1)==="/"){B="//"}else if(t.charAt(r+1)==="%"){u=t.indexOf("}",r+1);if(t[u-1].charCodeAt(0)===37)B=t.slice(r,u+1)}else{B="/*"}do{if(t.slice(r-9,r)==="@prettify")break;r=r+1}while(r<i);do{if(L()===false){if(M===""){if(t.charAt(r)==='"'||t.charAt(r)==="'"||t.charAt(r)==="`"){M=t.charAt(r);if(q.length>0&&q[q.length-1].charAt(q[q.length-1].length-1)===":")P=r}else if(/\s/.test(t.charAt(r))===false&&P===0){P=r}else if(t.charAt(r)===","||/\s/.test(t.charAt(r))===true&&P>0){n=t.slice(P,r);if(q.length>0){if(q.length>0&&n===":"&&q[q.length-1].indexOf(":")<0){q[q.length-1]=q[q.length-1]+n;P=r}else if(q.length>0&&q[q.length-1].charAt(q[q.length-1].length-1)===":"){q[q.length-1]=q[q.length-1]+n;P=0}else{q.push(n);P=0}}else{q.push(n);P=0}}if(B==="<!--"&&t.slice(r-2,r+1)==="-->")break;if(B==="//"&&t.charAt(r)==="\n")break;if(B==="/*"&&t.slice(r-1,r+1)==="*/")break;if(B.charCodeAt(1)===37&&t.slice(r-1,r+1)==="%"&&t.indexOf("endcomment",t.indexOf("{%",u))>0)break}else if(t.charAt(r)===M&&M!=="${"){M=""}else if(M==="`"&&t.slice(r,r+2)==="${"){M="${"}else if(M==="${"&&t.charAt(r)==="}"){M="`"}}r=r+1}while(r<i);if(P>0){M=t.slice(P,r+1);if(B==="<!--")M=M.replace(/\s*-+>$/,"");else if(B==="//")M=M.replace(/\s+$/,"");else M=M.replace(/\s*\u002a\/$/,"");q.push(M)}r=q.length;if(r>0){do{r=r-1;if(q[r].indexOf(":")>0){F=[q[r].slice(0,q[r].indexOf(":")),q[r].slice(q[r].indexOf(":")+1)]}else if(Ae[q[r]]!==void 0&&Ae[q[r]].type==="boolean"){o.options[q[r]]=true}if(F.length===2&&Ae[F[0]]!==void 0){if(F[1].charAt(F[1].length-1)===F[1].charAt(0)&&(F[1].charAt(0)==='"'||F[1].charAt(0)==="'"||F[1].charAt(0)==="`")){F[1]=F[1].slice(1,F[1].length-1)}if(Ae[F[0]].type==="number"&&isNaN(Number(F[1]))===false){o.options[F[0]]=Number(F[1])}else if(Ae[F[0]].type==="boolean"){o.options[F[0]]=F[1]==="true"}else{if(Ae[F[0]].values!==void 0){d=Ne(Ae[F[0]].values);P=d.length;do{P=P-1;if(d[P]===F[1]){o.options[F[0]]=F[1];break}}while(P>0)}else{if(F[0]==="language"){C=F[1]}else if(F[0]==="lexer"){x=F[1]}o.options[F[0]]=F[1]}}}}while(r>0);if(x===""&&C!=="")x=nt(C)}}if(o.options.lexer==="script"){if(o.options.script.styleGuide!==void 0){switch(o.options.script.styleGuide){case"airbnb":o.options.wrap=80;o.options.indentChar=" ";o.options.indentSize=2;o.options.preserveLine=1;o.options.script.correct=true;o.options.script.quoteConvert="single";o.options.script.variableList="each";o.options.script.endComma="always";o.options.script.bracePadding=true;break;case"crockford":o.options.indentChar=" ";o.options.indentSize=4;o.options.script.correct=true;o.options.script.bracePadding=false;o.options.script.elseNewline=false;o.options.script.endComma="never";o.options.script.noCaseIndent=true;o.options.script.functionSpace=true;o.options.script.variableList="each";o.options.script.vertical=false;break;case"google":o.options.wrap=-1;o.options.indentChar=" ";o.options.indentSize=4;o.options.preserveLine=1;o.options.script.correct=true;o.options.script.quoteConvert="single";o.options.script.vertical=false;break;case"jquery":o.options.wrap=80;o.options.indentChar="	";o.options.indentSize=1;o.options.script.correct=true;o.options.script.bracePadding=true;o.options.script.quoteConvert="double";o.options.script.variableList="each";break;case"jslint":o.options.indentChar=" ";o.options.indentSize=4;o.options.script.correct=true;o.options.script.bracePadding=false;o.options.script.elseNewline=false;o.options.script.endComma="never";o.options.script.noCaseIndent=true;o.options.script.functionSpace=true;o.options.script.variableList="each";o.options.script.vertical=false;break;case"standard":o.options.wrap=0;o.options.indentChar=" ";o.options.indentSize=2;o.options.endNewline=false;o.options.preserveLine=1;o.options.script.correct=true;o.options.script.noSemicolon=true;o.options.script.endComma="never";o.options.script.braceNewline=false;o.options.script.bracePadding=false;o.options.script.braceAllman=false;o.options.script.quoteConvert="single";o.options.script.functionSpace=true;o.options.script.ternaryLine=false;o.options.script.variableList="each";o.options.script.vertical=false;break;case"yandex":o.options.script.correct=true;o.options.script.bracePadding=false;o.options.script.quoteConvert="single";o.options.script.variableList="each";o.options.script.vertical=false;break}}if(o.options.script.braceStyle!==void 0){switch(o.options.script.braceStyle){case"collapse":o.options.script.braceNewline=false;o.options.script.bracePadding=false;o.options.script.braceAllman=false;o.options.script.objectIndent="indent";o.options.script.neverFlatten=true;break;case"collapse-preserve-inline":o.options.script.braceNewline=false;o.options.script.bracePadding=true;o.options.script.braceAllman=false;o.options.script.objectIndent="indent";o.options.script.neverFlatten=false;break;case"expand":o.options.script.braceNewline=false;o.options.script.bracePadding=false;o.options.script.braceAllman=true;o.options.script.objectIndent="indent";o.options.script.neverFlatten=true;break}}if(o.options.language==="json")o.options.wrap=0}do{if(o.options[Ne[b]]!==void 0){Ae[Ne[b]].lexer.length}b=b+1}while(b<l)}function wt(o){const{source:a,options:c}=o;const{lexer:e,language:l}=c;if(typeof o.lexers[e]==="function"){o.lexers[e](`${a} `)}else{s.error=`Specified lexer, ${e}, is not a function.`}let b=0;let L=0;const q=Ne(s.data);const j=q.length;do{L=b+1;do{if(s.data[q[b]].length!==s.data[q[L]].length){s.error=`"${q[b]}" array is of different length than "${q[L]}"`;break}L=L+1}while(L<j);b=b+1}while(b<j-1);if(s.data.begin.length>0){if(e==="script"&&(l==="json"&&c.json.objectSort===true||c.language!=="json"&&c.script.objectSort===true)){s.sortCorrection(0,s.count+1)}else if(e==="style"&&c.style.sortProperties){s.sortCorrection(0,s.count+1)}}return s.data}function st(o){const a=Date.now();const c={language:o,chars:-1};return e=>{c.chars=e;c.size=kt(e);c.time=(Date.now()-a).toFixed(1);return c}}function vt(o){const{languageName:a}=ke(o.options.language);const c=o.options.crlf===true?"\r\n":"\n";const e=o.source.match(/\n/g);const l=st(a);let b=v;if(e===null){if(o.options.endNewline)b=c;o.stats=l(b.length)}else{b=e[0].length>o.options.preserveLine?Ie(o.options.preserveLine,c):Ie(e[0].length,c);if(o.options.endNewline)b+=c;o.stats=l(b.length)}return b}function it(o){o.data=s.init();if(!/\S/.test(o.source))return vt(o);if(o.options.language==="text"){o.options.language="text";o.options.languageName="Plain Text";o.options.lexer="markup"}else if(o.options.language==="auto"||o.options.language===void 0){const{lexer:b,language:L,languageName:q}=Ze(o.source);if(L==="unknown"){console.warn("Prettify: unknown and/or unsupport language");console.info("Prettify: define a support language (fallback is HTML)")}o.options.lexer=b;o.options.language=L;o.options.languageName=q}else{const{lexer:b,language:L,languageName:q}=ke(o.options.language);if(L==="unknown"){console.warn(`Prettify: unsupport ${o.options.language}`);console.info("Prettify: language is not supported (fallback is HTML)")}o.options.lexer=b;o.options.language=L;o.options.languageName=q}const a=st(o.options.languageName);const c=o.mode;const e=o.options.crlf===true?"\r\n":"\n";let l=o.source;if(xt(o)===false){o.stats=a(l.length);return l}o.data=wt(o);if(c==="parse"){o.stats=a(l.length);return s.data}l=o.beautify[o.options.lexer](o.options);l=o.options.endNewline===true?l.replace(/\s*$/,e):l.replace(/\s+$/,v);o.stats=a(l.length);o.end=0;o.start=0;return l}He.before=o=>H.hooks.before.push(o);He.after=o=>H.hooks.after.push(o);ze.listen=o=>H.hooks.rules.push(o);Be(He,"stats",{get(){return H.stats}});Be(rt,"stats",{get(){return H.stats}});Be(ze,"rules",{get(){return H.options}});function He(o,a){H.source=o;if(typeof a==="object")H.options=ze(a);if(H.hooks.before.length>0){for(const e of H.hooks.before){if(e(H.options,o)===false)return o}}const c=it(H);if(H.hooks.after.length>0){for(const e of H.hooks.after){if(e.call(s.data,c,H.options)===false)return o}}return new Promise((e,l)=>{if(s.error.length)return l(s.error);return e(c)})}function ze(o){var a,c;for(const e of Ne(o)){if(((c=(a=Ae)==null?void 0:a[e])==null?void 0:c.lexer)==="auto"){H.options[e]=o[e]}else if(e==="markup"){Le(H.options.markup,o.markup)}else if(e==="script"){Le(H.options.script,o.script)}else if(e==="style"){Le(H.options.style,o.style)}else if(e==="json"){Le(H.options.json,o.json)}else if(e==="grammar"){pe.extend(o.grammar)}else if(e in H.options){H.options[e]=o[e]}}if(H.hooks.rules.length>0){for(const e of H.hooks.rules)e(H.options)}return H.options}function rt(o,a){H.source=o;H.mode="parse";if(typeof a==="object")H.options=ze(a);const c=it(H);return new Promise((e,l)=>{if(s.error.length)return l(s.error);return e(c)})}var ve=require("vscode");var ot=Ke(require("path"));var De=Ke(require("fs"));var Re=require("vscode");var Fe=class{constructor(){this.error=false;this.barItem=Re.window.createStatusBarItem(Re.StatusBarAlignment.Right,-2);this.outputChannel=Re.window.createOutputChannel("Liquid")}statusBarItem(a,c){const e={enabled:{text:"\u{1F4A7} Liquid: $(check)",tooltip:"Enable/Disable Liquid Formatting",command:"liquid.disableFormatting"},disabled:{text:"\u{1F4A7} Liquid: $(x)",tooltip:"Enable Liquid Formatting",command:"liquid.enableFormatting"},error:{text:"\u26A0\uFE0F Liquid: $(check)",tooltip:"Errors detected! Toggle output",command:"liquid.toggleOutput"}};Object.assign(this.barItem,e[a]);if(c!==void 0)return c?this.barItem.show():this.barItem.hide()}outputLog({title:a,message:c,show:e=false}){const l=new Date().toLocaleString();this.outputChannel.appendLine(`[${l}] ${a}: ${c}`);if(e){this.error=true;this.statusBarItem("error");this.outputChannel.show()}}};var Te=class extends Fe{constructor(){super();this.liquid=ve.workspace.getConfiguration("liquid");this.format=false;this.watch=false;this.error=false;this.reset=false;this.config={};this.liquid=ve.workspace.getConfiguration("liquid");this.format=this.liquid.get("format");if(ve.workspace.workspaceFolders!==void 0){this.rcfile=ot.default.join(ve.workspace.workspaceFolders[0].uri.fsPath,".liquidrc")}this.watch=false;this.error=false;this.reset=false}setFormattingRules(){var c;if(!De.default.existsSync(this.rcfile)){const e=ve.workspace.getConfiguration("liquid");const l=e.get("rules");je.options(l);this.config=(c=je.options)==null?void 0:c.rules}else{try{const e=De.default.readFileSync(this.rcfile,"utf8");const l=JSON.parse(e);je.options(l.prettify);this.outputLog({title:"Prettify",message:"Updated Formatting Rules"});this.error=false}catch(e){this.outputLog({title:"Error reading formatting rules",file:this.rcfile,message:e.message,show:true})}finally{this.rcfileWatcher()}}}rcfileWatcher(){if(!this.watch){const c=ve.workspace.createFileSystemWatcher(this.rcfile,true,false,false);c.onDidDelete(()=>this.setFormattingRules());c.onDidChange(()=>{this.reset=true;this.setFormattingRules()});this.watch=true}}async rcfileGenerate(){if(De.default.existsSync(this.rcfile)){const l=await ve.window.showErrorMessage(".liquidrc file already exists!","Open");if(l==="Open"){ve.workspace.openTextDocument(this.rcfile).then(b=>{ve.window.showTextDocument(b,1,false)},b=>{return console.error(b)})}}const c=ve.workspace.getConfiguration("liquid");const e=JSON.stringify(c.rules,null,2);De.default.writeFile(this.rcfile,e,l=>{if(l){return this.outputLog({title:"Error generating rules",file:this.rcfile,message:l.message,show:true})}ve.workspace.openTextDocument(this.rcfile).then(b=>{ve.window.showTextDocument(b,1,false)},b=>{return console.error(b)}).then(()=>{this.rcfileWatcher();return ve.window.showInformationMessage("You are now using a .liquidrc file to define formatting rules \u{1F44D}")})})}};var $e=class extends Te{async completeDocument(){if(_e.window.activeTextEditor===void 0)return;const{activeTextEditor:a}=_e.window;const{document:c}=a;const e=$e.range(c);const l=c.getText(e);try{const b=await je.format(l,{language:c.languageId});await a.edit(L=>L.replace(e,b))}catch(b){this.outputLog({title:"Prettify",message:`${b}`})}}async selectedText(){if(_e.window.activeTextEditor===void 0)return;const{activeTextEditor:a}=_e.window;const{document:c,selection:e}=a;const l=c.getText(e);try{const b=await je.format(l);await a.edit(L=>L.replace(e,b))}catch(b){this.outputLog({title:"Prettify",message:`${b}`})}}static range(a){const c=a.getText().length-1;const e=a.positionAt(0);const l=a.positionAt(c);return new _e.Range(e,l)}};var We=class extends $e{constructor(){super();this.handler={};this.setFormattingRules()}onConfigChanges(){this.error=false;this.dispose();this.setFormattingRules();this.onOpenTextDocument()}onOpenTextDocument(){if(xe.window.activeTextEditor===void 0)return;const{fileName:c,languageId:e}=xe.window.activeTextEditor.document;if(this.error)this.statusBarItem("error",true);if(e!=="html"){this.dispose();this.barItem.hide();return}if(!xe.workspace.getConfiguration("editor").formatOnSave){this.format=false}if(!this.format){this.dispose();this.statusBarItem("disabled",true);return}if(c in this.handler)this.handler[c].dispose();if(!this.error&&this.format)this.statusBarItem("enabled",true);this.handler[c]=xe.languages.registerDocumentFormattingEditProvider({scheme:"file",language:"html"},{async provideDocumentFormattingEdits(l,b,L){const q=$e.range(l);const j=l.getText(q);try{const t=await je.format(j,{language:l.languageId});return[xe.TextEdit.replace(q,t)]}catch(t){this.outputLog({title:"Prettify",message:`${t}`})}}})}dispose(){for(const c in this.handler)if(c in this.handler)this.handler[c].dispose()}selection(){try{this.selectedText();xe.window.showInformationMessage("Selection Formatted \u{1F4A7}")}catch(c){xe.window.showInformationMessage("Format Failed! The selection is invalid or incomplete!");this.outputChannel.appendLine(`\u{1F4A7} Liquid: ${c}`)}}liquidrc(){return this.rcfileGenerate()}async document(){try{await this.completeDocument();xe.window.showInformationMessage("Document Formatted \u{1F4A7}")}catch(c){console.log(c);xe.window.showInformationMessage("Document could not be formatted, check your code!");this.outputChannel.appendLine(`\u{1F4A7} Liquid: ${c}`)}}output(){return this.outputChannel.show()}async enable(){this.format=true;await this.liquid.update("format",this.format,xe.ConfigurationTarget.Global);return await xe.window.showInformationMessage("Liquid Formatting Enabled \u{1F4A7}")}async disable(){this.format=false;await this.liquid.update("format",this.format,xe.ConfigurationTarget.Global);return await xe.window.showInformationMessage("Liquid Formatting Disabled \u{1F4A7}")}};exports.activate=o=>{const{registerCommand:a}=qe.commands;const c=o.subscriptions;const e=qe.window.activeTextEditor;const l=new We;const{liquidrc:b,onConfigChanges:L,onOpenTextDocument:q,disable:j,enable:t,selection:i,output:r}=l;c.push(a("liquid.liquidrc",b.bind(l)));if(!e||!e.document)return;c.push(qe.workspace.onDidChangeConfiguration(L.bind(l)));c.push(qe.workspace.onDidOpenTextDocument(q.bind(l)));c.push(a("liquid.disableFormatting",j.bind(l)));c.push(a("liquid.enableFormatting",t.bind(l)));c.push(a("liquid.formatSelection",i.bind(l)));c.push(a("liquid.toggleOutput",r.bind(l)))};
